{"version":3,"sources":["webpack:///flow.min.js","webpack:///webpack/bootstrap 8b65228350414fef48c2","webpack:///external \"_\"","webpack:///./src/config.js","webpack:///./src/channels/channel-router/utils/index.js","webpack:///./src/utils/parse-utils.js","webpack:///./src/channels/channel-utils.js","webpack:///./src/channels/channel-router/index.js","webpack:///./src/channels/route-handlers/route-matchers.js","webpack:///./src/utils/general/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/index.js","webpack:///./src/utils/animation.js","webpack:///./src/dom/attribute-manager/attr-template-utils.js","webpack:///./src/dom/node-manager/default-input-node.js","webpack:///./src/dom/node-manager/default-node.js","webpack:///./src/dom/attribute-manager/attributes/loop-attrs/loop-attr-utils.js","webpack:///./src/utils/general/promise-utils.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-utils.js","webpack:///./src/channels/channel-manager-enhancements/interpolatable/interpolatable-utils.js","webpack:///./src/flow.js","webpack:///./src/dom/dom-manager.js","webpack:///./src/dom/dom-manager-utils/dom-parse-helpers/parse-converters.js","webpack:///./src/dom/dom-manager-utils/dom-parse-helpers/parse-channel.js","webpack:///./src/dom/dom-manager-utils/dom-parse-helpers/parse-topics.js","webpack:///./src/dom/dom-manager-utils/dom-channel-prefix-helpers/index.js","webpack:///./src/dom/converter-manager/index.js","webpack:///./src/dom/converter-manager/converters/number-converters/index.js","webpack:///./src/dom/converter-manager/converters/string-converters/index.js","webpack:///./src/dom/converter-manager/converters/array-converters/index.js","webpack:///./src/dom/converter-manager/converters/general-util-converters/index.js","webpack:///./src/dom/converter-manager/converters/numberformat-converter/index.js","webpack:///./src/dom/converter-manager/converters/number-compare-converters/index.js","webpack:///./src/dom/converter-manager/converters/boolean-conditional-converters/index.js","webpack:///./src/dom/converter-manager/converters/collection-converters/index.js","webpack:///./src/dom/node-manager/index.js","webpack:///./src/dom/node-manager/input-checkbox-node.js","webpack:///./src/utils/base-view.js","webpack:///./src/dom/attribute-manager/index.js","webpack:///./src/dom/attribute-manager/attributes/no-op-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/events/default-event-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/loop-attrs/foreach-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/loop-attrs/repeat-attr/index.js","webpack:///./src/utils/general/debounce-and-merge.js","webpack:///./src/dom/attribute-manager/attributes/class-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/boolean-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/toggles/show-if-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/toggles/hide-if-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/binds/checkbox-radio-bind-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/binds/input-bind-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/binds/default-bind-attr/index.js","webpack:///./src/dom/attribute-manager/attributes/binds/bind-utils/index.js","webpack:///./src/dom/attribute-manager/attributes/default-attr/index.js","webpack:///./src/dom/plugins/auto-update-bindings.js","webpack:///./src/channels/configured-channel-manager.js","webpack:///./src/channels/channel-manager.js","webpack:///external \"jQuery\"","webpack:///./src/channels/channel-router/utils/handler-utils.js","webpack:///./src/channels/channel-router/utils/silencable.js","webpack:///./src/channels/channel-router/utils/exclude-read-only.js","webpack:///./src/channels/route-handlers/json-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/default-run-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-meta-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-variables-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-variables-route-handler/retriable-variable-fetch.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-operations-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/scenario-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/runid-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/run-router-factory.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/world-users-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/world-current-user-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/index.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-operations-handler.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-status-handler.js","webpack:///./src/channels/route-handlers/epicenter-route-handlers/multi-run-route-handler/index.js","webpack:///./src/channels/route-handlers/dom-route-handler/index.js","webpack:///./src/channels/channel-manager-enhancements/interpolatable/index.js","webpack:///./src/channels/channel-manager-enhancements/interpolatable/subscribe-interpolator.js","webpack:///./src/channels/channel-manager-enhancements/interpolatable/publish-interpolator.js","webpack:///./src/channels/channel-manager-enhancements/routable/index.js"],"names":["Flow","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_","prefix","binderAttr","events","trigger","convert","error","attrs","checkboxOffValue","repeat","templateId","errorAttr","animation","addAttr","changeAttr","initialAttr","__webpack_exports__","stripSuffixDelimiter","text","indexOf","CHANNEL_DELIMITER","length","replace","mapWithPrefix","dataArray","map","datapt","$","extend","withPrefix","callback","prefixList","arr","concat","data","forEach","mapped","unprefixTopics","list","item","unprefix","__WEBPACK_IMPORTED_MODULE_0__silencable__","__WEBPACK_IMPORTED_MODULE_1__exclude_read_only__","toImplicitType","objRegex","arrRegex","converted","trim","charAt","substring","isNumeric","test","bracketReplaced","parsed","split","val","JSON","parse","e","console","splitUnescapedCommas","str","regex","op","exec","index","lastIndex","match","groupIndex","push","splitNameArgs","value","args","toPublishableFormat","objectToPublishable","obj","keys","t","publishableToObject","mergeWith","reduce","accum","topic","normalizeParamOptions","publishValue","options","isPlainObject","params","Array","isArray","notifySubscribeHandlers","handlers","topics","grouped","__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__","promises","filter","handler","subscribeHandler","mergedOptions","unprefixed","__WEBPACK_IMPORTED_MODULE_1__utils__","matched","promise","__WEBPACK_IMPORTED_MODULE_2_utils_general__","then","topicsWithData","normalized","when","apply","arguments","notifyUnsubscribeHandlers","recentlyUnsubscribedTopics","remainingTopics","h","unsubsKey","unsubsGrouped","remainingGrouped","unsubscribeHandler","unprefixedUnsubs","matchingRemainingHandler","__WEBPACK_IMPORTED_MODULE_3_lodash___default","a","find","remainingHandler","matchingTopicsRemaining","unprefixedRemaining","passthroughPublishInterceptors","publishData","$initialProm","Deferred","resolve","dataSoFar","publishableData","readOnly","result","publishHandler","published","silent","isDefault","router","notifier","_this","this","myHandlers","Handler","isFunction","expose","matchString","addRoute","Error","id","uniqueId","unshift","removeRoute","routeid","__WEBPACK_IMPORTED_MODULE_3_lodash__","matchPrefix","matchDefaultPrefix","forcePrefix","matchRegex","toMatch","RegExp","ROUTE_DELIMITER","random","min","max","parseInt","__WEBPACK_IMPORTED_MODULE_0_lodash__","rnd","__WEBPACK_IMPORTED_MODULE_1__promise_utils__","__WEBPACK_IMPORTED_MODULE_2__debounce_and_merge__","_shouldFetch","ignoreOperations","r","isIgnored","OPERATIONS_PREFIX","isVariable","VARIABLES_PREFIX","isOperation","GenericRunRouteHandler","config","defaults","serviceOptions","channelOptions","variables","autoFetch","debounce","operations","meta","opts","__WEBPACK_IMPORTED_MODULE_6_lodash___default","RunService","rs","operationNotifier","__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__","variableNotifier","metaHandler","__WEBPACK_IMPORTED_MODULE_0__run_meta_route_handler__","META_PREFIX","operationsHandler","__WEBPACK_IMPORTED_MODULE_2__run_operations_route_handler__","variablesHandler","__WEBPACK_IMPORTED_MODULE_1__run_variables_route_handler__","subscribed","channel","TOPICS","subscribeOpts","includeMine","subscribe","RUN_VARIABLES","publishable","__WEBPACK_IMPORTED_MODULE_7_channels_channel_utils__","excludingSilenced","notify","fetch","RUN_OPERATIONS","CONSENSUS_UPDATE","consensus","closed","RUN_RESET","__WEBPACK_IMPORTED_MODULE_5_channels_route_handlers_route_matchers__","runRouter","__WEBPACK_IMPORTED_MODULE_3_channels_channel_router__","oldhandler","excludeFromFetch","exclude","__WEBPACK_IMPORTED_MODULE_6_lodash__","F","service","Run","_defineProperty","key","writable","_findMostConsequtive","prev","count","maxCount","Math","buildDiffArray","currentcontents","newContents","contents","fill","elToContents","el","outerHTML","elementsToContents","$els","child","addChangeClassesToList","$currentEls","$newEls","isInitial","reversedContents","diffFromEnd","diffFromBeginning","slice","reverse","endMatches","beginningMatches","placeHoldersCount","placeHolders","undefined","$el","eq","curr","removeAttr","_$el$attr","attr","_$el$attr2","addContentAndAnimate","newValue","current","html","setTimeout","_$el$attr3","getKnownDataForEl","closestKnownDataEl","closest","CURRENT_INDEX_ATTR","knownData","CURRENT_INDEX_KEY","updateKnownDataForEl","stringify","removeKnownData","getTemplateTags","template","isTemplated","findMissingReferences","knownDataKeys","isKnownTag","tag","knownTags","missingReferences","templateTagsUsed","refKey","refToMarkup","stubMissingReferences","refId","addBackMissingReferences","originalTemplateVal","commentRef","getOriginalContents","resolver","originalHTML","elTemplateMap","set","clearOriginalContents","delete","WeakMap","__WEBPACK_IMPORTED_MODULE_0__config__","__WEBPACK_IMPORTED_MODULE_1__default_node__","__WEBPACK_IMPORTED_MODULE_1__default_node___default","propertyHandlers","uiChangeEvent","getUIValue","removeEvents","off","initialize","propName","triggerChangeOn","changeHandler","payload","source","restoreOriginal","bind","debouncedHandler","on","selector","BaseView","extractVariableName","attrVal","inMatch","IN_OF_REGEX","parseKeyAlias","itMatch","KEY_VALUE_REGEX","parseValueAlias","aliasesFromTopics","relevantTopic","defaultKey","keyAlias","valueAlias","parseTopics","makePromise","$def","toReturn","reject","promisify","fn","makeConsensusService","consensisAPIResponse","window","Consensus","stage","consensusGroup","worldId","extractDependencies","interpolationRegex","interpolateWithValues","dependency","__WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__","__WEBPACK_IMPORTED_MODULE_1_channels_configured_channel_manager__","__WEBPACK_IMPORTED_MODULE_2_config__","__WEBPACK_IMPORTED_MODULE_2_config___default","__WEBPACK_IMPORTED_MODULE_3__utils__","dom","utils","model","run","root","autoBind","prom","unbindAll","bindAll","ChannelManager","constants","version","__WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__","__WEBPACK_IMPORTED_MODULE_1__dom_manager_utils_dom_channel_prefix_helpers__","__WEBPACK_IMPORTED_MODULE_2_utils_parse_utils__","__WEBPACK_IMPORTED_MODULE_4__config__","__WEBPACK_IMPORTED_MODULE_5__converter_manager__","__WEBPACK_IMPORTED_MODULE_6__node_manager__","__WEBPACK_IMPORTED_MODULE_7__attribute_manager__","__WEBPACK_IMPORTED_MODULE_8__plugins_auto_update_bindings__","getMatchingElements","$root","matchedElements","is","add","getElementOrError","element","context","nodeName","triggerError","msg","message","unbindAllAttributes","domEl","attributes","each","nodeMap","getHandler","unbind","unbindAllNodeHandlers","handle","removeAllSubscriptions","subscriptions","subs","unsubscribe","expr","pseudos","publicAPI","nodes","converters","Map","unbindElement","existingData","subsid","subscriptionId","animAttrs","join","removeData","bindElement","isExcluded","changeEventOverrides","uiChangeEvents","triggerSelector","matchingEvent","filterPrefix","attrList","init","channelPrefix","channelConfig","attrsWithSubscriptions","subsOptions","batch","onError","subscribableTopics","previousData","toConvert","dataForAttr","toReplace","assign","elementsToBind","elementsToUnbind","me","plugins","attachUIListeners","parseValue","evt","elMeta","target","sourceMeta","action","parsedValue","actualName","publish","last","attachConversionListner","prop","_elMeta$prop","convertedValue","deferred","__WEBPACK_IMPORTED_MODULE_0__parse_converters__","__WEBPACK_IMPORTED_MODULE_1__parse_channel__","__WEBPACK_IMPORTED_MODULE_2__parse_topics__","convertersToArray","conv","v","getConvertersFromAttr","attribute","withConv","getFConvertAttrVal","suffix","suffixAttr","getConvertersForEl","convertersAsPipes","$parentEl","parents","resolvedConverters","parentConv","getChannelForAttribute","getChannelConfigForElement","attrib","specified","parseTopicsFromAttributeValue","commaRegex","topicsPart","addPrefixToTopics","currentName","addDefaultPrefix","isUnprefixed","defaultPrefix","DEFAULT_OPERATIONS_PREFIX","DEFAULT_VARIABLES_PREFIX","needsDefaultPrefix","hasDefaultPrefix","__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__","normalize","alias","converter","acceptList","ret","matchConverter","converterManager","private","register","currentConverter","splice","getConverter","norm","Function","currentValue","convertArray","converterName","convertObject","parseFloat","plus","operand","Number","minus","multiplyBy","divideBy","upperCase","toUpperCase","lowerCase","toLowerCase","titleCase","txt","substr","parseLimitArgs","starting","limit","toRet","input","stripped","first","previous","size","src","pickEvery","startIndex","toArray","indexOfActualValue","newArgs","parseArgs","toCompare","trueVal","falseVal","valueToCompare","isAllowedLeading","_require","isString","isNumber","checkValMatch","validStandalone","validFirstChars","validLastChars","isValidFirstChar","isValidLastChar","validRemainingChars","areRemainingCharactersValid","char","parts","isNegative","floatMatcher","results","number","roundTo","digits","round","pow","getDigits","ceil","log","LN10","TXT","numberTXT","toString","decimalSet","iTXT","addDecimals","decimals","minDecimals","hasCommas","hasDecimals","iDec","iChar","toADD","getSuffix","formatTXT","fixesTXT","format","isNaN","entityCodeMapping","&euro;","&dollar;","&cent;","&pound;","&yen;","code","formats","abs","sign","leftOfDecimal","lastIndexOf","isShortFormat","leadingText","rightOfPrefix","shortFormatTest","shortFormatTestResult","valScale","floor","SUFFIX","valWithoutLeading","scales","limitDigits","subFormats","preffix","greaterThan","greaterThanEqual","equalsNumber","lessThan","lessThanEqual","toBool","not","ifTrue","ifFalse","valueToFilterBy","except","valueToReject","any","some","every","node","nodeManager","currentHandler","default","__WEBPACK_IMPORTED_MODULE_0__default_input_node__","__WEBPACK_IMPORTED_MODULE_1_config__","__WEBPACK_IMPORTED_MODULE_1_config___default","offAttr","offAttrVal","offVal","onAttrVal","onVal","has","extendView","protoProps","staticProps","constructor","Surrogate","__super__","View","defaultHandlers","handlersList","attributeMatcher","nodeMatcher","matchAttr","matchExpr","attrMatch","matchNode","nodeFilter","attributeManager","attrFilter","filtered","noopAttr","eventNameFromAttr","__WEBPACK_IMPORTED_MODULE_0_config__","defaultEventAttr","eventName","matching","preventDefault","listOfOperations","__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__","__WEBPACK_IMPORTED_MODULE_2__loop_attr_utils__","__WEBPACK_IMPORTED_MODULE_3_utils_animation__","__WEBPACK_IMPORTED_MODULE_4_lodash__","__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__","elAnimatedMap","foreachAttr","_aliasesFromTopics","stubbedTemplate","templateFn","$dummyEl","dataval","datakey","_$$extend","templateData","templated","templatedWithReferences","newNode","$newNode","append","isInitialAnim","$withAnimAttrs","children","empty","__WEBPACK_IMPORTED_MODULE_3_config__","__WEBPACK_IMPORTED_MODULE_4_utils_animation__","__WEBPACK_IMPORTED_MODULE_6__loop_attr_utils__","templateIdAttr","loopAttrHandler","nextUntil","remove","replaceWith","$dummyOldDiv","$removed","hasData","insertAfter","executeAndResolve","__WEBPACK_IMPORTED_MODULE_0__promise_utils__","debounceAndMerge","debounceInterval","argumentsReducers","mergeArgs","oldArgs","newArg","reducer","newVal","queue","timer","clearTimeout","mergedArgs","pop","deleteAddedClasses","addedClasses","elClassesMap","removeClass","classAttr","addClass","booleanAttrHandler","showifHandler","hide","show","hideifHandler","checkboxAttrHandler","settableValue","isChecked","inputBindAttr","toAliasMap","getNewContent","currentContents","__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__","__WEBPACK_IMPORTED_MODULE_3__bind_utils__","templatedHTML","__WEBPACK_IMPORTED_MODULE_1_utils_animation__","bindAttrHandler","bindTemplate","originalContents","translateDataToInsertable","translateDataToTemplatable","aliasMap","originalName","asMatch","AS_REGEX","extractAlias","defaultAttr","domManager","isEnabled","MutationObserver","observer","mutations","mutation","added","addedNodes","removed","removedNodes","attributeName","mutconfig","attributeFilter","childList","subtree","characterData","publicApi","enable","observe","disable","disconnect","defaultRouteHandlers","__WEBPACK_IMPORTED_MODULE_2__route_handlers__","routes","InterpolatableRoutableChannelManager","__WEBPACK_IMPORTED_MODULE_0__channel_manager__","__WEBPACK_IMPORTED_MODULE_1_channels_channel_router__","__WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__","_classCallCheck","instance","Constructor","TypeError","makeSubs","__WEBPACK_IMPORTED_MODULE_2_lodash__","cache","__WEBPACK_IMPORTED_MODULE_0_jquery___default","copy","callbackSubscriber","subscription","sentDataBySubsId","checkAndNotifyBatch","__WEBPACK_IMPORTED_MODULE_1__channel_utils__","matchingTopics","relevantDataFromPublish","cachedDataForSubs","cacheBySubsId","knownDataForSubs","checkAndNotify","needsThisTopic","isWildCard","getTopicsFromSubsList","subcriptionList","__WEBPACK_IMPORTED_MODULE_0_jquery__","_createClass","defineProperties","props","descriptor","publishResponses","cb","token","olderLength","remaining","jQuery","findBestHandler","matchOptions","thishandler","groupByHandlers","topicMapping","bestHandler","__WEBPACK_IMPORTED_MODULE_0_lodash___default","values","groupSequentiallyByHandlers","dataPt","lastHandler","normalizeSubscribeResponse","response","silencable","silentOptions","excludeReadOnly","readOnlyOptions","warn","__WEBPACK_IMPORTED_MODULE_0__json_route_handler__","__WEBPACK_IMPORTED_MODULE_1__epicenter_route_handlers__","__WEBPACK_IMPORTED_MODULE_2__dom_route_handler__","getOptions","EpicenterRouteHandler","channelManagerContext","runidHandlerOpts","runidHandler","__WEBPACK_IMPORTED_MODULE_2__runid_route_handler__","multiRunHandler","__WEBPACK_IMPORTED_MODULE_4__multi_run_route_handler__","__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__","__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__","runidRegex","exposable","runManagerOpts","runManager","scenarioManager","rm","hasEnoughInfo","isMultiplayer","strategy","__WEBPACK_IMPORTED_MODULE_0__default_run_route_handler__","RUN_PREFIX","__WEBPACK_IMPORTED_MODULE_3__world_route_handler__","WORLD_PREFIX","scenarioManagerOpts","sm","__WEBPACK_IMPORTED_MODULE_1__scenario_route_handler__","SCENARIO_PREFIX","epicenterRouter","__WEBPACK_IMPORTED_MODULE_7_channels_channel_router__","sampleRunidLength","RunManagerRouteHandler","rmOptions","manager","RunManager","$creationPromise","getRun","currentChannelOpts","currentRunChannel","__WEBPACK_IMPORTED_MODULE_0__run_route_handler__","__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__","runRouteHandler","__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__","runMangerRouter","__WEBPACK_IMPORTED_MODULE_2_channels_channel_router__","_window","RunMetaRouteHandler","$runServicePromise","mergeAndSend","runMeta","requestedTopics","runService","cachedValues","__WEBPACK_IMPORTED_MODULE_1_lodash__","loadPromise","load","toSave","__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__","save","res","mergeVariables","newval","RunVariablesRouteHandler","debouncedVariableQuery","debouncedFetchers","__WEBPACK_IMPORTED_MODULE_0_utils_general__","__WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__","knownTopics","variablesToFetch","__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__","unsubscribedTopics","isUnsubscribed","isRemaining","isAutoFetchEnabled","missingVariables","variableData","retriableFetch","query","catch","responseJSON","info","information","goodVariables","vName","baseName","names","RunOperationsRouteHandler","operationsResponse","serial","ScenarioManagerRouteHandler","ScenarioManager","baselinePromise","baseline","baselineOptions","currentRunPromise","runOptions","baselineHandler","currentRunHandler","scenarioManagerRouter","RunidRouteHandler","runid","__WEBPACK_IMPORTED_MODULE_0__run_router_factory__","knownRunIDServiceChannels","runChannel","WorldRoutesHandler","runPromise","world","err","getWorld","$worldProm","getChannelForWorld","worldid","worldChannelMap","channelManager","getWorldChannel","$runPromise","worldChannel","updateConfig","currentRunHandlerOpts","__WEBPACK_IMPORTED_MODULE_5__run_route_handler__","__WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__","__WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__","am","AuthManager","handlerOptions","getSession","getCurrentUserSessionInfo","getChannel","usersRouteHandler","__WEBPACK_IMPORTED_MODULE_0__world_users_route_handler__","MULTI_USER_PREFIX","usersHandler","currentUserRouteHandler","__WEBPACK_IMPORTED_MODULE_1__world_current_user_route_handler__","USER_PREFIX","currentUserHandler","ConsensusManager","consensusRouteHandler","__WEBPACK_IMPORTED_MODULE_2__consensus_route_handler__","CONSENSUS_PREFIX","consensusHandler","worldRouteHandler","__WEBPACK_IMPORTED_MODULE_6_channels_channel_router__","WorldUsersRouteHandler","_options$serviceOptio","store","users","mark","userid","isOnline","u","userId","parsedUsersPromise","session","lastName","isMe","presenceSubsId","userids","PRESENCE","user","ps","Presence","markOnline","markOffline","WorldCurrentUserRouteHandler","userFields","myUser","toNotify","field","ROLES","role","ConsensusRouteHandler","getConsensus","force","consensusProm","cm","getCurrent","opnHandler","__WEBPACK_IMPORTED_MODULE_0__consensus_operations_handler__","statusHandler","__WEBPACK_IMPORTED_MODULE_1__consensus_status_handler__","status","consensusManager","ConsensusOperationsHandler","actions","__WEBPACK_IMPORTED_MODULE_0__consensus_utils__","submitActions","ConsensusStatusHandler","normalizePlayers","rolePlayerMap","playersForRole","playersWithRole","player","userName","normalizeConsensus","submitted","amWaiting","pending","normalizedConsensus","dataForTopics","forceClose","MultiRunRouteHandler","extractFiltersFromTopic","topicString","_filter$split","_filter$split2","_slicedToArray","filters","include","runs","topicParamMap","debouncedFetch","subsMap","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","DOMRouteHandler","knownEls","domOptions","debouncedChangeHandler","__WEBPACK_IMPORTED_MODULE_1_lodash___default","elID","overrides","matchingEventOverride","changeEvent","__WEBPACK_IMPORTED_MODULE_0__interpolatable__","__WEBPACK_IMPORTED_MODULE_1__routable__","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","interpolatable","subsidMap","_ChannelManager","InterpolatedChannelManager","getPrototypeOf","__WEBPACK_IMPORTED_MODULE_0__subscribe_interpolator__","dependencySubsId","newDependentId","existing","__WEBPACK_IMPORTED_MODULE_1__publish_interpolator__","_get","receiver","desc","getOwnPropertyDescriptor","parent","getDependencies","deps","inner","__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__","interpolateWithDependencies","mergeInterpolatedTopicsWithData","originalTopics","interpolatedTopics","interpolatedTopic","original","subscribeInterpolator","subscribeFn","onDependencyChange","dependencies","dependenciesMeta","outerSubsId","actualData","actualMeta","toSendback","noop","publishInputs","valuesToInterpolate","ip","publishInterpolator","publishFunction","fetchFn","normalizedPublishInputs","resolvedDependencies","interpolated","allTopics","withRouter","BaseChannelManager","_BaseChannelManager","ChannelWithRouter","optsToPassOn","rt","_this2","_this3","__WEBPACK_IMPORTED_MODULE_0__channel_utils__","__WEBPACK_IMPORTED_MODULE_0__general__"],"mappings":"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","file":"flow.min.js","sourcesContent":["/*!\r\n * \r\n * ++++++++   ++++++++   ++++++++         Flow.js\r\n * ++++++++   ,+++++++~   ++++++++        v1.0.3\r\n *  ++++++++   ++++++++   ++++++++\r\n *  ~+++++++~   ++++++++   ++++++++       Github: https://github.com/forio/flow.js\r\n *   ++++++++   ++++++++   ++++++++:\r\n *    :++++++++   ++++++++   ++++++++\r\n *      ++++++++   =+++++++   ,+++++++=\r\n *       ++++++++   ++++++++   ++++++++\r\n *       =+++++++    +++++++=   ++++++++\r\n *        ++++++++   ++++++++   ++++++++\r\n *        ,+++++++:   +++++++~   ++++++++\r\n *         +++++++=   +++++++=   ++++++++\r\n *        ++++++++   ++++++++   ++++++++\r\n *        ++++++++   ++++++++   ++++++++\r\n *        ++++++++   =+++++++   :+++++++,\r\n *         ++++++++   ++++++++   ++++++++\r\n *         ++++++++   ~+++++++    +++++++=\r\n *          ++++++++   ++++++++   ++++++++\r\n * \r\n */\nvar Flow =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 17);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = _;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    prefix: 'f',\n    binderAttr: 'f-bind',\n\n    events: {\n        /** UI Change to publish to the channel. */\n        trigger: 'update.f.ui',\n\n        /** Trigger with payload '{attrToUpdate: value}', for e.g. { bind: 34 }. This will run this through all the converts and pass it to attr handler. Useful to by-pass getting this from the model directly.  */\n        convert: 'f.convert',\n\n        /** On a bind or other flow-related error  */\n        error: 'f.error'\n    },\n\n    attrs: {\n        checkboxOffValue: 'data-off-value',\n        //Used by repeat attr handler to keep track of template after first evaluation\n        repeat: {\n            templateId: 'repeat-template-id' //don't prefix by f or dom-manager unbind will kill it\n        }\n    },\n\n    errorAttr: 'data-flow-error',\n    animation: {\n        addAttr: 'data-add',\n        changeAttr: 'data-update',\n        initialAttr: 'data-initial'\n    }\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = stripSuffixDelimiter;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = mapWithPrefix;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = withPrefix;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = unprefixTopics;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = unprefix;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__silencable__ = __webpack_require__(56);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__silencable__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__exclude_read_only__ = __webpack_require__(57);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__exclude_read_only__[\"a\"]; });\nvar CHANNEL_DELIMITER = ':';\n\n\n\n\n/**\n * \n * @param {string} text\n * @returns {string}\n */\nfunction stripSuffixDelimiter(text) {\n    if (text && text.indexOf(CHANNEL_DELIMITER) === text.length - 1) {\n        text = text.replace(CHANNEL_DELIMITER, '');\n    }\n    return text;\n}\n\n/**\n * \n * @param {Publishable[]} dataArray \n * @param {string} prefix \n * @returns {Publishable[]} array with name prefixed\n */\nfunction mapWithPrefix(dataArray, prefix) {\n    if (!prefix) return dataArray;\n    return (dataArray || []).map(function (datapt) {\n        var name = (prefix + datapt.name).replace(/:$/, ''); //replace trailing delimiters\n        return $.extend(true, {}, datapt, { name: name });\n    });\n}\n\n/**\n * \n * @param {Function} callback \n * @param {string|string[]} prefixList\n * @returns {Function}\n */\nfunction withPrefix(callback, prefixList) {\n    var arr = [].concat(prefixList);\n\n    /**\n     * @param {Publishable[]} data\n     */\n    return function (data) {\n        arr.forEach(function (prefix) {\n            var mapped = mapWithPrefix(data, prefix);\n            callback(mapped);\n        });\n    };\n}\n\n/**\n * \n * @param {string[]} list \n * @param {string} prefix\n * @returns {string[]} Item with prefix removed\n */\nfunction unprefixTopics(list, prefix) {\n    if (!prefix) return list;\n    var unprefixed = list.map(function (item) {\n        return item.replace(prefix, '');\n    });\n    return unprefixed;\n}\n\n/**\n * \n * @param {Publishable[]} list \n * @param {string} prefix\n * @returns {Publishable[]} Item with prefix removed\n */\nfunction unprefix(list, prefix) {\n    if (!prefix) return list;\n    var unprefixed = list.map(function (item) {\n        if (item.name) {\n            return $.extend(true, {}, item, { name: item.name.replace(prefix, '') });\n        }\n        return item.replace(prefix, '');\n    });\n    return unprefixed;\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return toImplicitType; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return toPublishableFormat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return splitNameArgs; });\n/* eslint-disable complexity */\nfunction toImplicitType(data) {\n    var objRegex = /^(?:\\{.*\\})$/;\n    var arrRegex = /^(?:\\[.*])$/;\n\n    var converted = data;\n    if (typeof data === 'string') {\n        converted = data.trim();\n\n        if (converted === 'true') {\n            converted = true;\n        } else if (converted === 'false') {\n            converted = false;\n        } else if (converted === 'null') {\n            converted = null;\n        } else if (converted === 'undefined') {\n            converted = '';\n        } else if (converted.charAt(0) === '\\'' || converted.charAt(0) === '\"') {\n            converted = converted.substring(1, converted.length - 1);\n        } else if ($.isNumeric(converted)) {\n            converted = +converted;\n        } else if (arrRegex.test(converted)) {\n            var bracketReplaced = converted.replace(/[[\\]]/g, '');\n            if (!bracketReplaced) return [];\n            var parsed = bracketReplaced.split(/,(?![^[]*])/).map(function (val) {\n                return toImplicitType(val);\n            });\n            return parsed;\n        } else if (objRegex.test(converted)) {\n            try {\n                converted = JSON.parse(converted);\n            } catch (e) {\n                console.error('toImplicitType: couldn\\'t convert', converted);\n            }\n        }\n    }\n    return converted;\n}\n\nfunction splitUnescapedCommas(str) {\n    var regex = /(\\\\.|[^,])+/g;\n    var m = void 0;\n\n    var op = [];\n    while ((m = regex.exec(str)) !== null) {\n        //eslint-disable-line\n        // This is necessary to avoid infinite loops with zero-width matches\n        if (m.index === regex.lastIndex) {\n            regex.lastIndex++;\n        }\n        m.forEach(function (match, groupIndex) {\n            if (groupIndex === 0) {\n                op.push(match.replace('\\\\', ''));\n            }\n        });\n    }\n    return op;\n}\n\nfunction splitNameArgs(value) {\n    value = value.trim();\n    var fnName = value.split('(')[0];\n    var params = value.substring(value.indexOf('(') + 1, value.indexOf(')'));\n    var args = splitUnescapedCommas(params).map(function (p) {\n        return p.trim();\n    });\n    return { name: fnName, args: args };\n}\n\n/**\n * @param  {string} value\n * @returns {{ name: string, value: any}[]}       [description]\n */\nfunction toPublishableFormat(value) {\n    var OPERATIONS_SEPERATOR = '&&';\n    var split = (value || '').split(OPERATIONS_SEPERATOR);\n    var listOfOperations = split.map(function (value) {\n        if (value && value.indexOf('=') !== -1) {\n            var _split = value.split('=');\n            return { name: _split[0].trim(), value: _split[1].trim() };\n        }\n        var parsed = splitNameArgs(value);\n        return { name: parsed.name, value: parsed.args };\n    });\n    return listOfOperations;\n}\n\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = objectToPublishable;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = publishableToObject;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = normalizeParamOptions;\n/**\n * \n * @param {Object} obj\n * @returns {Publishable[]}\n */\nfunction objectToPublishable(obj) {\n    var mapped = Object.keys(obj || {}).map(function (t) {\n        return { name: t, value: obj[t] };\n    });\n    return mapped;\n}\n\n/**\n * Converts arrays of the form [{ name: '', value: ''}] to {[name]: value}\n * @param {Publishable[]} arr\n * @param {Object} [mergeWith]\n * @returns {Object}\n */\nfunction publishableToObject(arr, mergeWith) {\n    var result = (arr || []).reduce(function (accum, topic) {\n        accum[topic.name] = topic.value;\n        return accum;\n    }, $.extend(true, {}, mergeWith));\n    return result;\n}\n\n/**\n * @typedef NormalizedParam\n * @property {Publishable[]} params\n * @property {Object} options\n */\n\n/**\n *\n * @param {string|Object|Array} topic \n * @param {*} publishValue \n * @param {Object} [options]\n * @returns {NormalizedParam}\n */\nfunction normalizeParamOptions(topic, publishValue, options) {\n    if (!topic) {\n        return { params: [], options: {} };\n    }\n    if ($.isPlainObject(topic)) {\n        return { params: objectToPublishable(topic), options: publishValue };\n    }\n    if (Array.isArray(topic)) {\n        return { params: topic, options: publishValue };\n    }\n    return { params: [{ name: topic, value: publishValue }], options: options };\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export notifySubscribeHandlers */\n/* unused harmony export notifyUnsubscribeHandlers */\n/* unused harmony export passthroughPublishInterceptors */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = router;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_utils_general__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n\n\n\n\n\n/**\n * Handle subscriptions\n * @param  {Handler[]} handlers Array of the form [{ match: function (){}, }]\n * @param  {Array<string>} topics   Array of strings\n * @param  {SubscribeOptions} [options]\n * @returns {Promise<Publishable[]>} Returns populated topics if available\n */\nfunction notifySubscribeHandlers(handlers, topics, options) {\n    var grouped = Object(__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__[\"a\" /* groupByHandlers */])(topics, handlers);\n    var promises = [];\n    grouped.filter(function (handler) {\n        return handler.subscribeHandler;\n    }).forEach(function (handler) {\n        var mergedOptions = $.extend(true, {}, handler.options, options);\n        var unprefixed = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"f\" /* unprefixTopics */])(handler.data, handler.matched);\n        var promise = Object(__WEBPACK_IMPORTED_MODULE_2_utils_general__[\"b\" /* makePromise */])(function () {\n            var subsResponse = handler.subscribeHandler(unprefixed, mergedOptions, handler.matched);\n            return subsResponse;\n        }).then(function (topicsWithData) {\n            var normalized = Object(__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__[\"c\" /* normalizeSubscribeResponse */])(topicsWithData, unprefixed);\n            var prefixed = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"b\" /* mapWithPrefix */])(normalized, handler.matched);\n            return prefixed;\n        });\n        promises.push(promise);\n    });\n    return $.when.apply(null, promises).then(function () {\n        var arr = [].concat.apply([], arguments);\n        return arr;\n    });\n}\n\n/**\n * \n * @param {Handler[]} handlers \n * @param {Array<string>} recentlyUnsubscribedTopics\n * @param {Array<string>} remainingTopics \n */\nfunction notifyUnsubscribeHandlers(handlers, recentlyUnsubscribedTopics, remainingTopics) {\n    handlers = handlers.map(function (h, index) {\n        h.unsubsKey = index;\n        return h;\n    });\n\n    var unsubsGrouped = Object(__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__[\"a\" /* groupByHandlers */])(recentlyUnsubscribedTopics, handlers);\n    var remainingGrouped = Object(__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__[\"a\" /* groupByHandlers */])(remainingTopics, handlers);\n\n    unsubsGrouped.filter(function (h) {\n        return h.unsubscribeHandler;\n    }).forEach(function (handler) {\n        var unprefixedUnsubs = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"f\" /* unprefixTopics */])(handler.data, handler.matched);\n        var matchingRemainingHandler = __WEBPACK_IMPORTED_MODULE_3_lodash___default.a.find(remainingGrouped, function (remainingHandler) {\n            return remainingHandler.unsubsKey === handler.unsubsKey;\n        });\n        var matchingTopicsRemaining = matchingRemainingHandler ? matchingRemainingHandler.data : [];\n        var unprefixedRemaining = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"f\" /* unprefixTopics */])(matchingTopicsRemaining || [], handler.matched);\n        handler.unsubscribeHandler(unprefixedUnsubs, unprefixedRemaining);\n    });\n}\n/**\n * \n * @param {Handler[]} handlers \n * @param {Publishable[]} publishData \n * @param {PublishOptions} [options]\n * @returns {Promise}\n */\nfunction passthroughPublishInterceptors(handlers, publishData, options) {\n    var grouped = Object(__WEBPACK_IMPORTED_MODULE_0__utils_handler_utils__[\"b\" /* groupSequentiallyByHandlers */])(publishData, handlers);\n    var $initialProm = $.Deferred().resolve([]).promise();\n    grouped.forEach(function (handler) {\n        $initialProm = $initialProm.then(function (dataSoFar) {\n            var mergedOptions = $.extend(true, {}, handler.options, options);\n            var unprefixed = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"e\" /* unprefix */])(handler.data, handler.matched);\n\n            var publishableData = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* excludeReadOnly */])(unprefixed, mergedOptions.readOnly);\n            if (!publishableData.length) {\n                return dataSoFar;\n            }\n\n            var result = handler.publishHandler ? handler.publishHandler(publishableData, mergedOptions, handler.matched) : publishableData;\n            var publishProm = $.Deferred().resolve(result).promise();\n            return publishProm.then(function (published) {\n                return Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"c\" /* silencable */])(published, mergedOptions.silent);\n            }).then(function (published) {\n                var mapped = Object(__WEBPACK_IMPORTED_MODULE_1__utils__[\"b\" /* mapWithPrefix */])(published, handler.matched);\n                if (handler.isDefault && handler.matched) {\n                    mapped = mapped.concat(published);\n                }\n                return mapped;\n            }).then(function (mapped) {\n                return [].concat(dataSoFar, mapped);\n            });\n        });\n    });\n    return $initialProm;\n}\n\n/**\n * Router\n * @param  {Handler[]} handlers\n * @param {Object} [options]\n * @param {Function} [notifier]\n * @returns {Router}\n */\nfunction router(handlers, options, notifier) {\n    var _this = this;\n\n    var myHandlers = (handlers || []).map(function (Handler) {\n        var handler = Handler;\n        if (__WEBPACK_IMPORTED_MODULE_3_lodash___default.a.isFunction(Handler)) {\n            handler = new Handler(options, notifier);\n            $.extend(_this, handler.expose);\n        }\n        if (typeof handler.match === 'string') {\n            var matchString = handler.match;\n            handler.name = matchString;\n            handler.match = function (t) {\n                return t === matchString ? '' : false;\n            };\n        }\n        return handler;\n    });\n\n    var expose = myHandlers.reduce(function (accum, h) {\n        $.extend(true, accum, h.expose);\n        return accum;\n    }, {});\n\n    return {\n        expose: expose,\n        match: function (topic) {\n            return myHandlers.reduce(function (match, handler) {\n                var matched = handler.match(topic);\n                if (match === false && matched !== false) {\n                    return '';\n                }\n                return match;\n            }, false);\n        },\n\n        /**\n         * @param {Array<string>} topics\n         * @param {SubscribeOptions} [options]\n         * @returns {Promise<Publishable[]>} Returns populated topics if available\n         */\n        subscribeHandler: function (topics, options) {\n            return notifySubscribeHandlers(myHandlers, topics, options);\n        },\n        /**\n         * @param {Array<string>} recentlyUnsubscribedTopics\n         * @param {Array<string>} remainingTopics\n         * @returns {void}\n         */\n        unsubscribeHandler: function (recentlyUnsubscribedTopics, remainingTopics) {\n            return notifyUnsubscribeHandlers(myHandlers, recentlyUnsubscribedTopics, remainingTopics);\n        },\n\n        /**\n         * @param {Publishable[]} data\n         * @param {PublishOptions} [options]\n         * @returns {Promise}\n         */\n        publishHandler: function (data, options) {\n            return passthroughPublishInterceptors(myHandlers, data, options);\n        },\n\n        addRoute: function (handler) {\n            if (!handler || !handler.match) {\n                throw Error('Handler does not have a valid `match` property');\n            }\n            handler.id = __WEBPACK_IMPORTED_MODULE_3_lodash___default.a.uniqueId('routehandler-');\n            myHandlers.unshift(handler);\n            return handler.id;\n        },\n        removeRoute: function (routeid) {\n            myHandlers = myHandlers.filter(function (handler) {\n                return handler.id !== routeid;\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = matchPrefix;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = matchDefaultPrefix;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = matchRegex;\nvar ROUTE_DELIMITER = ':';\n\n/**\n * \n * @param {string} prefix\n * @returns {matchFunction}\n */\nfunction matchPrefix(prefix) {\n    return function prefixMatcher(topic) {\n        var hasPrefix = topic.indexOf(prefix) === 0;\n        if (hasPrefix) return prefix;\n\n        var isOnlyPrefix = prefix.replace(/:/g, '') === topic;\n        if (isOnlyPrefix) return topic;\n\n        return false;\n    };\n}\n\n/**\n* \n* @param {string} prefix\n* @returns {matchFunction}\n*/\nfunction matchDefaultPrefix(prefix) {\n    return function defaultPrefixMatcher(topic, forcePrefix) {\n        var hasPrefix = topic.indexOf(prefix) === 0;\n        return hasPrefix || forcePrefix ? prefix : '';\n    };\n}\n\n/**\n * \n * @param {string} regex\n * @returns {matchFunction}\n */\nfunction matchRegex(regex) {\n    var toMatch = new RegExp('^' + regex + ROUTE_DELIMITER);\n    return function regexMatcher(topic) {\n        var match = topic.match(toMatch);\n        if (match && match.length) {\n            return match[0];\n        }\n        return false;\n    };\n}\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = random;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__promise_utils__ = __webpack_require__(14);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__promise_utils__[\"a\"]; });\n/* unused harmony reexport promisify */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__debounce_and_merge__ = __webpack_require__(41);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_2__debounce_and_merge__[\"a\"]; });\n\n\n\n\n\nfunction random(prefix, min, max) {\n    if (!min) {\n        min = parseInt(Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"uniqueId\"])(), 10);\n    }\n    if (!max) {\n        max = 100000; //eslint-disable-line no-magic-numbers\n    }\n    var rnd = Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"random\"])(min, max, false) + '';\n    if (prefix) {\n        rnd = prefix + rnd;\n    }\n    return rnd;\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export VARIABLES_PREFIX */\n/* unused harmony export META_PREFIX */\n/* unused harmony export OPERATIONS_PREFIX */\n/* unused harmony export _shouldFetch */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = GenericRunRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__run_meta_route_handler__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__run_variables_route_handler__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__run_operations_route_handler__ = __webpack_require__(65);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_channels_channel_router__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_channels_channel_utils__ = __webpack_require__(4);\n\n\n\n\n\n\n\n\n\n\n\nvar VARIABLES_PREFIX = 'variables:';\nvar META_PREFIX = 'meta:';\nvar OPERATIONS_PREFIX = 'operations:';\n\n/**\n * \n * @param {Publishable[]} result \n * @param {string[]} ignoreOperations \n * @returns {boolean}\n */\nfunction _shouldFetch(result, ignoreOperations) {\n    var filtered = (result || []).filter(function (r) {\n        var name = r.name || '';\n        var isIgnored = (ignoreOperations || []).indexOf(name.replace(OPERATIONS_PREFIX, '')) !== -1;\n        var isVariable = name.indexOf(VARIABLES_PREFIX) === 0;\n        var isOperation = name.indexOf(OPERATIONS_PREFIX) === 0;\n\n        return isVariable || isOperation && !isIgnored;\n    });\n    return filtered.length > 0;\n}\n\nvar RunService = F.service.Run;\nfunction GenericRunRouteHandler(config, notifier) {\n    var _this = this;\n\n    var defaults = {\n        serviceOptions: {},\n        channelOptions: {\n            variables: {\n                autoFetch: true,\n                debounce: 200,\n                silent: false,\n                readOnly: false\n            },\n            operations: {\n                readOnly: false,\n                silent: false\n            },\n            meta: {\n                silent: false,\n                autoFetch: true,\n                readOnly: ['id', 'created', 'account', 'project', 'model', 'lastModified']\n            }\n        }\n    };\n    var opts = $.extend(true, {}, defaults, config);\n\n    var serviceOptions = __WEBPACK_IMPORTED_MODULE_6_lodash___default.a.result(opts, 'serviceOptions');\n\n    var $initialProm = null;\n    if (serviceOptions instanceof RunService) {\n        $initialProm = $.Deferred().resolve(serviceOptions).promise();\n    } else if (serviceOptions.then) {\n        $initialProm = serviceOptions;\n    } else {\n        var rs = new RunService(serviceOptions);\n        $initialProm = $.Deferred().resolve(rs).promise();\n    }\n\n    var operationNotifier = Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, OPERATIONS_PREFIX);\n    var variableNotifier = Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [VARIABLES_PREFIX, '']);\n\n    var metaHandler = new __WEBPACK_IMPORTED_MODULE_0__run_meta_route_handler__[\"a\" /* default */]($initialProm, Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, META_PREFIX));\n    var operationsHandler = new __WEBPACK_IMPORTED_MODULE_2__run_operations_route_handler__[\"a\" /* default */]($initialProm, operationNotifier);\n    var variablesHandler = new __WEBPACK_IMPORTED_MODULE_1__run_variables_route_handler__[\"a\" /* default */]($initialProm, variableNotifier);\n\n    var subscribed = false;\n    var channelOptions = opts.channelOptions;\n    $initialProm.then(function (rs) {\n        if (rs.channel && !subscribed) {\n            subscribed = true;\n            var TOPICS = rs.channel.TOPICS;\n\n            var subscribeOpts = { includeMine: false };\n            //TODO: Provide subscription fn to individual channels and let them handle it?\n            rs.channel.subscribe(TOPICS.RUN_VARIABLES, function (data, meta) {\n                var publishable = Object(__WEBPACK_IMPORTED_MODULE_7_channels_channel_utils__[\"b\" /* objectToPublishable */])(data);\n                var excludingSilenced = Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"c\" /* silencable */])(publishable, channelOptions.variables.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                variablesHandler.notify(excludingSilenced, meta);\n                variablesHandler.fetch(); //Variables channel #notify also does a fetch, but this is not supposed to know about that. Debouncing will take care of duplicate fetches anyway.\n            }, _this, subscribeOpts);\n            rs.channel.subscribe(TOPICS.RUN_OPERATIONS, function (data, meta) {\n                var publishable = [{ name: data.name, value: data.result }];\n                var excludingSilenced = Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"c\" /* silencable */])(publishable, channelOptions.operations.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                operationsHandler.notify(excludingSilenced, meta);\n                variablesHandler.fetch();\n            }, _this, subscribeOpts);\n            rs.channel.subscribe(TOPICS.CONSENSUS_UPDATE, function (consensus, meta) {\n                if (consensus.closed) {\n                    variablesHandler.fetch();\n                    // I should also do operationsHandler.notify but I don't know what to notify them about\n                    //Just remove the 'include Mine' check for operations? That's just cached anyway\n                }\n            }, _this, { includeMine: true });\n            rs.channel.subscribe(TOPICS.RUN_RESET, function (data, meta) {\n                var publishable = [{ name: 'reset', value: data }];\n                var excludingSilenced = Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"c\" /* silencable */])(publishable, channelOptions.operations.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                operationsHandler.notify(excludingSilenced, meta);\n            }, _this, subscribeOpts);\n\n            // rs.channel.subscribe('', (data, meta)=> {\n            //     console.log('everything', data, meta);\n            // });\n        }\n    });\n\n    var handlers = [$.extend({}, metaHandler, {\n        name: 'meta',\n        match: Object(__WEBPACK_IMPORTED_MODULE_5_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(META_PREFIX),\n        options: opts.channelOptions.meta\n    }), $.extend({}, operationsHandler, {\n        name: 'operations',\n        match: Object(__WEBPACK_IMPORTED_MODULE_5_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(OPERATIONS_PREFIX),\n        options: opts.channelOptions.operations\n    }), $.extend({}, variablesHandler, {\n        isDefault: true,\n        name: 'variables',\n        match: Object(__WEBPACK_IMPORTED_MODULE_5_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(VARIABLES_PREFIX),\n        options: opts.channelOptions.variables\n    })];\n\n    // router.addRoute(prefix('meta:'), metaChannel, opts.channelOptions.meta);\n\n    var runRouter = Object(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router__[\"a\" /* default */])(handlers);\n    var oldhandler = runRouter.publishHandler;\n    runRouter.publishHandler = function (publishable) {\n        var prom = oldhandler.apply(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router__[\"a\" /* default */], arguments);\n        return prom.then(function (result) {\n            //all the silencing will be taken care of by the router\n            var shouldFetch = _shouldFetch(result, ['reset']);\n            if (shouldFetch) {\n                var excludeFromFetch = result.map(function (r) {\n                    return r.name;\n                }); //This was just published, no need to get the value again\n                variablesHandler.fetch({ exclude: excludeFromFetch });\n            }\n            return result;\n        });\n    };\n    return runRouter;\n}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export _findMostConsequtive */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = addChangeClassesToList;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = addContentAndAnimate;\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _findMostConsequtive(arr, match) {\n    var reduced = arr.reduce(function (accum, val) {\n        if (val === match) {\n            if (accum.prev === match) {\n                accum.count = accum.count + 1;\n            } else {\n                accum.count = 1;\n            }\n        }\n        accum.maxCount = Math.max(accum.maxCount, accum.count);\n        accum.prev = val;\n        return accum;\n    }, { prev: null, count: 0, maxCount: 0 });\n    return reduced.maxCount;\n}\n\nfunction buildDiffArray(currentcontents, newContents) {\n    return newContents.map(function (contents, index) {\n        var isSame = contents === currentcontents[index];\n        return isSame;\n    });\n}\n\nfunction fill(count, val) {\n    var a = [];\n    for (var i = 0; i < count; i++) {\n        a.push(val);\n    }\n    return a;\n}\n\nfunction elToContents(el) {\n    //ignore data attributes for comparison\n    return el.outerHTML.replace(/\\s?data-[a-zA-Z]*=['\"][a-zA-Z0-9]*['\"]/g, '').replace(/\\s\\s/g, ' ').trim();\n}\n\nfunction elementsToContents($els) {\n    return $els.map(function (index, child) {\n        return elToContents(child);\n    }).get();\n}\n\nvar defaults = {\n    addAttr: 'data-add',\n    changeAttr: 'data-update',\n    initialAttr: 'data-initial'\n};\n\n/**\n * Compares 2 lists and Adds add or update classes\n * @param {JQuery<HTMLElement>} $currentEls existing elements\n * @param {JQuery<HTMLElement>} $newEls   new elements\n * @param {boolean} isInitial check if this is initial data or it's updating\n * @param {{ addAttr: string, changeAttr: string}} [options]\n * @returns {JQuery<HTMLElement>} elements with updated attributes\n */\nfunction addChangeClassesToList($currentEls, $newEls, isInitial, options) {\n    var opts = $.extend({}, defaults, options);\n\n    var currentcontents = elementsToContents($currentEls);\n    var newContents = elementsToContents($newEls);\n    var reversedContents = currentcontents;\n\n    //Guess if data was added to end or beginning of array\n    var diffFromEnd = buildDiffArray(currentcontents, newContents);\n    var diffFromBeginning = buildDiffArray(reversedContents.slice().reverse(), newContents.slice().reverse());\n\n    var endMatches = _findMostConsequtive(diffFromEnd, true);\n    var beginningMatches = _findMostConsequtive(diffFromBeginning, true);\n\n    var placeHoldersCount = newContents.length - currentcontents.length;\n    var placeHolders = fill(placeHoldersCount, undefined);\n\n    if (beginningMatches <= endMatches) {\n        currentcontents = currentcontents.concat(placeHolders);\n    } else {\n        currentcontents = placeHolders.concat(currentcontents);\n    }\n\n    for (var i = 0; i < newContents.length; i++) {\n        var $el = $newEls.eq(i);\n        var curr = currentcontents[i];\n        $el.removeAttr(opts.initialAttr);\n\n        var contents = elToContents($el.get(0));\n        if (curr === undefined) {\n            var _$el$attr;\n\n            $el.attr((_$el$attr = {}, _defineProperty(_$el$attr, opts.addAttr, true), _defineProperty(_$el$attr, opts.initialAttr, isInitial || null), _$el$attr));\n            $el.removeAttr(opts.changeAttr);\n        } else if (curr !== contents) {\n            var _$el$attr2;\n\n            $el.attr((_$el$attr2 = {}, _defineProperty(_$el$attr2, opts.changeAttr, true), _defineProperty(_$el$attr2, opts.initialAttr, isInitial || null), _$el$attr2));\n            $el.removeAttr(opts.addAttr);\n        } else {\n            $el.removeAttr(opts.addAttr + ' ' + opts.changeAttr);\n        }\n    }\n\n    return $newEls;\n}\n\nfunction addContentAndAnimate($el, newValue, isInitial, options) {\n    var opts = $.extend({}, defaults, options);\n    var current = $el.html().trim();\n\n    $el.removeAttr(opts.changeAttr + ' ' + opts.initialAttr);\n    if (current === ('' + newValue).trim()) {\n        return $el;\n    }\n\n    $el.html(newValue);\n    setTimeout(function () {\n        var _$el$attr3;\n\n        $el.attr((_$el$attr3 = {}, _defineProperty(_$el$attr3, opts.changeAttr, true), _defineProperty(_$el$attr3, opts.initialAttr, isInitial || null), _$el$attr3));\n    }, 0); //need this to trigger animation\n}\n\n/***/ }),\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getKnownDataForEl;\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = updateKnownDataForEl;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = removeKnownData;\n/* unused harmony export getTemplateTags */\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = isTemplated;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = findMissingReferences;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = stubMissingReferences;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = addBackMissingReferences;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = getOriginalContents;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = clearOriginalContents;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\nvar CURRENT_INDEX_KEY = 'current-index';\nvar CURRENT_INDEX_ATTR = 'data-' + CURRENT_INDEX_KEY;\n\nfunction getKnownDataForEl($el) {\n    var closestKnownDataEl = $el.closest('[' + CURRENT_INDEX_ATTR + ']');\n    var knownData = {};\n    if (closestKnownDataEl.length) {\n        knownData = closestKnownDataEl.data(CURRENT_INDEX_KEY);\n    }\n    return knownData;\n}\nfunction updateKnownDataForEl($el, data) {\n    $el.attr(CURRENT_INDEX_ATTR, JSON.stringify(data));\n}\nfunction removeKnownData($el) {\n    $el.removeAttr(CURRENT_INDEX_ATTR);\n}\n\nfunction getTemplateTags(template) {\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n    var templateTagsUsed = template.match(/<%[=-]?([\\s\\S]+?)%>/g);\n    return templateTagsUsed || [];\n}\nfunction isTemplated(template) {\n    return getTemplateTags(template).length > 0;\n}\n\nfunction findMissingReferences(template, knownDataKeys) {\n    function isKnownTag(tag, knownTags) {\n        var match = knownDataKeys.find(function (key) {\n            var regex = new RegExp('\\\\b' + key + '\\\\b');\n            return regex.test(tag);\n        });\n        return match;\n    }\n\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n    var missingReferences = {};\n    var templateTagsUsed = getTemplateTags(template);\n    if (templateTagsUsed) {\n        templateTagsUsed.forEach(function (tag) {\n            if (tag.match(/\\w+/) && !isKnownTag(tag, knownDataKeys)) {\n                var refKey = missingReferences[tag];\n                if (!refKey) {\n                    refKey = Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"uniqueId\"])('no-ref');\n                    missingReferences[tag] = refKey;\n                }\n            }\n        });\n    }\n    return missingReferences;\n}\n\nfunction refToMarkup(refKey) {\n    return '<!--' + refKey + '-->';\n}\n\nfunction stubMissingReferences(template, missingReferences) {\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n\n    Object.keys(missingReferences).forEach(function (tag) {\n        var refId = missingReferences[tag];\n        var r = new RegExp(tag, 'g');\n        template = template.replace(r, refToMarkup(refId));\n    });\n    return template;\n}\n\nfunction addBackMissingReferences(template, missingReferences) {\n    Object.keys(missingReferences).forEach(function (originalTemplateVal) {\n        var commentRef = missingReferences[originalTemplateVal];\n        var r = new RegExp(refToMarkup(commentRef), 'g');\n        template = template.replace(r, originalTemplateVal);\n    });\n\n    return template;\n}\n\nvar elTemplateMap = new WeakMap();\nfunction getOriginalContents($el, resolver) {\n    var el = $el.get(0);\n    var originalHTML = elTemplateMap.get(el);\n    if (!originalHTML && resolver) {\n        originalHTML = resolver($el).replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n        elTemplateMap.set(el, originalHTML);\n    }\n    return originalHTML;\n}\nfunction clearOriginalContents($el) {\n    var el = $el.get(0);\n    elTemplateMap.delete(el);\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__default_node__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__default_node___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__default_node__);\n/*eslint no-undef: 0*/\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_1__default_node___default.a.extend({\n    propertyHandlers: [],\n\n    uiChangeEvent: 'change.f-node-event',\n    getUIValue: function () {\n        return this.$el.val();\n    },\n\n    removeEvents: function () {\n        this.$el.off(this.uiChangeEvent);\n    },\n\n    initialize: function (options) {\n        var propName = this.$el.data(__WEBPACK_IMPORTED_MODULE_0__config__[\"binderAttr\"]);\n        if (options && options.triggerChangeOn) {\n            this.uiChangeEvent = options.triggerChangeOn;\n        }\n        if (propName) {\n            var changeHandler = function () {\n                var val = this.getUIValue();\n                var payload = [{ name: propName, value: val }];\n\n                this.$el.trigger(__WEBPACK_IMPORTED_MODULE_0__config__[\"events\"].trigger, { data: payload, source: 'bind', restoreOriginal: val.length === 0 });\n            }.bind(this);\n\n            var handlerDebounceTime = 200;\n            var debouncedHandler = _.debounce(changeHandler, handlerDebounceTime);\n            var handler = this.uiChangeEvent.indexOf('key') !== -1 ? debouncedHandler : changeHandler;\n            this.$el.off(this.uiChangeEvent).on(this.uiChangeEvent, handler);\n        }\n        __WEBPACK_IMPORTED_MODULE_1__default_node___default.a.prototype.initialize.apply(this, arguments);\n    }\n}, { selector: 'input, select, textarea' }));\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar BaseView = __webpack_require__(35);\n\nmodule.exports = BaseView.extend({\n    propertyHandlers: [],\n\n    initialize: function () {}\n}, { selector: '*' });\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export extractVariableName */\n/* unused harmony export parseKeyAlias */\n/* unused harmony export parseValueAlias */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = aliasesFromTopics;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = parseTopics;\nvar IN_OF_REGEX = /\\((.*)\\) (?:in|of)\\s+(.*)/;\nvar KEY_VALUE_REGEX = /(.*),(.*)/;\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nfunction extractVariableName(attrVal) {\n    var inMatch = attrVal.trim().match(IN_OF_REGEX);\n    var varName = inMatch ? inMatch[2] : attrVal;\n    return varName.trim();\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nfunction parseKeyAlias(attrVal) {\n    var inMatch = attrVal.match(IN_OF_REGEX);\n    if (!inMatch) {\n        return undefined;\n    }\n    var itMatch = inMatch[1].match(KEY_VALUE_REGEX);\n    var alias = itMatch ? itMatch[1].trim() : undefined;\n    return alias;\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nfunction parseValueAlias(attrVal) {\n    var inMatch = attrVal.match(IN_OF_REGEX);\n    if (!inMatch) {\n        return undefined;\n    }\n    var itMatch = inMatch[1].match(KEY_VALUE_REGEX);\n    var alias = itMatch ? itMatch[2] : inMatch[1];\n    return alias.trim();\n}\n\n//Public exports\n\nfunction aliasesFromTopics(topics, value) {\n    var relevantTopic = topics[0]; //doesn't support multiple topics\n\n    var defaultKey = $.isPlainObject(value) ? 'key' : 'index';\n    var keyAlias = relevantTopic.keyAlias || defaultKey;\n    var valueAlias = relevantTopic.valueAlias || 'value';\n\n    return { keyAlias: keyAlias, valueAlias: valueAlias };\n}\nfunction parseTopics(topics) {\n    var attrVal = topics[0].name; //doesn't support multiple topics\n    return [{\n        name: extractVariableName(attrVal),\n        keyAlias: parseKeyAlias(attrVal),\n        valueAlias: parseValueAlias(attrVal)\n    }];\n}\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = makePromise;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = promisify;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\n/**\n * @param {any} val \n * @returns {Promise}\n */\nfunction makePromise(val) {\n    //Can be replaced with Promise.resolve when we drop IE11;\n    // if (isFunction(val)) {\n    //     return Promise.resolve(val());\n    // }\n    // return Promise.resolve(val);\n    if (val && val.then) {\n        return val;\n    }\n    var $def = $.Deferred();\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(val)) {\n        try {\n            var toReturn = val();\n            if (toReturn && toReturn.then) {\n                return toReturn.then(function (r) {\n                    return $def.resolve(r);\n                }, function (e) {\n                    return $def.reject(e);\n                });\n            }\n            $def.resolve(toReturn);\n        } catch (e) {\n            $def.reject(e);\n        }\n    } else {\n        $def.resolve(val);\n    }\n    return $def.promise();\n}\n\n/**\n * \n * @param {function(*)} fn \n * @returns {function(...any): Promise}\n */\nfunction promisify(fn) {\n    if (!Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(fn)) {\n        throw new Error('Promisify requires a function, received ' + typeof fn);\n    }\n    /**\n     * @param {...*} args \n     * @returns {Promise}\n     */\n    return function promisifiedFunction(args) {\n        var $def = $.Deferred();\n        try {\n            var toReturn = fn.apply(fn, arguments);\n            if (toReturn && toReturn.then) {\n                return toReturn.then(function (r) {\n                    return $def.resolve(r);\n                }, function (e) {\n                    return $def.reject(e);\n                });\n            } else {\n                $def.resolve(toReturn);\n            }\n        } catch (e) {\n            $def.reject(e);\n        }\n        return $def.promise();\n    };\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = makeConsensusService;\nfunction makeConsensusService(consensisAPIResponse) {\n    return new window.F.service.Consensus({\n        name: consensisAPIResponse.stage,\n        consensusGroup: consensisAPIResponse.name,\n        worldId: consensisAPIResponse.worldId\n    });\n}\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = extractDependencies;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = interpolateWithValues;\nvar interpolationRegex = /<(.*?)>/g;\n/**\n *  \n * @param {string} topic topic to extract dependencies from\n * @returns {string[]} dependencies\n */\nfunction extractDependencies(topic) {\n    var deps = (topic.match(interpolationRegex) || []).map(function (val) {\n        return val.substring(1, val.length - 1);\n    });\n    return deps;\n}\n\n/**\n * @param {string} topic topic with dependencies\n * @param {{string: any}} data object with values of dependencies\n * @returns {string} interpolated string\n */\nfunction interpolateWithValues(topic, data) {\n    var interpolatedTopic = topic.replace(interpolationRegex, function (match, dependency) {\n        var val = data[dependency];\n        var toReplace = Array.isArray(val) ? val[val.length - 1] : val;\n        return toReplace;\n    });\n    return interpolatedTopic;\n}\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_configured_channel_manager__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils__ = __webpack_require__(82);\n\n\n\n\n\n\n\nvar Flow = {\n    dom: __WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__[\"a\" /* default */],\n    utils: __WEBPACK_IMPORTED_MODULE_3__utils__,\n    initialize: function (config) {\n        var model = $('body').data('f-model');\n        var defaults = {\n            channel: {\n                //FIXME: Defaults can't be here..\n                defaults: {\n                    run: {\n                        model: model\n                    }\n                }\n            },\n            dom: {\n                root: 'body',\n                autoBind: true\n            }\n        };\n\n        var options = $.extend(true, {}, defaults, config);\n\n        if (config && config.channel && config.channel instanceof __WEBPACK_IMPORTED_MODULE_1_channels_configured_channel_manager__[\"a\" /* default */]) {\n            this.channel = config.channel;\n        } else {\n            this.channel = new __WEBPACK_IMPORTED_MODULE_1_channels_configured_channel_manager__[\"a\" /* default */](options.channel);\n        }\n\n        var prom = __WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__[\"a\" /* default */].initialize($.extend(true, {\n            channel: this.channel\n        }, options.dom));\n\n        this.channel.subscribe('operations:reset', function () {\n            __WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__[\"a\" /* default */].unbindAll();\n            __WEBPACK_IMPORTED_MODULE_0__dom_dom_manager__[\"a\" /* default */].bindAll();\n        });\n\n        return prom;\n    }\n};\nFlow.ChannelManager = __WEBPACK_IMPORTED_MODULE_1_channels_configured_channel_manager__[\"a\" /* default */];\nFlow.constants = __WEBPACK_IMPORTED_MODULE_2_config___default.a;\n//set by grunt\nif (true) Flow.version = \"1.0.3\"; //eslint-disable-line no-undef\n/* harmony default export */ __webpack_exports__[\"default\"] = (Flow);\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dom_manager_utils_dom_channel_prefix_helpers__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_utils_parse_utils__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__converter_manager__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__node_manager__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__attribute_manager__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__plugins_auto_update_bindings__ = __webpack_require__(51);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ((function () {\n    //Jquery selector to return everything which has a f- property set\n    $.expr.pseudos[__WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"]] = function (el) {\n        if (!el || !el.attributes) {\n            return false;\n        }\n        for (var i = 0; i < el.attributes.length; i++) {\n            var attr = el.attributes[i].nodeName;\n            if (attr.indexOf('data-' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"]) === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n     * @param {JQuery<HTMLElement>} root\n     * @returns {JQuery<HTMLElement>}\n     */\n    function getMatchingElements(root) {\n        var $root = $(root);\n        var matchedElements = $root.find(':' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"]);\n        if ($root.is(':' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"])) {\n            matchedElements = matchedElements.add($root);\n        }\n        return matchedElements;\n    }\n\n    /**\n     * @param {JQuery<HTMLElement> | HTMLElement} element\n     * @param {*} [context]\n     * @returns {HTMLElement}\n     */\n    function getElementOrError(element, context) {\n        var el = element instanceof $ ? element.get(0) : element;\n        if (!el || !el.nodeName) {\n            console.error(context, 'Expected to get DOM Element, got ', element);\n            throw new Error(context + ': Expected to get DOM Element, got' + typeof element);\n        }\n        return el;\n    }\n\n    //Unbind utils\n    function triggerError($el, e) {\n        var msg = e.message || e;\n        if ($.isPlainObject(msg)) {\n            msg = JSON.stringify(msg);\n        }\n        $el.attr(__WEBPACK_IMPORTED_MODULE_4__config__[\"errorAttr\"], msg).trigger(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].error, e);\n    }\n    function unbindAllAttributes(domEl) {\n        var $el = $(domEl);\n        $(domEl.attributes).each(function (index, nodeMap) {\n            var attr = nodeMap.nodeName;\n            var wantedPrefix = 'data-f-';\n            if (attr.indexOf(wantedPrefix) === 0) {\n                attr = attr.replace(wantedPrefix, '');\n                var handler = __WEBPACK_IMPORTED_MODULE_7__attribute_manager__[\"a\" /* default */].getHandler(attr, $el);\n                if (handler.unbind) {\n                    handler.unbind(attr, $el);\n                }\n            }\n        });\n    }\n    function unbindAllNodeHandlers(domEl) {\n        var $el = $(domEl);\n        //FIXME: have to readd events to be able to remove them. Ugly\n        var Handler = __WEBPACK_IMPORTED_MODULE_6__node_manager__[\"a\" /* default */].getHandler($el);\n        var h = new Handler.handle({\n            el: domEl\n        });\n        if (h.removeEvents) {\n            h.removeEvents();\n        }\n    }\n    function removeAllSubscriptions(subscriptions, channel, el) {\n        [].concat(subscriptions).forEach(function (subs) {\n            try {\n                channel.unsubscribe(subs);\n            } catch (e) {\n                triggerError(el, e);\n            }\n        });\n    }\n\n    var publicAPI = {\n\n        nodes: __WEBPACK_IMPORTED_MODULE_6__node_manager__[\"a\" /* default */],\n        attributes: __WEBPACK_IMPORTED_MODULE_7__attribute_manager__[\"a\" /* default */],\n        converters: __WEBPACK_IMPORTED_MODULE_5__converter_manager__[\"a\" /* default */],\n\n        matchedElements: new Map(),\n\n        /**\n         * Unbind the element; unsubscribe from all updates on the relevant channels.\n         *\n         * @param {JQuery<HTMLElement> | HTMLElement} element The element to remove from the data binding.\n         * @param {Channel} channel (Optional) The channel from which to unsubscribe. Defaults to the [variables channel](../channels/variables-channel/).\n         * @returns {void}\n         */\n        unbindElement: function (element, channel) {\n            if (!channel) {\n                channel = this.options.channel;\n            }\n            var domEl = getElementOrError(element);\n            var $el = $(element);\n            var existingData = this.matchedElements.get(domEl);\n            if (!$el.is(':' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"]) || !existingData) {\n                return;\n            }\n            this.matchedElements.delete(element);\n            var subscriptions = Object.keys(existingData).reduce(function (accum, a) {\n                var subsid = existingData[a].subscriptionId;\n                if (subsid) accum.push(subsid);\n                return accum;\n            }, []);\n\n            unbindAllNodeHandlers(domEl);\n            unbindAllAttributes(domEl);\n            removeAllSubscriptions(subscriptions, channel, $el);\n\n            var animAttrs = Object.keys(__WEBPACK_IMPORTED_MODULE_4__config__[\"animation\"]).join(' ');\n            $el.removeAttr(animAttrs);\n\n            Object.keys($el.data()).forEach(function (key) {\n                if (key.indexOf('f-') === 0 || key.match(/^f[A-Z]/)) {\n                    $el.removeData(key);\n                }\n            });\n        },\n\n        /**\n         * Bind the element: subscribe from updates on the relevant channels.\n         *\n         * @param {HTMLElement | JQuery<HTMLElement>} element The element to add to the data binding.\n         * @param {Channel} channel (Optional) The channel to subscribe to. Defaults to the [run channel](../channels/run-channel/).\n         * @returns {void}\n         */\n        bindElement: function (element, channel) {\n            var opts = this.options || {};\n            if (!channel) {\n                channel = opts.channel;\n            }\n            // this.unbindElement(element); //unbind actually removes the data,and jquery doesn't refetch when .data() is called..\n            var domEl = getElementOrError(element);\n            var $el = $(domEl);\n            var isExcluded = opts.exclude && $el.is(opts.exclude);\n            if (!$el.is(':' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"]) || isExcluded) {\n                return;\n            }\n\n            //Send to node manager to handle ui changes\n            var changeEventOverrides = opts.uiChangeEvents || {};\n            var triggerSelector = Object.keys(changeEventOverrides).find(function (selector) {\n                return $el.is(selector);\n            });\n            var matchingEvent = triggerSelector && changeEventOverrides[triggerSelector];\n            var Handler = __WEBPACK_IMPORTED_MODULE_6__node_manager__[\"a\" /* default */].getHandler($el);\n            new Handler.handle({\n                el: domEl,\n                triggerChangeOn: matchingEvent\n            });\n\n            var filterPrefix = 'data-' + __WEBPACK_IMPORTED_MODULE_4__config__[\"prefix\"] + '-';\n            var attrList = {};\n            $(domEl.attributes).each(function (index, nodeMap) {\n                var attr = nodeMap.nodeName;\n                if (attr.indexOf(filterPrefix) !== 0) {\n                    return;\n                }\n                attr = attr.replace(filterPrefix, '');\n\n                var attrVal = nodeMap.value;\n                var topics = Object(__WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__[\"d\" /* parseTopicsFromAttributeValue */])(attrVal);\n\n                var handler = __WEBPACK_IMPORTED_MODULE_7__attribute_manager__[\"a\" /* default */].getHandler(attr, $el);\n                if (handler && handler.init) {\n                    handler.init(attr, topics, $el);\n                }\n                if (topics.length && handler && handler.parse) {\n                    topics = [].concat(handler.parse(topics));\n                }\n\n                var channelPrefix = Object(__WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__[\"b\" /* getChannelForAttribute */])($el, attr);\n                topics = Object(__WEBPACK_IMPORTED_MODULE_1__dom_manager_utils_dom_channel_prefix_helpers__[\"b\" /* addPrefixToTopics */])(topics, channelPrefix);\n\n                var converters = Object(__WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__[\"c\" /* getConvertersForEl */])($el, attr);\n                attrList[attr] = {\n                    channelPrefix: channelPrefix,\n                    topics: topics,\n                    converters: converters //Store once instead of calculating on demand. Avoids having to parse through dom every time\n                };\n            });\n            //Need this to be set before subscribing or callback maybe called before it's set\n            this.matchedElements.set(domEl, attrList);\n\n            var channelConfig = Object(__WEBPACK_IMPORTED_MODULE_0__dom_manager_utils_dom_parse_helpers__[\"a\" /* getChannelConfigForElement */])(domEl);\n            var attrsWithSubscriptions = Object.keys(attrList).reduce(function (accum, name) {\n                var attr = attrList[name];\n                var topics = attr.topics,\n                    channelPrefix = attr.channelPrefix;\n\n                if (!topics.length) {\n                    accum[name] = attr;\n                    return accum;\n                }\n\n                var subsOptions = $.extend({\n                    batch: true,\n                    onError: function (e) {\n                        console.error('DomManager: Subscription error', domEl, e);\n                        triggerError($el, e);\n                    }\n                }, channelConfig);\n                var subscribableTopics = topics.map(function (t) {\n                    return t.name;\n                });\n                var subsid = channel.subscribe(subscribableTopics, function (data, meta) {\n                    if (meta && Object(__WEBPACK_IMPORTED_MODULE_3_lodash__[\"isEqual\"])(data, meta.previousData)) {\n                        return;\n                    }\n                    var toConvert = {};\n                    if (subscribableTopics.length === 1) {\n                        //If I'm only interested in 1 thing pass in value directly, else make a map;\n                        toConvert[name] = data[subscribableTopics[0]];\n                    } else {\n                        var dataForAttr = Object(__WEBPACK_IMPORTED_MODULE_3_lodash__[\"pick\"])(data, subscribableTopics) || {};\n                        toConvert[name] = Object.keys(dataForAttr).reduce(function (accum, key) {\n                            //If this was through a auto-prefixed channel attr return what was bound\n                            var toReplace = new RegExp('^' + channelPrefix + ':');\n                            var k = channelPrefix ? key.replace(toReplace, '') : key;\n                            accum[k] = dataForAttr[key];\n                            return accum;\n                        }, {});\n                    }\n                    $el.removeAttr(__WEBPACK_IMPORTED_MODULE_4__config__[\"errorAttr\"]).trigger(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].convert, toConvert);\n                }, subsOptions);\n\n                accum[name] = Object.assign({}, attr, { subscriptionId: subsid });\n                return accum;\n            }, {});\n\n            this.matchedElements.set(domEl, attrsWithSubscriptions);\n        },\n\n        /**\n         * Bind all provided elements.\n         *\n         * @param  {JQuery<HTMLElement> | HTMLElement[]} [elementsToBind] (Optional) If not provided, binds all matching elements within default root provided at initialization.\n         * @returns {void}\n         */\n        bindAll: function (elementsToBind) {\n            var _this = this;\n\n            if (!elementsToBind) {\n                elementsToBind = getMatchingElements(this.options.root);\n            } else if (!Array.isArray(elementsToBind)) {\n                elementsToBind = getMatchingElements(elementsToBind);\n            }\n\n            //parse through dom and find everything with matching attributes\n            $.each(elementsToBind, function (index, element) {\n                _this.bindElement(element, _this.options.channel);\n            });\n        },\n        /**\n         * Unbind provided elements.\n         *\n         * @param  {JQuery<HTMLElement> | HTMLElement[]} [elementsToUnbind] (Optional) If not provided, unbinds everything.\n         * @returns {void}\n         */\n        unbindAll: function (elementsToUnbind) {\n            var me = this;\n            if (!elementsToUnbind) {\n                elementsToUnbind = [];\n                this.matchedElements.forEach(function (val, key) {\n                    elementsToUnbind.push(key);\n                });\n            } else if (!Array.isArray(elementsToUnbind)) {\n                elementsToUnbind = getMatchingElements(elementsToUnbind);\n            }\n            $.each(elementsToUnbind, function (index, element) {\n                me.unbindElement(element, me.options.channel);\n            });\n        },\n\n        plugins: {},\n\n        /**\n         * Initialize the DOM Manager to work with a particular HTML element and all elements within that root. Data bindings between individual HTML elements and the model variables specified in the attributes will happen via the channel.\n         *\n         * @param {Object} options (Optional) Overrides for the default options.\n         * @param {string} options.root The root HTML element being managed by this instance of the DOM Manager. Defaults to `body`.\n         * @param {Object} options.channel The channel to communicate with. Defaults to the Channel Manager from [Epicenter.js](../../../api_adapters/).\n         * @param {boolean} options.autoBind If `true` (default), any variables added to the DOM after `Flow.initialize()` has been called will be automatically parsed, and subscriptions added to channels. Note, this does not work in IE versions < 11.\n         * @returns {Promise}\n         */\n        initialize: function (options) {\n            var defaults = {\n                /**\n                 * Root of the element for flow.js to manage from.\n                 * @type {string} jQuery selector\n                 */\n                root: 'body',\n                channel: null,\n\n                /**\n                 * Exclude elements matching these selectors from being bound\n                 */\n                exclude: 'pre *',\n\n                /**\n                 * Any elements added to the DOM after `Flow.initialize()` has been called will be automatically bound, and subscriptions added to channels.\n                 * @type {boolean}\n                 */\n                autoBind: true,\n\n                /**\n                 * By default Flow triggers events on 'change', but you may want to trigger on, say, 'keypress' for specific inputs. Set { uiChangeEvents: { [selector]: 'keypress' } } for such cases\n                 */\n                uiChangeEvents: {}\n            };\n            $.extend(defaults, options);\n\n            var channel = defaults.channel;\n\n            this.options = defaults;\n\n            var me = this;\n            var $root = $(defaults.root);\n\n            function attachUIListeners($root) {\n                function parseValue(value, converters) {\n                    if (Array.isArray(value)) {\n                        var parsed = value.map(function (val) {\n                            return Object(__WEBPACK_IMPORTED_MODULE_2_utils_parse_utils__[\"b\" /* toImplicitType */])(val);\n                        });\n                        return __WEBPACK_IMPORTED_MODULE_5__converter_manager__[\"a\" /* default */].parse(parsed, converters);\n                    }\n                    return __WEBPACK_IMPORTED_MODULE_5__converter_manager__[\"a\" /* default */].parse(Object(__WEBPACK_IMPORTED_MODULE_2_utils_parse_utils__[\"b\" /* toImplicitType */])(value), converters);\n                }\n\n                $root.off(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].trigger).on(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].trigger, function (evt, params) {\n                    var elMeta = me.matchedElements.get(evt.target);\n                    var data = params.data,\n                        source = params.source,\n                        options = params.options,\n                        restoreOriginal = params.restoreOriginal;\n\n\n                    if (!elMeta || !data) {\n                        return;\n                    }\n                    var sourceMeta = elMeta[source] || {};\n                    var channelPrefix = sourceMeta.channelPrefix,\n                        converters = sourceMeta.converters;\n\n                    var $el = $(evt.target);\n\n                    var parsed = [].concat(data).map(function (action) {\n                        var name = action.name,\n                            value = action.value;\n\n                        var parsedValue = parseValue(value, converters);\n                        var actualName = name.split('|')[0].trim(); //FIXME: this shouldn't know about the pipe syntax\n                        var prefixedName = Object(__WEBPACK_IMPORTED_MODULE_1__dom_manager_utils_dom_channel_prefix_helpers__[\"a\" /* addDefaultPrefix */])(actualName, source, channelPrefix);\n                        return { name: prefixedName, value: parsedValue };\n                    }, []);\n\n                    if (restoreOriginal) {\n                        //Ideally this should simply be a fetch to the previous version of the variable to use that.\n                        me.unbindElement($el, channel);\n                        me.bindElement($el, channel);\n                        return;\n                    }\n\n                    channel.publish(parsed, options).then(function (result) {\n                        if (!result || !result.length) {\n                            return;\n                        }\n                        var last = result[result.length - 1];\n                        $el.trigger(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].convert, _defineProperty({}, source, last.value));\n                    }, function (e) {\n                        triggerError($el, e);\n                    });\n                });\n            }\n\n            function attachConversionListner($root) {\n                // data = {proptoupdate: value}\n                $root.off(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].convert).on(__WEBPACK_IMPORTED_MODULE_4__config__[\"events\"].convert, function (evt, data) {\n                    var $el = $(evt.target);\n\n                    var elMeta = me.matchedElements.get(evt.target);\n                    if (!elMeta) {\n                        return;\n                    }\n\n                    Object.keys(data).forEach(function (prop) {\n                        var val = data[prop];\n                        var _elMeta$prop = elMeta[prop],\n                            converters = _elMeta$prop.converters,\n                            topics = _elMeta$prop.topics;\n\n                        var convertedValue = __WEBPACK_IMPORTED_MODULE_5__converter_manager__[\"a\" /* default */].convert(val, converters);\n\n                        var handler = __WEBPACK_IMPORTED_MODULE_7__attribute_manager__[\"a\" /* default */].getHandler(prop, $el);\n                        handler.handle(convertedValue, prop, $el, topics);\n                    });\n                });\n            }\n\n            var deferred = $.Deferred();\n            $(function () {\n                me.bindAll();\n\n                attachUIListeners($root);\n                attachConversionListner($root);\n\n                me.plugins.autoBind = Object(__WEBPACK_IMPORTED_MODULE_8__plugins_auto_update_bindings__[\"a\" /* default */])($root.get(0), me, me.options.autoBind);\n\n                deferred.resolve($root);\n                $root.trigger('f.domready');\n            });\n\n            return deferred.promise();\n        }\n    };\n\n    return $.extend(this, publicAPI);\n})());\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__parse_converters__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__parse_channel__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__parse_topics__ = __webpack_require__(22);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__parse_converters__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__parse_channel__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__parse_channel__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_2__parse_topics__[\"a\"]; });\n\n\n\n\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getConvertersForEl;\n/**\n * @param {string} conv \n * @returns {string[]}\n */\nfunction convertersToArray(conv) {\n    if (!conv || !conv.trim()) return [];\n    return conv.split('|').map(function (v) {\n        return v.trim();\n    });\n}\n\n/**\n * @param {JQuery<HTMLElement>} $el\n * @param {string} attribute \n * @returns {string[]}\n */\nfunction getConvertersFromAttr($el, attribute) {\n    var attrVal = $el.attr('data-f-' + attribute);\n    var withConv = convertersToArray(attrVal);\n    if (withConv.length > 1) {\n        return withConv.slice(1); //First item will be the topic\n    }\n    return [];\n}\nfunction getFConvertAttrVal($el, suffix) {\n    var baseAttr = 'data-f-convert';\n    var suffixAttr = suffix ? '-' + suffix : '';\n    var conv = $el.attr('' + baseAttr + suffixAttr); //.data shows value cached by jquery\n    return convertersToArray(conv);\n}\n\n/**\n * @param {JQuery<HTMLElement>} $el  \n * @param {string} attribute \n * @returns {string[]} converters\n */\nfunction getConvertersForEl($el, attribute) {\n    function getAllConverters($el, attribute) {\n        var convertersAsPipes = getConvertersFromAttr($el, attribute);\n        if (convertersAsPipes.length) {\n            return convertersAsPipes;\n        }\n\n        var whiteListedGenericAttributes = ['bind', 'foreach', 'repeat'];\n        var canUseFConvert = whiteListedGenericAttributes.indexOf(attribute) !== -1;\n        if (canUseFConvert) {\n            return getFConvertAttrVal($el, '');\n        }\n        return getFConvertAttrVal($el, attribute);\n    }\n\n    var converters = getAllConverters($el, attribute);\n    var $parentEl = $el.parents('[data-f-convert]').eq(0);\n    var resolvedConverters = converters.reduce(function (accum, val) {\n        if (val === 'inherit') {\n            var parentConv = getConvertersForEl($parentEl, attribute);\n            accum = accum.concat(parentConv);\n        } else {\n            accum = accum.concat(val);\n        }\n        return accum;\n    }, []);\n\n    if (!resolvedConverters.length && $parentEl.length) {\n        return getConvertersForEl($parentEl, attribute);\n    }\n    return resolvedConverters;\n}\n\n/***/ }),\n/* 21 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = getChannelForAttribute;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = getChannelConfigForElement;\n/**\n * \n * @param {JQuery<HTMLElement>} $el  \n * @param {string} attr \n * @returns {string|undefined}\n */\nfunction getChannelForAttribute($el, attr) {\n    attr = attr.replace('data-f-', '');\n    var channel = $el.data('f-channel-' + attr);\n    if (channel === undefined) {\n        channel = $el.attr('data-f-channel'); //.data shows value cached by jquery\n    }\n    if (channel === undefined) {\n        var $parentEl = $el.closest('[data-f-channel]');\n        if ($parentEl) {\n            channel = $parentEl.attr('data-f-channel');\n        }\n    }\n    return channel;\n}\n\n/**\n * @param {HTMLElement} el\n * @returns {Object}\n */\nfunction getChannelConfigForElement(el) {\n    //TODO: Should this look at parents too?\n    var attrs = el.attributes;\n    var config = {};\n    for (var i = 0; i < attrs.length; i++) {\n        var attrib = el.attributes[i];\n        if (attrib.specified && attrib.name.indexOf('data-f-channel-') === 0) {\n            var key = attrib.name.replace('data-f-channel-', '');\n            config[key] = attrib.value;\n        }\n    }\n    return config;\n}\n\n/***/ }),\n/* 22 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = parseTopicsFromAttributeValue;\n/**\n * @param {string} attrVal \n * @returns {NormalizedTopic[]} variables\n */\nfunction parseTopicsFromAttributeValue(attrVal) {\n    var commaRegex = /,(?![^[(]*[\\])])/; //split except on a[b,c] or a(v,c)\n    var topicsPart = attrVal.split('|')[0];\n    if (topicsPart.indexOf('<%') !== -1) {\n        //Assume it's templated for later use\n        return [];\n    }\n    var split = topicsPart.split(commaRegex);\n    if (split.length > 1) {\n        return split.map(function (v) {\n            return { name: v.trim() };\n        });\n    }\n    return [{ name: topicsPart.trim() }];\n}\n\n/***/ }),\n/* 23 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = addPrefixToTopics;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = addDefaultPrefix;\n/**\n * \n * @param {NormalizedTopic[]} topics \n * @param {string} prefix \n * @returns {NormalizedTopic[]}\n */\nfunction addPrefixToTopics(topics, prefix) {\n    if (!prefix) {\n        return topics;\n    }\n    var mappedTopics = topics.map(function (topic) {\n        var currentName = topic.name;\n        var hasChannelDefined = currentName.indexOf(':') !== -1;\n        if (!hasChannelDefined) {\n            topic.name = prefix + ':' + currentName;\n        }\n        return topic;\n    });\n    return mappedTopics;\n}\n\nvar DEFAULT_OPERATIONS_PREFIX = 'operations:';\nvar DEFAULT_VARIABLES_PREFIX = 'variables:';\n\nfunction addDefaultPrefix(name, source, channelPrefix) {\n    var isUnprefixed = name.indexOf(':') === -1;\n\n    var defaultPrefix = source.indexOf('on-') === 0 ? DEFAULT_OPERATIONS_PREFIX : DEFAULT_VARIABLES_PREFIX;\n    var needsDefaultPrefix = defaultPrefix !== DEFAULT_VARIABLES_PREFIX;\n\n    if (isUnprefixed && needsDefaultPrefix) {\n        name = '' + defaultPrefix + name;\n    }\n    var hasDefaultPrefix = name.indexOf(defaultPrefix) === 0;\n    if ((isUnprefixed || hasDefaultPrefix) && channelPrefix) {\n        name = channelPrefix + ':' + name;\n    }\n    return name;\n}\n\n/***/ }),\n/* 24 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__ = __webpack_require__(3);\n\n\n\nvar normalize = function (alias, converter, acceptList) {\n    var ret = [];\n    //nomalize('flip', fn)\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(converter)) {\n        ret.push({\n            alias: alias,\n            convert: converter,\n            acceptList: acceptList\n        });\n    } else if ($.isPlainObject(converter) && converter.convert) {\n        converter.alias = alias;\n        converter.acceptList = acceptList;\n        ret.push(converter);\n    } else if ($.isPlainObject(alias)) {\n        //normalize({alias: 'flip', convert: function})\n        if (alias.convert) {\n            ret.push(alias);\n        } else {\n            // normalize({flip: fun})\n            $.each(alias, function (key, val) {\n                ret.push({\n                    alias: key,\n                    convert: val,\n                    acceptList: acceptList\n                });\n            });\n        }\n    }\n    return ret;\n};\n\nvar matchConverter = function (alias, converter) {\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isString\"])(converter.alias)) {\n        return alias === converter.alias;\n    } else if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(converter.alias)) {\n        return converter.alias(alias);\n    } else if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isRegExp\"])(converter.alias)) {\n        return converter.alias.match(alias);\n    }\n    return false;\n};\n\nvar converterManager = {\n    private: {\n        matchConverter: matchConverter\n    },\n\n    list: [],\n    /**\n     * Add a new attribute converter to this instance of Flow.js.\n     *\n     * **Example**\n     *\n     *      Flow.dom.converters.register('max', function (value) {\n     *          return max(value);\n     *      }, true);\n     *\n     *      Flow.dom.converters.register({\n     *          alias: 'sig',\n     *          parse: $.noop,\n     *          convert: function (value) {\n     *              return value.firstName + ' ' + value.lastName + ', ' + value.jobTitle;\n     *      }, false);\n     *\n     *      <div>\n     *          The largest sales you had was <span data-f-bind=\"salesByYear | max | $#,###\"></span>.\n     *          The current sales manager is <span data-f-bind=\"salesMgr | sig\"></span>.\n     *      </div>\n     *\n     * @param  {string|Function|RegExp} alias Formatter name.\n     * @param  {Function|Object} [converter] If a function, `converter` is called with the value. If an object, should include fields for `alias` (name), `parse` (function), and `convert` (function).\n     * @param {boolean} [acceptList] Determines if the converter is a 'list' converter or not. List converters take in arrays as inputs, others expect single values.\n     * @returns {void}\n     */\n    register: function (alias, converter, acceptList) {\n        var normalized = normalize(alias, converter, acceptList);\n        this.list = normalized.concat(this.list);\n    },\n\n    /**\n     * Replace an already registered converter with a new one of the same name.\n     *\n     * @param {string} alias Formatter name.\n     * @param {Function|Object} converter If a function, `converter` is called with the value. If an object, should include fields for `alias` (name), `parse` (function), and `convert` (function).\n     * @returns {void}\n     */\n    replace: function (alias, converter) {\n        var index;\n        this.list.forEach(function (currentConverter, i) {\n            if (matchConverter(alias, currentConverter)) {\n                index = i;\n                return false;\n            }\n        });\n        this.list.splice(index, 1, normalize(alias, converter)[0]);\n    },\n\n    getConverter: function (alias) {\n        var norm = Object(__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__[\"a\" /* splitNameArgs */])(alias);\n        norm.args = norm.args.map(__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__[\"b\" /* toImplicitType */]);\n\n        var conv = Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"find\"])(this.list, function (converter) {\n            return matchConverter(norm.name, converter);\n        });\n        if (conv && norm.args) {\n            return $.extend({}, conv, { convert: Function.bind.apply(conv.convert, [null].concat(norm.args)) });\n        }\n        return conv;\n    },\n\n    /**\n     * Pipes the value sequentially through a list of provided converters.\n     *\n     * @param  {*} value Input for the converter to tag.\n     * @param  {string|string[]} list List of converters (maps to converter alias).\n     *\n     * @returns {*} Converted value.\n     */\n    convert: function (value, list) {\n        if (!list || !list.length) {\n            return value;\n        }\n        list = [].concat(list).map(function (v) {\n            return v.trim();\n        });\n\n        var currentValue = value;\n        var me = this;\n\n        var convertArray = function (converter, val, converterName) {\n            return val.map(function (v) {\n                return converter.convert(v, converterName);\n            });\n        };\n        var convert = function (converter, value, converterName) {\n            var converted;\n            if (Array.isArray(value) && converter.acceptList !== true) {\n                converted = convertArray(converter, value, converterName);\n            } else {\n                converted = converter.convert(value, converterName);\n            }\n            return converted;\n        };\n        var convertObject = function (converter, value, converterName) {\n            return Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"mapValues\"])(value, function (val) {\n                return convert(converter, val, converterName);\n            });\n        };\n        list.forEach(function (converterName) {\n            var converter = me.getConverter(converterName);\n            if (!converter) {\n                throw new Error('Could not find converter for ' + converterName);\n            }\n            if ($.isPlainObject(currentValue) && converter.acceptList !== true) {\n                currentValue = convertObject(converter, currentValue, converterName);\n            } else {\n                currentValue = convert(converter, currentValue, converterName);\n            }\n        });\n        return currentValue;\n    },\n\n    /**\n     * Counter-part to `convert()`. Translates converted values back to their original form.\n     *\n     * @param  {*} value Value to parse.\n     * @param  {string|string[]} list  List of parsers to run the value through. Outermost is invoked first.\n     * @returns {*} Original value.\n     */\n    parse: function (value, list) {\n        if (!list || !list.length) {\n            return value;\n        }\n        list = [].concat(list).reverse().map(function (v) {\n            return v.trim();\n        });\n\n        var currentValue = value;\n        var me = this;\n        list.forEach(function (converterName) {\n            var converter = me.getConverter(converterName);\n            if (!converter) {\n                throw new Error('parse: Could not find converter ' + converterName);\n            }\n            if (converter.parse) {\n                currentValue = converter.parse(currentValue, converterName);\n            }\n        });\n        return currentValue;\n    }\n};\n\n//Bootstrap\nvar defaultconverters = [__webpack_require__(25), __webpack_require__(26), __webpack_require__(27), __webpack_require__(28), __webpack_require__(29), __webpack_require__(30), __webpack_require__(31), __webpack_require__(32)];\n\ndefaultconverters.reverse().forEach(function (converter) {\n    if (Array.isArray(converter)) {\n        converter.forEach(function (c) {\n            converterManager.register(c);\n        });\n    } else {\n        converterManager.register(converter);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (converterManager);\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n    /**\n     * Convert source value to an integer. Often used for chaining to another converter.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Your car has driven\n     *          <span data-f-bind=\"Odometer | i | s0.0\"></span> miles.\n     *      </div>\n     *\n     * @param {string} value Source value.\n     * @returns {number}\n     */\n    i: function (value) {\n        return parseFloat(value);\n    },\n\n    /**\n     * Add value to source number.\n     *\n     * **Example**\n     *      <div>\n     *          Next year is <span data-f-bind=\"Year | plus(1)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    plus: function (operand, val) {\n        return Number(val) + Number(operand);\n    },\n\n    /**\n     * Subtract value from source number.\n     *\n     * **Example**\n     *      <div>\n     *          Last year was <span data-f-bind=\"Year | minus(1)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    minus: function (operand, val) {\n        return Number(val) - Number(operand);\n    },\n\n    /**\n     * Multiply value with source number.\n     *\n     * **Example**\n     *      <div>\n     *          Total cost is <span data-f-bind=\"Units | multiplyBy(10)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    multiplyBy: function (operand, val) {\n        return Number(val) * Number(operand);\n    },\n\n    /**\n     * Divide value by source number.\n     *\n     * **Example**\n     *      <div>\n     *          Unit cost is <span data-f-bind=\"Total Cost | divideBy(10)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    divideBy: function (operand, val) {\n        return Number(val) / Number(operand);\n    }\n};\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n\n    /**\n     * Convert the model variable to a string. Often used for chaining to another converter.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          This year you are in charge of sales for\n     *          <span data-f-bind=\"salesMgr.region | s | upperCase\"></span>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    s: function (val) {\n        return val + '';\n    },\n\n    /**\n     * Convert the model variable to UPPER CASE.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          This year you are in charge of sales for\n     *          <span data-f-bind=\"salesMgr.region | s | upperCase\"></span>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    upperCase: function (val) {\n        return (val + '').toUpperCase();\n    },\n\n    /**\n     * Convert the model variable to lower case.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Enter your user name:\n     *          <input data-f-bind=\"userName | lowerCase\"></input>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    lowerCase: function (val) {\n        return (val + '').toLowerCase();\n    },\n\n    /**\n     * Convert the model variable to Title Case.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Congratulations on your promotion!\n     *          Your new title is: <span data-f-bind=\"currentRole | titleCase\"></span>.\n     *      </div>\n     *\n     * @param {string} val The model variable.\n     * @returns {string} converted string\n     */\n    titleCase: function (val) {\n        val = val + '';\n        return val.replace(/\\w\\S*/g, function (txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    }\n};\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _ = __webpack_require__(0);\n\nfunction parseLimitArgs(starting, limit, val) {\n    var toRet = {};\n    if (arguments.length === 3) {\n        //eslint-disable-line\n        toRet = {\n            input: limit,\n            limit: starting\n        };\n    } else if (arguments.length === 2) {\n        toRet = {\n            input: starting\n        };\n    } else {\n        console.error('Too many arguments passed to last', arguments);\n        throw new Error('Too many arguments passed to last');\n    }\n\n    toRet.input = [].concat(toRet.input);\n    return toRet;\n}\n\nvar list = {\n    /**\n     * Convert the input into an array. \n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any[]}\n     */\n    list: function (val) {\n        return [].concat(val);\n    },\n\n    /**\n     * Reverse the array.\n     *\n     * **Example**\n     *\n     *      <p>Show the history of our sales, starting with the last (most recent):</p>\n     *      <ul data-f-foreach=\"Sales | reverse\">\n     *          <li></li>\n     *      </ul>\n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any[]} the reversed array\n     */\n    reverse: function (val) {\n        return [].concat(val).reverse();\n    },\n\n    /**\n     * Select only the last element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          In the current year, we have <span data-f-bind=\"Sales | last\"></span> in sales.\n     *      </div>\n     *\n     * @param {number} n number of items to get\n     * @param {any[]} val The array model variable.\n     * @returns {any} last element of array\n     */\n    last: function (n, val) {\n        var parsed = parseLimitArgs.apply(null, arguments);\n        var stripped = parsed.input.slice(-(parsed.limit || 1));\n        if (stripped.length <= 1) {\n            return stripped[0];\n        }\n        return stripped;\n    },\n\n    /**\n     * Select only the first element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Our initial investment was <span data-f-bind=\"Capital | first\"></span>.\n     *      </div>\n     *\n     * @param {number} n number of items to get\n     * @param {any[]} val The array model variable.\n     * @returns {any} first element of the array\n     */\n    first: function (n, val) {\n        var parsed = parseLimitArgs.apply(null, arguments);\n        var stripped = parsed.input.slice(0, parsed.limit || 1);\n        if (stripped.length <= 1) {\n            return stripped[0];\n        }\n        return stripped;\n    },\n\n    /**\n     * Select only the previous (second to last) element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Last year we had <span data-f-bind=\"Sales | previous\"></span> in sales.\n     *      </div>\n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any} the previous (second to last) element of the array.\n     */\n    previous: function (val) {\n        val = [].concat(val);\n        return val.length <= 1 ? val[0] : val[val.length - 2];\n    },\n\n    /**\n     * Returns length of array\n     *\n     * **Example**\n     * Total Items: <h6 data-f-bind=\"items | size\"></h6>\n     * \n     * @param  {any[]} src array\n     * @returns {number}     length of array\n     */\n    size: function (src) {\n        return [].concat(src).length;\n    },\n\n    /**\n     * Select every nth item from array\n     *\n     * **Example**\n     * <!-- select every 10th item starting from itself\n     * <ul data-f-foreach=\"Time | pickEvery(10)\"><li></li></ul>\n     * <!-- select every 10th item starting from the fifth\n     * <ul data-f-foreach=\"Time | pickEvery(10, 5)\"><li></li></ul>\n     * \n     * @param  {number} n          nth item to select\n     * @param  {number} [startIndex] index to start from\n     * @param  {any[]} [val]        source array\n     * @returns {any[]}            shortened array\n     */\n    pickEvery: function (n, startIndex, val) {\n        if (arguments.length === 3) {\n            //eslint-disable-line\n            //last item is match string\n            val = startIndex;\n            startIndex = 0;\n        }\n        val = [].concat(val);\n        val = val.slice(startIndex);\n        return val.filter(function (item, index) {\n            return index % n === 0;\n        });\n    }\n};\n\nvar mapped = Object.keys(list).map(function (alias) {\n    var fn = list[alias];\n    var newfn = function () {\n        var args = _.toArray(arguments);\n        var indexOfActualValue = args.length - 2; //last item is the matchstring\n        var val = args[indexOfActualValue];\n        if ($.isPlainObject(val)) {\n            return Object.keys(val).reduce(function (accum, key) {\n                var arr = val[key];\n                var newArgs = args.slice();\n                newArgs[indexOfActualValue] = arr;\n                accum[key] = fn.apply(fn, newArgs);\n                return accum;\n            }, {});\n        }\n        return fn.apply(fn, arguments);\n    };\n    return {\n        alias: alias,\n        acceptList: true,\n        convert: newfn\n    };\n});\nmodule.exports = mapped;\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports) {\n\nfunction parseArgs(toCompare, trueVal, falseVal, valueToCompare, matchString) {\n    var toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 5:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: valueToCompare });\n        case 4:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal });\n        case 3:\n            //eslint-disable-line\n            return $.extend(toReturn, { input: trueVal, falseVal: trueVal });\n        default:\n            return toReturn;\n    }\n}\n\nmodule.exports = [{\n    alias: 'is',\n    acceptList: false,\n    convert: function (toCompare) {\n        var args = parseArgs.apply(null, arguments);\n        return args.input === toCompare ? args.trueVal : args.falseVal;\n    }\n}];\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _require = __webpack_require__(0),\n    isString = _require.isString,\n    isNumber = _require.isNumber;\n\nfunction isAllowedLeading(str) {\n    var validPrefixes = ['', '$', '', '', '', '', '', ''];\n    return validPrefixes.indexOf(str.trim()) !== -1;\n}\n\nmodule.exports = {\n    /**\n     * @param {string} name\n     * @returns {boolean}\n     */\n    alias: function (name) {\n        /**\n         * @param {string} v\n         * @returns {boolean}\n         */\n        function checkValMatch(v) {\n            var validStandalone = ['#', '0', '%'];\n            if (v.length === 1) {\n                return validStandalone.indexOf(v) !== -1;\n            }\n\n            var validFirstChars = ['s', '#', '0', '.'];\n            var validLastChars = ['%', '#', '0'];\n\n            if (isAllowedLeading(v.charAt(0))) {\n                v = v.slice(1);\n            }\n            var isValidFirstChar = validFirstChars.indexOf(v.charAt(0)) !== -1;\n            var isValidLastChar = validLastChars.indexOf(v.charAt(v.length - 1)) !== -1;\n\n            if (v.length === 2) {\n                return isValidFirstChar && isValidLastChar;\n            }\n\n            var validRemainingChars = ['#', '0', '.', ','];\n            var areRemainingCharactersValid = v.substr(1, v.length - 2).split('').reduce(function (accum, char) {\n                var isMatch = validRemainingChars.indexOf(char) !== -1;\n                if (!isMatch) {\n                    accum = false;\n                }\n                return accum;\n            }, true);\n\n            return isValidFirstChar && isValidLastChar && areRemainingCharactersValid;\n        }\n\n        var parts = name.split(' ');\n        if (parts.length === 3) {\n            return checkValMatch(parts[1]); //prefix and suffix\n        } else if (parts.length === 1) {\n            return checkValMatch(parts[0]); //just the number\n        } else if (parts.length === 2) {\n            return checkValMatch(parts[0]) || checkValMatch(parts[1]); //either prefix or suffix\n        }\n        return false;\n    },\n\n    /**\n     * @param {string} val\n     * @returns {number}\n     */\n    parse: function (val) {\n        val += '';\n        var isNegative = val.charAt(0) === '-';\n\n        val = val.replace(/,/g, '');\n        var floatMatcher = /([-+]?[0-9]*\\.?[0-9]+)(K?M?B?%?)/i;\n        var results = floatMatcher.exec(val);\n        var number;\n        var suffix = '';\n        if (results && results[1]) {\n            number = results[1];\n        }\n        if (results && results[2]) {\n            suffix = results[2].toLowerCase();\n        }\n\n        /*eslint no-magic-numbers: 0 complexity: 0 */\n        switch (suffix) {\n            case '%':\n                number = number / 100;\n                break;\n            case 'k':\n                number = number * 1000;\n                break;\n            case 'm':\n                number = number * 1000000;\n                break;\n            case 'b':\n                number = number * 1000000000;\n                break;\n            default:\n        }\n        number = parseFloat(number);\n        if (isNegative && number > 0) {\n            number = number * -1;\n        }\n        return number;\n    },\n\n    convert: function (value) {\n        var scales = ['', 'K', 'M', 'B', 'T'];\n        function roundTo(value, digits) {\n            return Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits);\n        }\n\n        function getDigits(value, digits) {\n            value = value === 0 ? 0 : roundTo(value, Math.max(0, digits - Math.ceil(Math.log(value) / Math.LN10)));\n\n            var TXT = '';\n            var numberTXT = value.toString();\n            var decimalSet = false;\n\n            for (var iTXT = 0; iTXT < numberTXT.length; iTXT++) {\n                TXT += numberTXT.charAt(iTXT);\n                if (numberTXT.charAt(iTXT) === '.') {\n                    decimalSet = true;\n                } else {\n                    digits--;\n                }\n\n                if (digits <= 0) {\n                    return TXT;\n                }\n            }\n\n            if (!decimalSet) {\n                TXT += '.';\n            }\n            while (digits > 0) {\n                TXT += '0';\n                digits--;\n            }\n            return TXT;\n        }\n\n        function addDecimals(value, decimals, minDecimals, hasCommas) {\n            hasCommas = !!hasCommas;\n            var numberTXT = value.toString();\n            var hasDecimals = numberTXT.split('.').length > 1;\n            var iDec = 0;\n\n            if (hasCommas) {\n                for (var iChar = numberTXT.length - 1; iChar > 0; iChar--) {\n                    if (hasDecimals) {\n                        hasDecimals = numberTXT.charAt(iChar) !== '.';\n                    } else {\n                        iDec = (iDec + 1) % 3;\n                        if (iDec === 0) {\n                            numberTXT = numberTXT.substr(0, iChar) + ',' + numberTXT.substr(iChar);\n                        }\n                    }\n                }\n            }\n            if (decimals > 0) {\n                var toADD;\n                if (numberTXT.split('.').length <= 1) {\n                    toADD = minDecimals;\n                    if (toADD > 0) {\n                        numberTXT += '.';\n                    }\n                } else {\n                    toADD = minDecimals - numberTXT.split('.')[1].length;\n                }\n\n                while (toADD > 0) {\n                    numberTXT += '0';\n                    toADD--;\n                }\n            }\n            return numberTXT;\n        }\n\n        function getSuffix(formatTXT) {\n            formatTXT = formatTXT.replace('.', '');\n            var fixesTXT = formatTXT.split(new RegExp('[0|,|#]+', 'g'));\n            return fixesTXT.length > 1 ? fixesTXT[1].toString() : '';\n        }\n\n        function format(number, formatTXT) {\n            // eslint-disable-line\n            if (Array.isArray(number)) {\n                number = number[number.length - 1];\n            }\n            if (!isString(number) && !isNumber(number)) {\n                return number;\n            }\n\n            if (!formatTXT || formatTXT.toLowerCase() === 'default') {\n                return number.toString();\n            }\n\n            if (isNaN(number)) {\n                return '?';\n            }\n\n            //var formatTXT;\n            var entityCodeMapping = {\n                '&euro;': '',\n                '&dollar;': '$',\n                '&cent;': '',\n                '&pound;': '',\n                '&yen;': ''\n            };\n            Object.keys(entityCodeMapping).forEach(function (code) {\n                formatTXT = formatTXT.replace(code, entityCodeMapping[code]);\n            });\n\n            // Divide +/- Number Format\n            var formats = formatTXT.split(';');\n            if (formats.length > 1) {\n                return format(Math.abs(number), formats[number >= 0 ? 0 : 1]);\n            }\n\n            // Save Sign\n            var sign = number >= 0 ? '' : '-';\n            number = Math.abs(number);\n\n            var leftOfDecimal = formatTXT;\n            var d = leftOfDecimal.indexOf('.');\n            if (d > -1) {\n                leftOfDecimal = leftOfDecimal.substring(0, d);\n            }\n\n            var normalized = leftOfDecimal.toLowerCase();\n            var index = normalized.lastIndexOf('s');\n            var isShortFormat = index > -1;\n\n            if (isShortFormat) {\n                var nextChar = leftOfDecimal.charAt(index + 1);\n                if (nextChar === ' ') {\n                    isShortFormat = false;\n                }\n            }\n\n            var leadingText = isShortFormat ? formatTXT.substring(0, index) : '';\n            var rightOfPrefix = isShortFormat ? formatTXT.substr(index + 1) : formatTXT.substr(index);\n\n            //first check to make sure 's' is actually short format and not part of some leading text\n            if (isShortFormat) {\n                var shortFormatTest = /[0-9#*]/;\n                var shortFormatTestResult = rightOfPrefix.match(shortFormatTest);\n                if (!shortFormatTestResult || shortFormatTestResult.length === 0) {\n                    //no short format characters so this must be leading text ie. 'weeks '\n                    isShortFormat = false;\n                    leadingText = '';\n                }\n            }\n\n            //if (formatTXT.charAt(0) == 's')\n            if (isShortFormat) {\n                var valScale = number === 0 ? 0 : Math.floor(Math.log(Math.abs(number)) / (3 * Math.LN10));\n                valScale = number / Math.pow(10, 3 * valScale) < 1000 ? valScale : valScale + 1;\n                valScale = Math.max(valScale, 0);\n                valScale = Math.min(valScale, 4);\n                number = number / Math.pow(10, 3 * valScale);\n                //if (!isNaN(Number(formatTXT.substr(1) ) ) )\n\n                if (!isNaN(Number(rightOfPrefix)) && rightOfPrefix.indexOf('.') === -1) {\n                    var limitDigits = Number(rightOfPrefix);\n                    if (number < Math.pow(10, limitDigits)) {\n                        if (isAllowedLeading(leadingText)) {\n                            return sign + leadingText + getDigits(number, Number(rightOfPrefix)) + scales[valScale];\n                        } else {\n                            return leadingText + sign + getDigits(number, Number(rightOfPrefix)) + scales[valScale];\n                        }\n                    } else if (isAllowedLeading(leadingText)) {\n                        return sign + leadingText + Math.round(number) + scales[valScale];\n                    } else {\n                        return leadingText + sign + Math.round(number) + scales[valScale];\n                    }\n                } else {\n                    //formatTXT = formatTXT.substr(1);\n                    formatTXT = formatTXT.substr(index + 1);\n                    var SUFFIX = getSuffix(formatTXT);\n                    formatTXT = formatTXT.substr(0, formatTXT.length - SUFFIX.length);\n\n                    var valWithoutLeading = format((sign === '' ? 1 : -1) * number, formatTXT) + scales[valScale] + SUFFIX;\n                    if (isAllowedLeading(leadingText) && sign !== '') {\n                        valWithoutLeading = valWithoutLeading.substr(sign.length);\n                        return sign + leadingText + valWithoutLeading;\n                    }\n\n                    return leadingText + valWithoutLeading;\n                }\n            }\n\n            var subFormats = formatTXT.split('.');\n            var decimals;\n            var minDecimals;\n            if (subFormats.length > 1) {\n                decimals = subFormats[1].length - subFormats[1].replace(new RegExp('[0|#]+', 'g'), '').length;\n                minDecimals = subFormats[1].length - subFormats[1].replace(new RegExp('0+', 'g'), '').length;\n                formatTXT = subFormats[0] + subFormats[1].replace(new RegExp('[0|#]+', 'g'), '');\n            } else {\n                decimals = 0;\n            }\n\n            var fixesTXT = formatTXT.split(new RegExp('[0|,|#]+', 'g'));\n            var preffix = fixesTXT[0].toString();\n            var suffix = fixesTXT.length > 1 ? fixesTXT[1].toString() : '';\n\n            number = number * (formatTXT.split('%').length > 1 ? 100 : 1);\n            //            if (formatTXT.indexOf('%') !== -1) number = number * 100;\n            number = roundTo(number, decimals);\n\n            sign = number === 0 ? '' : sign;\n\n            var hasCommas = formatTXT.substr(formatTXT.length - 4 - suffix.length, 1) === ',';\n            var formatted = sign + preffix + addDecimals(number, decimals, minDecimals, hasCommas) + suffix;\n\n            //  console.log(originalNumber, originalFormat, formatted)\n            return formatted;\n        }\n\n        return format;\n    }()\n};\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports) {\n\nfunction parseArgs(limit, trueVal, falseVal, valueToCompare, matchString) {\n    var toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 5:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: valueToCompare });\n        case 4:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal });\n        case 3:\n            //eslint-disable-line\n            return $.extend(toReturn, { input: trueVal, falseVal: trueVal });\n        default:\n            return toReturn;\n    }\n}\nmodule.exports = {\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is greater than the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | greaterThan(50)\"></span> \n     *\n     *          <!-- displays custom text -->\n     *          <span data-f-bind=\"widgets | greaterThan(50, 'Congratulations!', 'Better luck next year')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is greater than `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is greater than `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    greaterThan: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) > Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is greater than or equal to the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | greaterThan(50)\"></span> \n     *\n     *          <!-- displays custom text -->\n     *          <span data-f-bind=\"widgets | greaterThan(50, 'Congratulations!', 'Better luck next year')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is greater than or equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is greater than or equal to `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    greaterThanEqual: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) >= Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is equal to the limit.\n     *\n     * \n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | equalsNumber(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | equalsNumber(50, 'Met the goal exactly!', 'Not an exact match')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is not equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable equals `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    equalsNumber: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) === Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is less than the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | lessThan(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | lessThan(50, 'Oops didn't make quite enough!', 'Built a lot of widgets this year!')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is less than `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    lessThan: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) < Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is less than or equal to the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | lessThanEqual(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | lessThanEqual(50, 'Oops didn't make quite enough!', 'Built a lot of widgets this year!')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is less than or equal to `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    lessThanEqual: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) <= Number(limit) ? args.trueVal : args.falseVal;\n    }\n};\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\nfunction parseArgs(trueVal, falseVal, input, matchString) {\n    var toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 4:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: input });\n        case 3:\n            //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal });\n        default:\n            return toReturn;\n    }\n}\n\nmodule.exports = {\n    /**\n     * Convert 'truthy' values to true and 'falsy' values to false.\n     *\n     * **Example**\n     *\n     *      <!-- displays \"true\" or \"false\" -->\n     *      <!-- in particular, true if sampleVar is truthy (1, true, 'some string', [] etc.), \n     *            false if sampleVar is falsy (0, false, '') -->\n     *      <span data-f-bind=\"sampleVar | toBool\"></span>\n     * \n     * @param {Any} value\n     * @returns {boolean}\n     */\n    toBool: function (value) {\n        return !!value;\n    },\n\n    /**\n     * Converts values to boolean and negates.\n     *\n     * **Example**\n     *\n     *      <!-- disables input if isGameInProgress is false -->\n     *      <input type=\"text\" data-f-disabled=\"isGameInProgress | not\" />\n     * \n     * @param {Any} value\n     * @returns {boolean}\n     */\n    not: function (value) {\n        return !value;\n    },\n\n    /**\n     * Convert the input to a new value (for example, some text), based on whether it is true or false.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <span data-f-bind=\"sampleVar | ifTrue('yes! please move forward', 'not ready to proceed')\"></span> \n     *          <span data-f-bind=\"sampleVar | ifTrue('yes! please move forward')\"></span>\n     *      </div>\n     *\n     * @param {string} trueVal The value to display if the input is true. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The value to display if the input is false. If not included, returns the input. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {Any} input (Optional) The input to test. If not included, the output of the previous argument is used.\n     * @returns {Any} If input is true, returns trueVal. If input is false, returns falseVal if provided, or echoes the input.\n     */\n    ifTrue: function () {\n        var args = parseArgs.apply(null, arguments);\n        return args.input ? args.trueVal : args.falseVal;\n    },\n    /**\n     * Convert the input to a new value (for example, some text), based on whether it is false or true.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <span data-f-bind=\"sampleVar | ifFalse('not ready to proceed', 'actually this is still true')\"></span> \n     *          <span data-f-bind=\"sampleVar | ifFalse('not ready to proceed')\"></span>\n     *      </div>\n     *\n     * @param {string} trueVal The value to display if the input is false. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The value to display if the input is true. If not included, returns the input. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {Any} input (Optional) The input to test. If not included, the output of the previous argument is used.\n     * @returns {Any} If input is false, returns trueVal. If input is true, returns falseVal if provided, or echoes the input.\n     */\n    ifFalse: function () {\n        var args = parseArgs.apply(null, arguments);\n        return !args.input ? args.trueVal : args.falseVal;\n    }\n};\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _ = __webpack_require__(0);\n\nvar list = {\n    /**\n     * Returns all values in array matching argument\n     *\n     * ** Example **\n     * <!-- list online users -->\n     * <ul data-f-foreach=\"users | filter(isOnline)\"><li></li></button>\n     * \n     * @param  {string|number|boolean} valueToFilterBy value to reject\n     * @param  {any[]} source The arrayed model variable\n     * @returns {any[]}     filtered lsit\n     */\n    filter: function (valueToFilterBy, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.filter(source, valueToFilterBy);\n        }\n        return source.filter(function (v) {\n            return v === valueToFilterBy;\n        });\n    },\n\n    /**\n     * Returns all values in array excluding match\n     *\n     * ** Example **\n     * <!-- list offline users -->\n     * <ul data-f-foreach=\"users | except(isOnline)\"><li></li></button>\n     * \n     * @param  {string|number|boolean} valueToReject value to reject\n     * @param  {any[]} source The arrayed model variable\n     * @returns {any[]}     filtered lsit\n     */\n    except: function (valueToReject, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.reject(source, valueToReject);\n        }\n        return source.filter(function (v) {\n            return v !== valueToReject;\n        });\n    },\n\n    /**\n     * Checks if array contains *any* item passing the test\n     *\n     * ** Example **\n     * <!-- hides button if any of the users are not online -->\n     * <button data-f-hideif=\"users | any(isOnline) | not\">Get Started</button>\n     * <button data-f-hideif=\"users | any({ isOnline: false })\">Get Started</button>\n     * \n     * @param  {string|Object} value value to check for\n     * @param  {any[]} source The arrayed model variable\n     * @returns {boolean}     True if match found in array\n     */\n    any: function (value, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.some(source, value);\n        }\n        return source.indexOf(value) !== -1;\n    },\n\n    /**\n     * Checks if *every* item in the array passes the test\n     *\n     * ** Example **\n     * <!-- shows button if any of the users are not online -->\n     * <button data-f-showif=\"users | every(isOnline)\">Get Started</button>\n     * \n     * @param  {string|Object} value value to check for\n     * @param  {any[]} source The arrayed model variable\n     * @returns {boolean}     True if match found in array\n     */\n    every: function (value, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.every(source, value);\n        }\n        return source.filter(function (v) {\n            return v === value;\n        }).length === source.length;\n    }\n};\nvar converters = Object.keys(list).map(function (name) {\n    return {\n        alias: name,\n        acceptList: true,\n        convert: list[name]\n    };\n});\n\nmodule.exports = converters;\n\n/***/ }),\n/* 33 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n/**\n * @typedef NodeHandler\n * @property {string} selector\n * @property {Function} handle\n */\n\n/**\n * @param {string | undefined} selector\n * @param {Function | NodeHandler } handler\n * @returns {NodeHandler}\n */\nvar normalize = function (selector, handler) {\n    if (!selector) {\n        selector = '*';\n    }\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(handler)) {\n        handler = {\n            selector: selector,\n            handle: handler\n        };\n    }\n\n    handler.selector = selector;\n    return handler;\n};\n\n/**\n * @param {string|HTMLElement|JQuery<HTMLElement>} toMatch\n * @param { {selector:string} } node\n * @returns {boolean}\n */\nvar match = function (toMatch, node) {\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isString\"])(toMatch)) {\n        return toMatch === node.selector;\n    }\n    return $(toMatch).is(node.selector);\n};\n\nvar nodeManager = {\n    list: [],\n\n    /**\n     * Add a new node handler\n     * @param  {string} selector jQuery-compatible selector to use to match nodes\n     * @param  {Function} handler  Handlers are new-able functions. They will be called with $el as context.? TODO: Think this through\n     * @returns {void}\n     */\n    register: function (selector, handler) {\n        this.list.unshift(normalize(selector, handler));\n    },\n\n    /**\n     * @param {string|HTMLElement|JQuery<HTMLElement>} selector\n     * @returns NodeHandler\n     */\n    getHandler: function (selector) {\n        return this.list.find(function (node) {\n            return match(selector, node);\n        });\n    },\n\n    replace: function (selector, handler) {\n        var index = void 0;\n        this.list.forEach(function (currentHandler, i) {\n            if (selector === currentHandler.selector) {\n                index = i;\n                return false;\n            }\n        });\n        this.list.splice(index, 1, normalize(selector, handler));\n    }\n};\n\n//bootstraps\nvar defaultHandlers = [__webpack_require__(34).default, __webpack_require__(11).default, __webpack_require__(12)];\ndefaultHandlers.reverse().forEach(function (handler) {\n    nodeManager.register(handler.selector, handler);\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (nodeManager);\n\n/***/ }),\n/* 34 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__default_input_node__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_config__);\n\n\n\nvar offAttr = __WEBPACK_IMPORTED_MODULE_1_config___default.a.attrs.checkboxOffValue;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__default_input_node__[\"default\"].extend({\n    propertyHandlers: [],\n\n    getUIValue: function () {\n        var $el = this.$el;\n        var offAttrVal = $el.attr(offAttr);\n        var offVal = offAttrVal && typeof offAttrVal !== 'undefined' ? offAttrVal : false;\n\n        var onAttrVal = $el.attr('value');\n        //attr = initial value, prop = current value\n        var onVal = onAttrVal && typeof onAttrVal !== 'undefined' ? $el.prop('value') : true;\n\n        var val = $el.is(':checked') ? onVal : offVal;\n        return val;\n    },\n    initialize: function () {\n        __WEBPACK_IMPORTED_MODULE_0__default_input_node__[\"default\"].prototype.initialize.apply(this, arguments);\n    }\n}, { selector: ':checkbox,:radio' }));\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _require = __webpack_require__(0),\n    extend = _require.extend,\n    has = _require.has;\n\nvar extendView = function (protoProps, staticProps) {\n    var me = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && has(protoProps, 'constructor')) {\n        child = protoProps.constructor;\n    } else {\n        child = function () {\n            return me.apply(this, arguments);\n        };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    extend(child, me, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function () {\n        this.constructor = child;\n    };\n    Surrogate.prototype = me.prototype;\n    child.prototype = new Surrogate();\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) {\n        extend(child.prototype, protoProps);\n    }\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = me.prototype; //eslint-disable-line no-underscore-dangle\n\n    return child;\n};\n\nvar View = function (options) {\n    this.$el = options.$el || $(options.el);\n    this.el = options.el;\n    this.initialize.apply(this, arguments);\n};\nextend(View.prototype, {\n    initialize: function () {}\n});\n\nView.extend = extendView;\n\nmodule.exports = View;\n\n/***/ }),\n/* 36 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\nvar defaultHandlers = [__webpack_require__(37).default, __webpack_require__(38).default, __webpack_require__(39).default, __webpack_require__(40).default, __webpack_require__(42).default, __webpack_require__(43).default, __webpack_require__(44).default, __webpack_require__(45).default, __webpack_require__(46).default, __webpack_require__(47).default, __webpack_require__(48).default, __webpack_require__(50).default];\n\nvar handlersList = [];\n\nvar normalize = function (attributeMatcher, nodeMatcher, handler) {\n    if (!nodeMatcher) {\n        nodeMatcher = '*';\n    }\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(handler)) {\n        handler = {\n            handle: handler\n        };\n    }\n    return $.extend(handler, { test: attributeMatcher, target: nodeMatcher });\n};\n\ndefaultHandlers.forEach(function (handler) {\n    handlersList.push(normalize(handler.test, handler.target, handler));\n});\n\nvar matchAttr = function (matchExpr, attr, $el) {\n    var attrMatch = void 0;\n\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isString\"])(matchExpr)) {\n        attrMatch = matchExpr === '*' || matchExpr.toLowerCase() === attr.toLowerCase();\n    } else if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(matchExpr)) {\n        //TODO: remove element selectors from attributes\n        attrMatch = matchExpr(attr, $el);\n    } else if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isRegExp\"])(matchExpr)) {\n        attrMatch = attr.match(matchExpr);\n    }\n    return attrMatch;\n};\n\nvar matchNode = function (target, nodeFilter) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isString\"])(nodeFilter) ? nodeFilter === target : nodeFilter.is(target);\n};\n\nvar attributeManager = {\n    list: handlersList,\n    /**\n     * Add a new attribute handler.\n     *\n     * @param  {string|Function|RegExp} attributeMatcher Description of which attributes to match.\n     * @param  {string|JQuery<HTMLElement>} nodeMatcher Which nodes to add attributes to. Use [jquery Selector syntax](https://api.jquery.com/category/selectors/).\n     * @param  {Function|Object} handler If `handler` is a function, the function is called with `$element` as context, and attribute value + name. If `handler` is an object, it should include two functions, and have the form: `{ init: fn,  handle: fn }`. The `init` function is called when the page loads; use this to define event handlers. The `handle` function is called with `$element` as context, and attribute value + name.\n     * @returns {void}\n     */\n    register: function (attributeMatcher, nodeMatcher, handler) {\n        handlersList.unshift(normalize.apply(null, arguments));\n    },\n\n    /**\n     * Find an attribute matcher matching some criteria.\n     *\n     * @param  {string} attrFilter Attribute to match.\n     * @param  {string|JQuery<HTMLElement>} nodeFilter Node to match.\n     *\n     * @returns {AttributeHandler[]} An array of matching attribute handlers, or null if no matches found.\n     */\n    filter: function (attrFilter, nodeFilter) {\n        var filtered = handlersList.filter(function (handler) {\n            return matchAttr(handler.test, attrFilter);\n        });\n        if (nodeFilter) {\n            filtered = filtered.filter(function (handler) {\n                return matchNode(handler.target, nodeFilter);\n            });\n        }\n        return filtered;\n    },\n\n    /**\n     * Replace an existing attribute handler.\n     *\n     * @param  {string} attrFilter Attribute to match.\n     * @param  {string|JQuery<HTMLElement>} nodeFilter Node to match.\n     * @param  {Function|Object} handler The updated attribute handler. If `handler` is a function, the function is called with `$element` as context, and attribute value + name. If `handler` is an object, it should include two functions, and have the form: `{ init: fn,  handle: fn }`. The `init` function is called when the page loads; use this to define event handlers. The `handle` function is called with `$element` as context, and attribute value + name.\n     * @returns {void}\n     */\n    replace: function (attrFilter, nodeFilter, handler) {\n        var index = void 0;\n        Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"each\"])(handlersList, function (currentHandler, i) {\n            if (matchAttr(currentHandler.test, attrFilter) && matchNode(currentHandler.target, nodeFilter)) {\n                index = i;\n                return false;\n            }\n        });\n        handlersList.splice(index, 1, normalize(attrFilter, nodeFilter, handler));\n    },\n\n    /**\n     *  Retrieve the appropriate handler for a particular attribute. There may be multiple matching handlers, but the first (most exact) match is always used.\n     *\n     * @param {string} attr The attribute.\n     * @param {string|JQuery<HTMLElement>} $el The DOM element.\n     *\n     * @returns {AttributeHandler|undefined} The attribute handler, if a matching one is found\n     */\n    getHandler: function (attr, $el) {\n        var filtered = this.filter(attr, $el);\n        //There could be multiple matches, but the top first has the most priority\n        return filtered[0];\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (attributeManager);\n\n/***/ }),\n/* 37 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n * @type AttributeHandler \n */\nvar noopAttr = {\n\n    target: '*',\n\n    test: /^(?:model|convert|channel|on-init)/i,\n\n    handle: function () {},\n    parse: function () {\n        return [];\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (noopAttr);\n\n/***/ }),\n/* 38 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__ = __webpack_require__(3);\n\n\n\nfunction eventNameFromAttr(attr) {\n    var eventName = attr.replace('on-', '');\n    var nameSpacedEvent = eventName + '.f-event';\n    return nameSpacedEvent;\n}\n/**\n * @type AttributeHandler \n */\nvar defaultEventAttr = {\n\n    target: '*',\n\n    test: function (attr) {\n        return attr.indexOf('on-') === 0;\n    },\n\n    unbind: function (attr, $el) {\n        var eventName = eventNameFromAttr(attr);\n        $el.off(eventName);\n    },\n\n    parse: function () {\n        return [];\n    }, //There's nothing to subscribe to on an event\n    handle: function () {},\n\n    init: function (attr, topics, $el) {\n        var matching = topics[0] && topics[0].name; //multiple topics aren't really relevant here\n        var eventName = eventNameFromAttr(attr);\n        $el.off(eventName).on(eventName, function (evt) {\n            evt.preventDefault();\n            var listOfOperations = Object(__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__[\"c\" /* toPublishableFormat */])(matching);\n            $el.trigger(__WEBPACK_IMPORTED_MODULE_0_config__[\"events\"].trigger, { data: listOfOperations, source: attr });\n        });\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (defaultEventAttr);\n\n/***/ }),\n/* 39 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__loop_attr_utils__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_utils_animation__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__ = __webpack_require__(10);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\n\n\n\nvar elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\n/**\n * @type AttributeHandler\n */\nvar foreachAttr = {\n\n    test: 'foreach',\n\n    target: '*',\n\n    unbind: function (attr, $el) {\n        var el = $el.get(0);\n        elAnimatedMap.delete(el);\n\n        var template = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el);\n        var current = $el.html();\n        if (template && current !== template) {\n            $el.html(template);\n        }\n        Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"b\" /* clearOriginalContents */])($el);\n        Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"g\" /* removeKnownData */])($el);\n    },\n\n    parse: function (topics) {\n        return Object(__WEBPACK_IMPORTED_MODULE_2__loop_attr_utils__[\"b\" /* parseTopics */])(topics);\n    },\n\n    handle: function (value, prop, $el, topics) {\n        value = $.isPlainObject(value) ? value : [].concat(value);\n\n        var _aliasesFromTopics = Object(__WEBPACK_IMPORTED_MODULE_2__loop_attr_utils__[\"a\" /* aliasesFromTopics */])(topics, value),\n            keyAlias = _aliasesFromTopics.keyAlias,\n            valueAlias = _aliasesFromTopics.valueAlias;\n\n        var originalHTML = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el, function ($el) {\n            return $el.html();\n        });\n        var knownData = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"d\" /* getKnownDataForEl */])($el);\n        var missingReferences = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"c\" /* findMissingReferences */])(originalHTML, [keyAlias, valueAlias].concat(Object.keys(knownData)));\n        var stubbedTemplate = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"h\" /* stubMissingReferences */])(originalHTML, missingReferences);\n\n        var templateFn = Object(__WEBPACK_IMPORTED_MODULE_4_lodash__[\"template\"])(stubbedTemplate);\n        var $dummyEl = $('<div></div>');\n        Object(__WEBPACK_IMPORTED_MODULE_4_lodash__[\"each\"])(value, function (dataval, datakey) {\n            var _$$extend;\n\n            if (dataval === undefined || dataval === null) {\n                dataval = dataval + ''; //convert undefineds to strings\n            }\n            var templateData = $.extend(true, {}, knownData, (_$$extend = {}, _defineProperty(_$$extend, keyAlias, datakey), _defineProperty(_$$extend, valueAlias, dataval), _$$extend));\n\n            var nodes = void 0;\n            var isTemplated = void 0;\n            try {\n                var templated = templateFn(templateData);\n                var templatedWithReferences = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"a\" /* addBackMissingReferences */])(templated, missingReferences);\n                isTemplated = templatedWithReferences !== stubbedTemplate;\n                nodes = $(templatedWithReferences);\n            } catch (e) {\n                //you don't have all the references you need;\n                nodes = $(stubbedTemplate);\n                isTemplated = true;\n                Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"i\" /* updateKnownDataForEl */])($(nodes), templateData);\n            }\n\n            nodes.each(function (i, newNode) {\n                var $newNode = $(newNode);\n                Object(__WEBPACK_IMPORTED_MODULE_4_lodash__[\"each\"])($newNode.data(), function (val, key) {\n                    $newNode.data(key, Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__[\"b\" /* toImplicitType */])(val));\n                });\n                if (!isTemplated && !$newNode.html().trim()) {\n                    $newNode.html(dataval);\n                }\n            });\n            $dummyEl.append(nodes);\n        });\n\n        var el = $el.get(0);\n        var isInitialAnim = !elAnimatedMap.get(el);\n        var $withAnimAttrs = Object(__WEBPACK_IMPORTED_MODULE_3_utils_animation__[\"a\" /* addChangeClassesToList */])($el.children(), $dummyEl.children(), isInitialAnim, __WEBPACK_IMPORTED_MODULE_1_config__[\"animation\"]);\n        $el.empty().append($withAnimAttrs);\n\n        elAnimatedMap.set(el, true);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (foreachAttr);\n\n/***/ }),\n/* 40 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_utils_general__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_utils_animation__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__loop_attr_utils__ = __webpack_require__(13);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\nvar templateIdAttr = __WEBPACK_IMPORTED_MODULE_3_config__[\"attrs\"].repeat.templateId;\n\n\n\nvar elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\n\n\n\n\n/**\n * @type AttributeHandler \n */\nvar loopAttrHandler = {\n    test: 'repeat',\n\n    target: '*',\n\n    unbind: function (attr, $el) {\n        var id = $el.data(templateIdAttr);\n        if (id) {\n            $el.nextUntil(':not([data-' + id + '])').remove();\n            // $el.removeAttr('data-' + templateIdAttr); //FIXME: Something about calling rebind multiple times in IB makes this happen without the removal\n        }\n\n        var el = $el.get(0);\n        elAnimatedMap.delete(el);\n\n        var originalHTML = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el);\n        var current = $el.get(0).outerHTML;\n        if (originalHTML && current !== originalHTML) {\n            $el.replaceWith(originalHTML);\n        }\n        Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"b\" /* clearOriginalContents */])($el);\n        Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"g\" /* removeKnownData */])($el);\n    },\n\n    parse: function (topics) {\n        return Object(__WEBPACK_IMPORTED_MODULE_6__loop_attr_utils__[\"b\" /* parseTopics */])(topics);\n    },\n\n    init: function (attr, value, $el) {},\n\n    handle: function (value, prop, $el, topics) {\n        value = $.isPlainObject(value) ? value : [].concat(value);\n        var id = $el.data(templateIdAttr);\n\n        $el.removeAttr('hidden');\n        var originalHTML = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el, function ($el) {\n            return $el.get(0).outerHTML;\n        });\n\n        var $dummyOldDiv = $('<div></div>');\n        if (id) {\n            var $removed = $el.nextUntil(':not([data-' + id + '])').remove();\n            $dummyOldDiv.append($removed);\n        } else {\n            id = Object(__WEBPACK_IMPORTED_MODULE_2_utils_general__[\"c\" /* random */])('repeat-');\n            $el.attr('data-' + templateIdAttr, id);\n        }\n\n        var _aliasesFromTopics = Object(__WEBPACK_IMPORTED_MODULE_6__loop_attr_utils__[\"a\" /* aliasesFromTopics */])(topics, value),\n            keyAlias = _aliasesFromTopics.keyAlias,\n            valueAlias = _aliasesFromTopics.valueAlias;\n\n        var knownData = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"d\" /* getKnownDataForEl */])($el);\n        var missingReferences = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"c\" /* findMissingReferences */])(originalHTML, [keyAlias, valueAlias].concat(Object.keys(knownData)));\n        var stubbedTemplate = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"h\" /* stubMissingReferences */])(originalHTML, missingReferences);\n\n        if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isEmpty\"])(value)) {\n            $el.attr('hidden', true); //There's always going to be 1 el otherwise\n            return;\n        }\n\n        var templateFn = Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"template\"])(stubbedTemplate);\n        var last = void 0;\n        Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"each\"])(value, function (dataval, datakey) {\n            var _$$extend;\n\n            if (dataval === undefined || dataval === null) {\n                dataval = dataval + ''; //convert undefineds to strings\n            }\n            var templateData = $.extend(true, {}, knownData, (_$$extend = {}, _defineProperty(_$$extend, keyAlias, datakey), _defineProperty(_$$extend, valueAlias, dataval), _$$extend));\n\n            var nodes = void 0;\n            var isTemplated = void 0;\n            try {\n                var templated = templateFn(templateData);\n                var templatedWithReferences = Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"a\" /* addBackMissingReferences */])(templated, missingReferences);\n                isTemplated = templatedWithReferences !== stubbedTemplate;\n                nodes = $(templatedWithReferences);\n            } catch (e) {\n                //you don't have all the references you need;\n                nodes = $(stubbedTemplate);\n                isTemplated = true;\n                Object(__WEBPACK_IMPORTED_MODULE_5_dom_attribute_manager_attr_template_utils__[\"i\" /* updateKnownDataForEl */])($(nodes), templateData);\n            }\n\n            var hasData = dataval !== null && dataval !== undefined;\n            nodes.each(function (i, newNode) {\n                var $newNode = $(newNode);\n                $newNode.removeAttr('data-f-repeat').removeAttr('data-' + templateIdAttr);\n                Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"each\"])($newNode.data(), function (val, key) {\n                    if (!last) {\n                        $el.data(key, Object(__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__[\"b\" /* toImplicitType */])(val));\n                    } else {\n                        $newNode.data(key, Object(__WEBPACK_IMPORTED_MODULE_1_utils_parse_utils__[\"b\" /* toImplicitType */])(val));\n                    }\n                });\n                $newNode.attr('data-' + id, true);\n                if (!isTemplated && !$newNode.children().length && hasData) {\n                    $newNode.html(dataval + '');\n                }\n            });\n            if (!last) {\n                last = $el.html(nodes.html());\n            } else {\n                last = nodes.insertAfter(last);\n            }\n        });\n\n        var $newEls = $el.nextUntil(':not(\\'[data-' + id + ']\\')');\n\n        var el = $el.get(0);\n        var isInitialAnim = !elAnimatedMap.get(el);\n        Object(__WEBPACK_IMPORTED_MODULE_4_utils_animation__[\"a\" /* addChangeClassesToList */])($dummyOldDiv.children(), $newEls, isInitialAnim, __WEBPACK_IMPORTED_MODULE_3_config__[\"animation\"]);\n\n        elAnimatedMap.set(el, true);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (loopAttrHandler);\n\n/***/ }),\n/* 41 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = debounceAndMerge;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__promise_utils__ = __webpack_require__(14);\n\n\nfunction executeAndResolve(fn, args, $def) {\n    var promisifiedFn = Object(__WEBPACK_IMPORTED_MODULE_0__promise_utils__[\"b\" /* promisify */])(fn);\n    return promisifiedFn.apply(fn, args).then(function (result) {\n        $def.resolve(result);\n    }, function (e) {\n        $def.reject(e);\n    });\n}\n\n/**\n * Returns debounced version of original (optionally promise returning) function\n * \n * @param {function(*):Promise} fn function to debounce\n * @param {number} debounceInterval \n * @param {Function[]} [argumentsReducers] pass in 1 reducer for each option your function takes\n * @returns {Function} debounced function\n */\nfunction debounceAndMerge(fn, debounceInterval, argumentsReducers) {\n    if (!argumentsReducers) {\n        var arrayReducer = function (accum, newVal) {\n            return (accum || []).concat(newVal);\n        };\n        argumentsReducers = [arrayReducer];\n    }\n\n    var queue = [];\n    var timer = null;\n\n    function mergeArgs(oldArgs, newArgs) {\n        var merged = newArgs.map(function (newArg, index) {\n            var reducer = argumentsReducers[index];\n            if (reducer) {\n                return reducer(oldArgs[index], newArg);\n            }\n            return newArg;\n        });\n        return merged;\n    }\n\n    /**\n     * @returns {Promise}\n     */\n    return function debouncedFunction() {\n        var newArgs = Array.prototype.slice.call(arguments);\n        if (timer) {\n            clearTimeout(timer);\n            var mergedArgs = mergeArgs(queue[0].args, newArgs);\n            queue[0].args = mergedArgs;\n        } else {\n            var args = mergeArgs([], newArgs);\n            queue.push({\n                $def: $.Deferred(),\n                args: args\n            });\n        }\n\n        timer = setTimeout(function () {\n            timer = null;\n            var item = queue.pop();\n            executeAndResolve(fn, item.args, item.$def);\n        }, debounceInterval);\n\n        return queue[0].$def.promise();\n    };\n}\n\n/***/ }),\n/* 42 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\nvar elClassesMap = new WeakMap();\nfunction deleteAddedClasses($el) {\n    var el = $el.get(0);\n    var addedClasses = elClassesMap.get(el);\n    if (addedClasses) {\n        $el.removeClass(addedClasses);\n    }\n}\n/**\n * @type AttributeHandler\n */\nvar classAttr = {\n    test: 'class',\n\n    target: '*',\n\n    unbind: function (attr, $el) {\n        var el = $el.get(0);\n        deleteAddedClasses($el);\n        elClassesMap.delete(el);\n    },\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n\n        var el = $el.get(0);\n        deleteAddedClasses($el);\n\n        if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isNumber\"])(value)) {\n            value = 'value-' + value;\n        }\n        setTimeout(function () {\n            $el.addClass(value); //If the classes have an animation set, removing with a timeout will trigger it\n        }, 0);\n        elClassesMap.set(el, value);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (classAttr);\n\n/***/ }),\n/* 43 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n * @type AttributeHandler \n */\nvar booleanAttrHandler = {\n    target: '*',\n\n    test: /^(?:checked|selected|async|autofocus|autoplay|controls|defer|ismap|loop|multiple|open|required|scoped|disabled|hidden|readonly)$/i,\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        var val = $el.attr('value') ? value == $el.prop('value') : !!value; //eslint-disable-line eqeqeq\n        $el.prop(prop, val);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (booleanAttrHandler);\n\n/***/ }),\n/* 44 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n  * @type AttributeHandler\n  */\nvar showifHandler = {\n    test: 'showif',\n\n    target: '*',\n\n    init: function (attr, value, $el) {\n        $el.hide(); //hide by default; if not this shows text until data is fetched\n    },\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        return value && ('' + value).trim() ? $el.show() : $el.hide();\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (showifHandler);\n\n/***/ }),\n/* 45 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n  * @type AttributeHandler\n  */\nvar hideifHandler = {\n    test: 'hideif',\n\n    target: '*',\n\n    init: function (attr, value, $el) {\n        $el.hide(); //hide by default; if not this shows text until data is fetched\n    },\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        if (value && ('' + value).trim()) {\n            $el.hide();\n        } else {\n            $el.show();\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (hideifHandler);\n\n/***/ }),\n/* 46 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n  * @type {AttributeHandler}\n  */\nvar checkboxAttrHandler = {\n\n    target: ':checkbox,:radio',\n\n    test: 'bind',\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        var settableValue = $el.attr('value'); //initial value\n        var isChecked = typeof settableValue !== 'undefined' ? settableValue == value : !!value; //eslint-disable-line eqeqeq\n        $el.prop('checked', isChecked);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (checkboxAttrHandler);\n\n/***/ }),\n/* 47 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n * @type AttributeHandler \n */\nvar inputBindAttr = {\n    target: 'input, select, textarea',\n\n    test: 'bind',\n\n    handle: function (value, prop, $el) {\n        if ($el.is(':focus')) {\n            return; //If an user is actively typing in a value, don't overwrite it\n        }\n        if (value === undefined) {\n            value = '';\n        } else if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        $el.val(value + '');\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (inputBindAttr);\n\n/***/ }),\n/* 48 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_utils_animation__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_config__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_config___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_config__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__bind_utils__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__ = __webpack_require__(10);\n\n\n\n\n\n\n\n\nvar elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\nfunction toAliasMap(topics) {\n    return (topics || []).reduce(function (accum, topic) {\n        accum[topic.name] = topic.alias;\n        return accum;\n    }, {});\n}\n\nfunction getNewContent(currentContents, value, $el, topics) {\n    if (!Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"f\" /* isTemplated */])(currentContents)) {\n        return Object(__WEBPACK_IMPORTED_MODULE_3__bind_utils__[\"c\" /* translateDataToInsertable */])(value);\n    }\n\n    var templateData = Object(__WEBPACK_IMPORTED_MODULE_3__bind_utils__[\"d\" /* translateDataToTemplatable */])(value, toAliasMap(topics));\n    var knownData = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"d\" /* getKnownDataForEl */])($el);\n    $.extend(templateData, knownData);\n\n    var missingReferences = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"c\" /* findMissingReferences */])(currentContents, Object.keys(templateData));\n    var stubbedTemplate = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"h\" /* stubMissingReferences */])(currentContents, missingReferences);\n\n    var templateFn = Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"template\"])(stubbedTemplate);\n    try {\n        var templatedHTML = templateFn(templateData);\n        var templatedWithReferences = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"a\" /* addBackMissingReferences */])(templatedHTML, missingReferences);\n        return templatedWithReferences;\n    } catch (e) {\n        //you don't have all the references you need;\n        Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"i\" /* updateKnownDataForEl */])($el, templateData);\n        return currentContents;\n    }\n}\n\n/**\n * @type AttributeHandler \n */\nvar bindAttrHandler = {\n\n    target: '*',\n\n    test: 'bind',\n\n    parse: function (topics) {\n        return topics.map(function (topic) {\n            var attrVal = topic.name;\n            return {\n                name: Object(__WEBPACK_IMPORTED_MODULE_3__bind_utils__[\"b\" /* extractVariableName */])(attrVal),\n                alias: Object(__WEBPACK_IMPORTED_MODULE_3__bind_utils__[\"a\" /* extractAlias */])(attrVal)\n            };\n        });\n    },\n\n    //FIXME: Can't do this because if you have a bind within a foreach, foreach overwrites the old el with a new el, and at that points contents are lost\n    // But if i don't do this the <%= %> is going to show up\n    // init: function (attr, value, $el) {\n    //     const contents = getOriginalContents($el, ($el)=> $el.html());\n    //     if (isTemplated(contents)) {\n    //         $el.empty();\n    //     }\n    // },\n\n    unbind: function (attr, $el) {\n        var el = $el.get(0);\n        elAnimatedMap.delete(el);\n\n        var bindTemplate = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el);\n        var current = $el.html();\n        if (bindTemplate && current !== bindTemplate) {\n            $el.html(bindTemplate);\n        }\n        Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"b\" /* clearOriginalContents */])($el);\n        Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"g\" /* removeKnownData */])($el);\n    },\n\n    handle: function (value, prop, $el, topics) {\n        var el = $el.get(0);\n        var originalContents = Object(__WEBPACK_IMPORTED_MODULE_4_dom_attribute_manager_attr_template_utils__[\"e\" /* getOriginalContents */])($el, function ($el) {\n            return $el.html();\n        });\n        var contents = getNewContent(originalContents, value, $el, topics);\n\n        Object(__WEBPACK_IMPORTED_MODULE_1_utils_animation__[\"b\" /* addContentAndAnimate */])($el, contents, !elAnimatedMap.has(el), __WEBPACK_IMPORTED_MODULE_2_config__[\"animation\"]);\n        elAnimatedMap.set(el, true);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (bindAttrHandler);\n\n/***/ }),\n/* 49 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = translateDataToInsertable;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = translateDataToTemplatable;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = extractVariableName;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = extractAlias;\nfunction translateDataToInsertable(value) {\n    if (Array.isArray(value)) {\n        value = value[value.length - 1];\n    }\n    value = $.isPlainObject(value) ? JSON.stringify(value) : value + '';\n    return value;\n}\n\n/**\n * @param {any} value\n * @param {Object} aliasMap\n * @returns {{value: any}}\n */\nfunction translateDataToTemplatable(value, aliasMap) {\n    var templateData = { value: value };\n    if ($.isPlainObject(value)) {\n        Object.keys(value).forEach(function (originalName) {\n            var alias = aliasMap[originalName] || originalName;\n            templateData[alias] = value[originalName];\n        });\n    } else {\n        Object.keys(aliasMap).forEach(function (originalName) {\n            var alias = aliasMap[originalName] || originalName;\n            templateData[alias] = value;\n        });\n    }\n\n    return templateData;\n}\n\nvar AS_REGEX = /(.*) (?:as)\\s+\\((.*)\\)/;\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nfunction extractVariableName(attrVal) {\n    var asMatch = attrVal.trim().match(AS_REGEX);\n    var varName = asMatch && asMatch[1] ? asMatch[1] : attrVal;\n    return varName.trim();\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nfunction extractAlias(attrVal) {\n    var asMatch = attrVal.trim().match(AS_REGEX);\n    var alias = asMatch && asMatch[2] ? asMatch[2] : attrVal;\n    return alias.trim();\n}\n\n/***/ }),\n/* 50 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/**\n * @type AttributeHandler \n */\nvar defaultAttr = {\n    test: '*',\n\n    target: '*',\n\n    handle: function (value, prop, $el) {\n        //FIXME: The _right_ way to do this would be to set attr, not prop. \n        //However Polymer 1.0 doesn't link attrs with stringified JSON, and that's really the primary use-case for this, so, ignoring\n        //However Polymer is fine with 'data-X' attrs having stringified JSON. Eventually we should make this attr and fix polymer\n        //but can't do that for backwards comptability reason. See commit bbc4a49039fb73faf1ef591a07b371d7d667cf57\n        $el.prop(prop, value);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (defaultAttr);\n\n/***/ }),\n/* 51 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/**\n * Hooks up dom elements to mutation observer\n * @param  {HTMLElement} target     root to start observing from\n * @param  {Object} domManager \n * @param  {boolean} isEnabled Determines if it's enabled by default\n * @returns {Object}\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (target, domManager, isEnabled) {\n    if (typeof MutationObserver === 'undefined') {\n        return;\n    }\n    // Create an observer instance\n    var observer = new MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n            var added = $(mutation.addedNodes).find(':f');\n            added = added.add($(mutation.addedNodes).filter(':f'));\n            var removed = $(mutation.removedNodes).find(':f');\n            removed = removed.add($(mutation.removedNodes).filter(':f'));\n            if (added && added.length) {\n                domManager.bindAll(added);\n            }\n            if (removed && removed.length) {\n                domManager.unbindAll(removed);\n            }\n            if (mutation.attributeName === 'data-f-channel') {\n                domManager.unbindAll(mutation.target);\n                domManager.bindAll(mutation.target);\n            }\n        });\n    });\n    var mutconfig = {\n        attributes: true,\n        attributeFilter: ['data-f-channel'],\n        childList: true,\n        subtree: true,\n        characterData: false\n    };\n    var publicApi = {\n        enable: function () {\n            observer.observe(target, mutconfig);\n        },\n        disable: function () {\n            observer.disconnect();\n        }\n    };\n    if (isEnabled) {\n        publicApi.enable();\n    }\n    return publicApi;\n});\n\n/***/ }),\n/* 52 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChannelManager;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__channel_manager__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_router__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__route_handlers__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__ = __webpack_require__(77);\n\n\n\n\n\n\n//Moving connecting glue here so channel-manager can be tested in isolation\nvar InterpolatableRoutableChannelManager = Object(__WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__[\"a\" /* interpolatable */])(Object(__WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__[\"b\" /* routable */])(__WEBPACK_IMPORTED_MODULE_0__channel_manager__[\"a\" /* default */], __WEBPACK_IMPORTED_MODULE_1_channels_channel_router__[\"a\" /* default */]));\nfunction ChannelManager(opts) {\n    var defaultRouteHandlers = [__WEBPACK_IMPORTED_MODULE_2__route_handlers__[\"c\" /* JSONRouteHandler */], __WEBPACK_IMPORTED_MODULE_2__route_handlers__[\"a\" /* DomRouteHandler */], __WEBPACK_IMPORTED_MODULE_2__route_handlers__[\"b\" /* EpicenterRouteHandler */]];\n    var routes = opts && opts.routes ? opts.routes : [];\n    var cm = new InterpolatableRoutableChannelManager($.extend(true, {}, {\n        routes: [].concat(routes, defaultRouteHandlers)\n    }, opts));\n    return cm;\n}\n\n/***/ }),\n/* 53 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n/**\n * \n * @param {Array<string>|string} topics \n * @param {Function} callback \n * @param {Object} options\n * @returns {Subscription}\n */\nfunction makeSubs(topics, callback, options) {\n    var id = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniqueId\"])('subs-');\n    var defaults = {\n        /**\n         * Determines if the callback function is called per item or per subscription.\n         *\n         * If `false`, the callback function is called once for each item to which you are subscribing. If `true`, the callback function is called only once, no matter how many items you have subscribed to. Defaults to `false`.\n         * @type {Boolean}\n         */\n        batch: false,\n\n        /**\n         * Determines if the last published data should be cached for future notifications. For example:\n         *\n         *      channel.subscribe(['price', 'cost'], callback1, { batch: true, cache: false });\n         *      channel.subscribe(['price', 'cost'], callback2, { batch: true, cache: true });\n         *\n         *      channel.publish({ 'price': 1 });\n         *      channel.publish({ 'cost': 1 });\n         *\n         * Here, `callback2` is called once, and `callback1` is not called: The channel caches the first publish value and notifies after all dependent topics have data.\n         *\n         * If the `publish()` call was instead:\n         *\n         *      channel.publish({ price: 1, cost: 1 })\n         *\n         * Then both `callback1` and `callback2` are called.\n         *\n         * Setting `cache: true` is useful if you know if your topics will be published individually, but you still want to handle them together. As a concrete example, consider a slider with a chart: the input values, determined by the slider, should not cause the chart to redraw immediately. The chart could wait until all sliders have been updated a checkbox is checked, for example.\n         * Setting `cache: false` is useful if you know if your topics will *always* be published together and they'll be called at the same time.\n         *\n         * Note this has no discernible effect if `batch` is `false`. Additionally, this has no discernible effect if `variables` are \"noisy\" (`silent: true`).\n         * @type {Boolean}\n         */\n        cache: true\n    };\n    var opts = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend({}, defaults, options);\n    if (!callback || !Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"isFunction\"])(callback)) {\n        throw new Error('subscribe callback should be a function');\n    }\n    return __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend(true, {\n        id: id,\n        topics: [].concat(topics),\n        callback: callback\n    }, opts);\n}\n\nvar cacheBySubsId = {};\nvar sentDataBySubsId = {};\n\nfunction copy(data) {\n    if (Array.isArray(data)) {\n        return data.map(function (d) {\n            return copy(d);\n        });\n    } else if (__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.isPlainObject(data)) {\n        return Object.keys(data).reduce(function (accum, key) {\n            accum[key] = copy(data[key]);\n            return accum;\n        }, {});\n    }\n    return data;\n}\n/**\n* @param {Subscription} subscription \n* @param {*} data\n*/\nfunction callbackSubscriber(subscription, data) {\n    var id = subscription.id;\n    subscription.callback(data, { id: id, previousData: sentDataBySubsId[id] });\n    sentDataBySubsId[id] = copy(data);\n}\n\n/**\n* @param {Publishable[]} topics\n* @param {Subscription} subscription \n*/\nfunction checkAndNotifyBatch(topics, subscription) {\n    var publishData = Object(__WEBPACK_IMPORTED_MODULE_1__channel_utils__[\"c\" /* publishableToObject */])(topics);\n    var matchingTopics = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"intersection\"])(Object.keys(publishData), subscription.topics);\n    if (!matchingTopics.length) {\n        return;\n    }\n\n    var relevantDataFromPublish = matchingTopics.reduce(function (accum, topic) {\n        accum[topic] = publishData[topic];\n        return accum;\n    }, {});\n    var cachedDataForSubs = cacheBySubsId[subscription.id] || {};\n    var knownDataForSubs = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend({}, cachedDataForSubs, relevantDataFromPublish); //jQ Deep clone here will also concat arrays.\n\n    if (subscription.cache) {\n        cacheBySubsId[subscription.id] = knownDataForSubs;\n    }\n    var hasDataForAllTopics = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"intersection\"])(Object.keys(knownDataForSubs), subscription.topics).length === subscription.topics.length;\n    if (hasDataForAllTopics) {\n        callbackSubscriber(subscription, knownDataForSubs);\n    }\n}\n\n/**\n * @param {Publishable[]} topics\n * @param {Subscription} subscription \n */\nfunction checkAndNotify(topics, subscription) {\n    topics.forEach(function (topic) {\n        var needsThisTopic = subscription.topics.indexOf(topic.name) !== -1;\n        var isWildCard = subscription.topics.indexOf('*') !== -1;\n        if (needsThisTopic || isWildCard) {\n            callbackSubscriber(subscription, _defineProperty({}, topic.name, topic.value));\n        }\n    });\n}\n\n/**\n* @param {Subscription[]} subcriptionList\n* @returns {Array<string>}\n*/\nfunction getTopicsFromSubsList(subcriptionList) {\n    return subcriptionList.reduce(function (accum, subs) {\n        accum = accum.concat(subs.topics);\n        return accum;\n    }, []);\n}\n\n/**\n * @class ChannelManager\n */\n\nvar ChannelManager = function () {\n    function ChannelManager(options) {\n        _classCallCheck(this, ChannelManager);\n\n        this.subscriptions = [];\n    }\n\n    /**\n     * Perform the action (for example, update the variables or call the operation), and alert subscribers.\n     *\n     * **Examples**\n     *\n     *      Flow.channel.publish('operations:myOperation', myOperParam);\n     *      Flow.channel.publish({ name: 'operations:operName', value: [operParam1, operParam2] });\n     *\n     *      Flow.channel.publish('variables:myVariable', newValue);\n     *      Flow.channel.publish({ myVar1: newVal1, myVar2: newVal2 });\n     *\n     * @param {string|Publishable} topic\n     * @param {any} [value] item to publish\n     * @param {PublishOptions} [options]\n     * @returns {Promise}\n     */\n\n\n    _createClass(ChannelManager, [{\n        key: 'publish',\n        value: function publish(topic, value, options) {\n            var _this = this;\n\n            var normalized = Object(__WEBPACK_IMPORTED_MODULE_1__channel_utils__[\"a\" /* normalizeParamOptions */])(topic, value, options);\n            var prom = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.Deferred().resolve(normalized.params).promise();\n            prom = prom.then(function (publishResponses) {\n                _this.notify(publishResponses, options);\n                return publishResponses;\n            });\n            return prom;\n        }\n\n        /**\n         * Alert each subscriber about the operation and its parameters. This can be used to provide an update without a round trip to the server. However, it is rarely used: you almost always want to `subscribe()` instead so that the model is actually changed (has a variable update or an operation called).\n         *\n         * **Example**\n         *\n         *      Flow.channel.notify('variables:myVariable', newValue);\n         *      Flow.channel.notify('operations:myOperation', myOperParam);\n         *\n         * @param {string|Publishable} topic\n         * @param {any} [value] item to publish\n         * @param {PublishOptions} [options]\n         * @returns {void}\n         */\n\n    }, {\n        key: 'notify',\n        value: function notify(topic, value, options) {\n            var normalized = Object(__WEBPACK_IMPORTED_MODULE_1__channel_utils__[\"a\" /* normalizeParamOptions */])(topic, value, options);\n            // console.log('notify', normalized.params);\n            this.subscriptions.forEach(function (subs) {\n                var fn = subs.batch ? checkAndNotifyBatch : checkAndNotify;\n                fn(normalized.params, subs);\n            });\n        }\n\n        /**\n         * Subscribe to changes on a channel: Ask for notification when variables are updated, or when operations are called.\n         *\n         * **Examples**\n         *       Flow.channel.subscribe('variables:myVariable',\n         *          function() { console.log('updated!'); } );\n         *\n         *       Flow.channel.subscribe('operations:myOperation',\n         *          function() { console.log('called!'); } );\n         *\n         * @param {Array<string>|string} topics\n         * @param {Function} cb\n         * @param {Object} [options]\n         * @returns {string}\n         */\n\n    }, {\n        key: 'subscribe',\n        value: function subscribe(topics, cb, options) {\n            var subs = makeSubs(topics, cb, options);\n            delete cacheBySubsId[subs.id]; //Just in case subsid is being reused\n            delete sentDataBySubsId[subs.id];\n            this.subscriptions = this.subscriptions.concat(subs);\n            return subs.id;\n        }\n\n        /**\n         * Stop receiving notification when a variable is updated or an operation is called.\n         *\n         * @param {string} token The identifying token for this subscription. (Created and returned by the `subscribe()` call.)\n         */\n\n    }, {\n        key: 'unsubscribe',\n        value: function unsubscribe(token) {\n            var olderLength = this.subscriptions.length;\n            var remaining = this.subscriptions.filter(function (subs) {\n                return subs.id !== token;\n            });\n            if (remaining.length === olderLength) {\n                throw new Error('No subscription found for token ' + token);\n            }\n            delete cacheBySubsId[token];\n            delete sentDataBySubsId[token];\n            this.subscriptions = remaining;\n        }\n\n        /**\n         * Stop receiving notifications for all operations. No parameters.\n         *\n         * @returns {void} No return value.\n         */\n\n    }, {\n        key: 'unsubscribeAll',\n        value: function unsubscribeAll() {\n            cacheBySubsId = {};\n            sentDataBySubsId = {};\n            this.subscriptions = [];\n        }\n\n        /**\n         * View all topics currently subscribed to for this channel.\n         * @returns {Array<string>} List of topics. \n         */\n\n    }, {\n        key: 'getSubscribedTopics',\n        value: function getSubscribedTopics() {\n            var list = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniq\"])(getTopicsFromSubsList(this.subscriptions));\n            return list;\n        }\n\n        /**\n         *  View everything currently subscribed to this topic.\n         * \n         * @param {string} [topic] topic to filter by\n         * @returns {Subscription[]}\n         */\n\n    }, {\n        key: 'getSubscribers',\n        value: function getSubscribers(topic) {\n            if (!topic) {\n                return this.subscriptions;\n            }\n            return this.subscriptions.filter(function (subs) {\n                return subs.topics.indexOf(topic) !== -1;\n            });\n        }\n    }]);\n\n    return ChannelManager;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ChannelManager);\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports) {\n\nmodule.exports = jQuery;\n\n/***/ }),\n/* 55 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export findBestHandler */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = groupByHandlers;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = groupSequentiallyByHandlers;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = normalizeSubscribeResponse;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\n/**\n * @param {string} topic\n * @param {Handler[]} handlers\n * @param {any} [matchOptions] options to pass on to matcher\n * @returns {Handler | undefined}\n */\nfunction findBestHandler(topic, handlers, matchOptions) {\n    for (var i = 0; i < handlers.length; i++) {\n        var thishandler = handlers[i];\n        var match = thishandler.match(topic, matchOptions);\n        if (match !== false) {\n            return $.extend(true, {}, thishandler, { matched: match });\n        }\n    }\n    return undefined;\n}\n\n/**\n * [groupByHandlers description]\n * @param  {Array<string>} topics   List of topics to match. Format can be anything your handler.match function handles\n * @param  {Handler[]} handlers Handlers of type [{ match: func }]\n * @returns {HandlerWithTopics[]} The handler array with each item now having an additional 'data' attr added to it with the matching topics\n */\nfunction groupByHandlers(topics, handlers) {\n    handlers = handlers.map(function (h, index) {\n        h.key = index;\n        return h;\n    });\n    var topicMapping = [].concat(topics).reduce(function (accum, topic) {\n        var bestHandler = findBestHandler(topic, handlers);\n        if (bestHandler) {\n            //if handler matches different strings treat both as different handlers\n            var key = bestHandler.key + bestHandler.matched;\n            if (!accum[key]) {\n                bestHandler.data = [];\n                accum[key] = bestHandler;\n            }\n            accum[key].data.push(topic);\n        }\n        return accum;\n    }, {});\n    return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.values(topicMapping);\n}\n\n/**\n * Takes a `publish` dataset and groups it by handler maintaining the data sequence\n * @param  {Publishable[]} data     Of the form [{ name: 'X', }]\n * @param  {Handler[]} handlers Handlers of type [{ match: func }]\n * @returns {HandlerWithData[]} The handler array with each item now having an additional 'data' attr added to it with the publishable data\n */\nfunction groupSequentiallyByHandlers(data, handlers) {\n    handlers = handlers.map(function (h, index) {\n        h.key = index;\n        return h;\n    });\n    var grouped = data.reduce(function (accum, dataPt) {\n        var lastHandler = accum[accum.length - 1];\n        var bestHandler = findBestHandler(dataPt.name, handlers, true);\n        if (bestHandler) {\n            if (lastHandler && bestHandler.key === lastHandler.key) {\n                lastHandler.data.push(dataPt);\n            } else {\n                accum.push($.extend({}, bestHandler, { data: [dataPt] }));\n            }\n        } else {\n            accum.push({ data: [dataPt], matched: false });\n        }\n        return accum;\n    }, []);\n    return grouped;\n}\n\n/**\n * @param {any} response \n * @param {string[]} topics \n * @returns {Publishable[]}\n */\nfunction normalizeSubscribeResponse(response, topics) {\n    // @ts-ignore\n    if (response === undefined) {\n        return [];\n    }\n    var isAlreadyInPublishableFormat = Array.isArray(response) && (!response.length || response[0].name !== undefined);\n    if (isAlreadyInPublishableFormat) {\n        return response;\n    }\n    if (typeof response === 'object' && !Array.isArray(response)) {\n        return topics.reduce(function (accum, t) {\n            accum.push({ name: t, value: response[t] });\n            return accum;\n        }, []);\n    }\n    if (topics.length === 1) {\n        //it's not in a publishable format, so someone just returned a string or something\n        var name = topics[0];\n        return [{ name: name, value: response }];\n    }\n    throw new Error('unrecognized subscribe response format');\n}\n\n/***/ }),\n/* 56 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = silencable;\n/**\n * @param {Publishable[]} published \n * @param {boolean|Array<string>|{except: Array<string>}} [silentOptions]\n * @returns {Publishable[]} filtered list\n */\nfunction silencable(published, silentOptions) {\n    if (silentOptions === true || !published) {\n        return [];\n    } else if (Array.isArray(silentOptions)) {\n        return published.filter(function (data) {\n            var found = silentOptions.indexOf(data.name) !== -1;\n            return !found;\n        });\n    } else if (silentOptions && silentOptions.except) {\n        return published.filter(function (data) {\n            var found = (silentOptions.except || []).indexOf(data.name) !== -1;\n            return found;\n        });\n    }\n    return published;\n}\n\n/***/ }),\n/* 57 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = excludeReadOnly;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n\n\n/**\n * \n * @param {Publishable[]} publishable \n * @param {boolean|string[]|Function} readOnlyOptions \n * @returns {Publishable[]} filtered list\n */\nfunction excludeReadOnly(publishable, readOnlyOptions) {\n    if (Object(__WEBPACK_IMPORTED_MODULE_0_lodash__[\"isFunction\"])(readOnlyOptions)) {\n        readOnlyOptions = readOnlyOptions();\n    }\n    if (readOnlyOptions === true) {\n        console.error('Tried to publish to a readonly channel', publishable);\n        return [];\n    }\n    if (Array.isArray(readOnlyOptions)) {\n        var split = publishable.reduce(function (accum, data) {\n            var isReadonly = readOnlyOptions.indexOf(data.name) !== -1;\n            if (isReadonly) {\n                accum.readOnly.push(data);\n            } else {\n                accum.remaining.push(data);\n            }\n            return accum;\n        }, { readOnly: [], remaining: [] });\n\n        if (split.readOnly.length) {\n            console.warn('Ignoring readonly publishes', split.readOnly);\n        }\n        return split.remaining;\n    }\n    return publishable;\n}\n\n/***/ }),\n/* 58 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__json_route_handler__ = __webpack_require__(59);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_0__json_route_handler__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__epicenter_route_handlers__ = __webpack_require__(60);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__epicenter_route_handlers__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__dom_route_handler__ = __webpack_require__(76);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_2__dom_route_handler__[\"a\"]; });\n\n\n\n\n/***/ }),\n/* 59 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export match */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__ = __webpack_require__(3);\n\n\nfunction match(topic) {\n    var parsed = Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__[\"b\" /* toImplicitType */])(topic);\n    return typeof parsed !== 'string' ? '' : false;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    match: match,\n    name: 'JSON Route',\n    subscribeHandler: function (topics) {\n        var parsed = topics.map(function (t) {\n            return {\n                name: t,\n                value: Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__[\"b\" /* toImplicitType */])(t)\n            };\n        });\n        return parsed;\n    }\n});\n\n/***/ }),\n/* 60 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = EpicenterRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__default_run_route_handler__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__scenario_route_handler__ = __webpack_require__(66);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__runid_route_handler__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__world_route_handler__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__multi_run_route_handler__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_channels_channel_router__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getOptions(opts, key) {\n    var serviceOptions = $.extend(true, {}, opts.defaults, opts[key]);\n    var channelOptions = $.extend(true, {}, serviceOptions.channelOptions);\n    delete serviceOptions.channelOptions;\n\n    return { serviceOptions: serviceOptions, channelOptions: channelOptions };\n}\n\nvar SCENARIO_PREFIX = 'sm:';\nvar RUN_PREFIX = 'rm:';\nvar WORLD_PREFIX = 'world:';\n\nvar sampleRunidLength = '000001593dd81950d4ee4f3df14841769a0b'.length;\nvar runidRegex = '(?:.{' + sampleRunidLength + '})';\n\n/* eslint-disable complexity */\nfunction EpicenterRouteHandler(config, notifier, channelManagerContext) {\n    var opts = $.extend(true, {}, config);\n\n    var runidHandlerOpts = getOptions(opts, 'runid');\n    var runidHandler = new __WEBPACK_IMPORTED_MODULE_2__runid_route_handler__[\"a\" /* default */](runidHandlerOpts, notifier);\n    var multiRunHandler = new __WEBPACK_IMPORTED_MODULE_4__multi_run_route_handler__[\"a\" /* default */](runidHandlerOpts, Object(__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, 'runs'), channelManagerContext);\n    // var userChannel = new UserRouter(getOptions(opts, 'runManager').run, withPrefix(notifier, 'user:'), channelManagerContext);\n\n    /** @type {Handler[]} **/\n    var handlers = [$.extend({}, runidHandler, {\n        name: 'customRun',\n        match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"c\" /* matchRegex */])(runidRegex),\n        options: runidHandlerOpts.channelOptions\n    }), $.extend({}, multiRunHandler, {\n        name: 'archiveRuns',\n        match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])('runs:'),\n        options: runidHandlerOpts.channelOptions\n    })];\n    var exposable = {};\n\n    var runManagerOpts = getOptions(opts, 'runManager');\n    if (opts.runManager || !opts.scenarioManager && runManagerOpts.serviceOptions.run) {\n        var rm;\n        var hasEnoughInfo = runManagerOpts.serviceOptions.run && runManagerOpts.serviceOptions.run.model;\n        var isMultiplayer = runManagerOpts.serviceOptions.strategy === 'multiplayer' || runManagerOpts.serviceOptions.isMultiplayer;\n\n        if (!hasEnoughInfo) {\n            console.warn('No model specified, not initializing run manager channel', opts);\n            rm = { expose: {} };\n        } else if (opts.scenarioManager) {\n            rm = new __WEBPACK_IMPORTED_MODULE_0__default_run_route_handler__[\"a\" /* default */](runManagerOpts, Object(__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, RUN_PREFIX));\n            handlers.push($.extend({}, rm, {\n                name: 'run',\n                match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(RUN_PREFIX), //if both scenario manager and run manager are being used, require a prefix\n                options: runManagerOpts.channelOptions\n            }));\n        } else if (isMultiplayer) {\n            //Ignore case where both scenario manager and multiplayer are being used\n            rm = new __WEBPACK_IMPORTED_MODULE_3__world_route_handler__[\"a\" /* default */](runManagerOpts, Object(__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [WORLD_PREFIX, '']));\n            handlers.push($.extend({}, rm, {\n                name: 'World run',\n                match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(WORLD_PREFIX),\n                isDefault: true,\n                options: runManagerOpts.channelOptions\n            }));\n        } else {\n            rm = new __WEBPACK_IMPORTED_MODULE_0__default_run_route_handler__[\"a\" /* default */](runManagerOpts, Object(__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [RUN_PREFIX, '']));\n            handlers.push($.extend({}, rm, {\n                name: 'run',\n                match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(RUN_PREFIX),\n                isDefault: true,\n                options: runManagerOpts.channelOptions\n            }));\n        }\n\n        $.extend(exposable, rm.expose);\n    }\n\n    if (opts.scenarioManager) {\n        var scenarioManagerOpts = getOptions(opts, 'scenarioManager');\n        var sm = new __WEBPACK_IMPORTED_MODULE_1__scenario_route_handler__[\"a\" /* default */](scenarioManagerOpts, Object(__WEBPACK_IMPORTED_MODULE_5_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [SCENARIO_PREFIX, '']));\n        handlers.push($.extend({}, sm, {\n            name: 'scenario',\n            match: Object(__WEBPACK_IMPORTED_MODULE_6_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(SCENARIO_PREFIX),\n            options: scenarioManagerOpts.channelOptions,\n            isDefault: true\n        }));\n\n        $.extend(exposable, sm.expose);\n    }\n\n    var epicenterRouter = Object(__WEBPACK_IMPORTED_MODULE_7_channels_channel_router__[\"a\" /* default */])(handlers, notifier);\n    epicenterRouter.expose = exposable;\n\n    return epicenterRouter;\n}\n\n/***/ }),\n/* 61 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunManagerRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__run_route_handler__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n\n\n\n\n\n\nvar _window = window,\n    F = _window.F;\n\n\nvar RUN_PREFIX = 'current:';\n\nfunction RunManagerRouteHandler(config, notifier) {\n    var defaults = {\n        serviceOptions: {},\n        channelOptions: {}\n    };\n    var opts = $.extend(true, {}, defaults, config);\n\n    var rmOptions = opts.serviceOptions;\n    var rm = new F.manager.RunManager(rmOptions);\n\n    var $creationPromise = rm.getRun().then(function (run) {\n        return rm.run;\n    });\n    var currentChannelOpts = $.extend(true, { serviceOptions: $creationPromise, channelOptions: opts.channelOptions }, opts.defaults, opts.current);\n    var currentRunChannel = new __WEBPACK_IMPORTED_MODULE_0__run_route_handler__[\"a\" /* default */](currentChannelOpts, Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [RUN_PREFIX, '']));\n\n    var runRouteHandler = $.extend(currentRunChannel, {\n        match: Object(__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(RUN_PREFIX), //TODO: Just remove prefix?\n        name: 'Current Run',\n        isDefault: true,\n        options: currentChannelOpts.channelOptions\n    });\n    var handlers = [runRouteHandler];\n\n    var runMangerRouter = Object(__WEBPACK_IMPORTED_MODULE_2_channels_channel_router__[\"a\" /* default */])(handlers);\n    runMangerRouter.expose = { runManager: rm };\n\n    return runMangerRouter;\n}\n\n/***/ }),\n/* 62 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunMetaRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\nfunction RunMetaRouteHandler($runServicePromise, notifier) {\n\n    function mergeAndSend(runMeta, requestedTopics) {\n        var toSend = [].concat(requestedTopics).reduce(function (accum, meta) {\n            accum.push({ name: meta, value: runMeta[meta] });\n            return accum;\n        }, []);\n        return toSend;\n        // return notifier(toSend);\n    }\n    return {\n        subscribeHandler: function (topics, options) {\n            topics = [].concat(topics);\n\n            return $runServicePromise.then(function (runService) {\n                var cachedValues = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"intersection\"])(Object.keys(runService.runMeta || {}), topics);\n                if (options.autoFetch === false) {\n                    return $.Deferred().resolve({}).promise();\n                } else if (cachedValues.length === topics.length) {\n                    //FIXME: Add 'updated time' to meta, and fetch if that's < debounce interval -- use the custom debounce fn with the custom merge (debounce save as well?)\n                    //Make run service factory return patched run-service?\n                    return $.Deferred().resolve(mergeAndSend(runService.runMeta, topics)).promise();\n                }if (!runService.loadPromise) {\n                    runService.loadPromise = runService.load().then(function (data) {\n                        runService.runMeta = data;\n                        return data;\n                    });\n                }\n                return runService.loadPromise.then(function (data) {\n                    return mergeAndSend(data, topics);\n                });\n            });\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                var toSave = Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__[\"c\" /* publishableToObject */])(topics);\n                return runService.save(toSave).then(function (res) {\n                    runService.runMeta = $.extend({}, true, runService.runMeta, res);\n                    return Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__[\"b\" /* objectToPublishable */])(res);\n                });\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 63 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunVariablesRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_utils_general__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__ = __webpack_require__(64);\n\n\n\n\n// import { optimizedFetch } from './optimized-variables-fetch';\n\nfunction mergeVariables(accum, newval) {\n    if (!accum) {\n        accum = [];\n    }\n    var merged = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniq\"])(accum.concat(newval)).filter(function (v) {\n        return !!(v && v.trim());\n    });\n    // console.log(merged, 'merged');\n    return merged;\n}\n\nfunction RunVariablesRouteHandler($runServicePromise, notifier) {\n    var id = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniqueId\"])('variable-route-handler');\n\n    function debouncedVariableQuery(runService, debounceInterval) {\n        if (!runService.debouncedFetchers) {\n            runService.debouncedFetchers = {};\n        }\n        if (!runService.debouncedFetchers[id]) {\n            runService.debouncedFetchers[id] = Object(__WEBPACK_IMPORTED_MODULE_0_utils_general__[\"a\" /* debounceAndMerge */])(function (variables) {\n                return Object(__WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__[\"a\" /* retriableFetch */])(runService, variables);\n            }, debounceInterval, [mergeVariables]);\n        }\n        return runService.debouncedFetchers[id];\n    }\n\n    var knownTopics = [];\n    return {\n        /**\n         * @param {{exclude:? boolean}} options \n         * @returns {Promise}\n         */\n        fetch: function (options) {\n            var opts = $.extend({ exclude: [] }, options);\n            return $runServicePromise.then(function (runService) {\n                var variablesToFetch = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"difference\"])([].concat(knownTopics), opts.exclude);\n                if (!variablesToFetch.length) {\n                    return [];\n                }\n                return Object(__WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__[\"a\" /* retriableFetch */])(runService, [].concat(variablesToFetch)).then(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"b\" /* objectToPublishable */]).then(notifier);\n            });\n        },\n\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            knownTopics = knownTopics.filter(function (t) {\n                var isUnsubscribed = unsubscribedTopics.indexOf(t) !== -1;\n                var isRemaining = remainingTopics.indexOf(t) !== -1;\n                return !isUnsubscribed || isRemaining;\n            });\n        },\n        subscribeHandler: function (topics, options) {\n            // console.log('subscribe', JSON.stringify(topics));\n            var isAutoFetchEnabled = options.autoFetch;\n            var debounceInterval = options.debounce;\n\n            return $runServicePromise.then(function (runService) {\n                knownTopics = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniq\"])(knownTopics.concat(topics));\n                if (!knownTopics.length) {\n                    return $.Deferred().resolve([]).promise();\n                } else if (!isAutoFetchEnabled) {\n                    return $.Deferred().resolve(topics).promise();\n                }\n                return debouncedVariableQuery(runService, debounceInterval)(topics).then(function (response) {\n                    var missingVariables = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"difference\"])(topics, Object.keys(response));\n                    if (missingVariables.length) {\n                        return $.Deferred().reject({\n                            context: missingVariables,\n                            message: 'Missing variables: ' + missingVariables.join(',')\n                        }).promise();\n                    }\n                    return response;\n                });\n            });\n        },\n        /**\n         * \n         * @param {Publishable[]} variableData\n         */\n        notify: function (variableData) {\n            return $runServicePromise.then(function (runService) {\n                var variables = variableData.map(function (v) {\n                    return v.name;\n                });\n                //Need to fetch again because for Vensim, i'm notified about the Current value, while i need the value over time\n                return Object(__WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__[\"a\" /* retriableFetch */])(runService, variables).then(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"b\" /* objectToPublishable */]).then(notifier);\n            });\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                var toSave = Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"c\" /* publishableToObject */])(topics);\n                return runService.variables().save(toSave).then(function (response) {\n                    var variables = Object.keys(toSave);\n                    //Get the latest from the server because what you think you saved may not be what was saved\n                    //bool -> 1, scalar to array for time-based models etc\n                    return Object(__WEBPACK_IMPORTED_MODULE_3__retriable_variable_fetch__[\"a\" /* retriableFetch */])(runService, variables).then(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"b\" /* objectToPublishable */]);\n                });\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 64 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = retriableFetch;\n//Opaquely handle missing variables\nfunction retriableFetch(runService, variables) {\n    if (!variables || !variables.length) {\n        return $.Deferred().resolve({}).promise();\n    }\n    return runService.variables().query(variables).catch(function (e) {\n        var response = e.responseJSON;\n        var info = response.information;\n        if (info.code !== 'VARIABLE_NOT_FOUND') {\n            throw e;\n        }\n        var goodVariables = variables.filter(function (vName) {\n            var baseName = vName.split('[')[0];\n            var isBad = info.context.names.indexOf(baseName) !== -1;\n            return !isBad;\n        });\n        return retriableFetch(runService, goodVariables);\n    });\n}\n\n/***/ }),\n/* 65 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunOperationsRouteHandler;\nfunction RunOperationsRouteHandler($runServicePromise, notifier) {\n    return {\n        /**\n         * \n         * @param {Publishable[]} operationsResponse \n         */\n        notify: function (operationsResponse) {\n            return notifier([].concat(operationsResponse));\n        },\n\n        subscribeHandler: function () {\n            return []; //Cannot subscribe to operations\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                var toSave = topics.map(function (topic) {\n                    return { name: topic.name, params: topic.value };\n                });\n                return runService.serial(toSave).then(function (result) {\n                    var toReturn = result.map(function (response, index) {\n                        return { name: topics[index].name, value: response.result };\n                    });\n                    return toReturn;\n                });\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 66 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ScenarioManagerRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__run_route_handler__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n\n\n\n\n\nfunction ScenarioManagerRouteHandler(config, notifier) {\n    var defaults = {\n        serviceOptions: {},\n        channelOptions: {}\n    };\n    var opts = $.extend(true, {}, defaults, config);\n\n    var sm = new window.F.manager.ScenarioManager(opts.serviceOptions);\n\n    var baselinePromise = sm.baseline.getRun().then(function () {\n        return sm.baseline.run;\n    });\n    var baselineOptions = $.extend(true, {\n        serviceOptions: baselinePromise,\n        channelOptions: {\n            meta: {\n                readOnly: true\n            },\n            variables: {\n                readOnly: true\n            }\n        }\n    }, opts.defaults, opts.baseline);\n    var currentRunPromise = sm.current.getRun().then(function () {\n        return sm.current.run;\n    });\n\n    var runOptions = $.extend(true, {\n        serviceOptions: currentRunPromise\n    }, opts.defaults, opts.current);\n\n    var baselineHandler = new __WEBPACK_IMPORTED_MODULE_0__run_route_handler__[\"a\" /* default */](baselineOptions, Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, 'baseline:'));\n    var currentRunHandler = new __WEBPACK_IMPORTED_MODULE_0__run_route_handler__[\"a\" /* default */](runOptions, Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, ['current:', '']));\n    var handlers = [$.extend(baselineHandler, {\n        name: 'baseline',\n        match: Object(__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])('baseline:'),\n        options: baselineOptions.channelOptions\n    }), $.extend(currentRunHandler, {\n        isDefault: true,\n        name: 'current',\n        match: Object(__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])('current:'),\n        options: runOptions.channelOptions\n    })];\n\n    var scenarioManagerRouter = Object(__WEBPACK_IMPORTED_MODULE_2_channels_channel_router__[\"a\" /* default */])(handlers, notifier);\n    scenarioManagerRouter.expose = { scenarioManager: sm };\n    return scenarioManagerRouter;\n}\n\n/***/ }),\n/* 67 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = RunidRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__run_router_factory__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__ = __webpack_require__(2);\n\n\n\nfunction RunidRouteHandler(options, notifier) {\n    if (!options) options = {};\n\n    var opts = {};\n    opts.serviceOptions = options.serviceOptions && options.serviceOptions.run ? options.serviceOptions.run : {};\n    opts.channelOptions = options.channelOptions;\n\n    return {\n        subscribeHandler: function (topics, options, prefix) {\n            var runid = Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"d\" /* stripSuffixDelimiter */])(prefix);\n            //FIXME: Should i merge options here?\n            var channel = Object(__WEBPACK_IMPORTED_MODULE_0__run_router_factory__[\"a\" /* default */])(runid, opts, Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, prefix));\n            return channel.subscribeHandler(topics, options, prefix);\n        },\n        publishHandler: function (topics, options, prefix) {\n            var runid = Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"d\" /* stripSuffixDelimiter */])(prefix);\n            var channel = Object(__WEBPACK_IMPORTED_MODULE_0__run_router_factory__[\"a\" /* default */])(runid, opts, Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, prefix));\n            return channel.publishHandler(topics);\n        }\n    };\n}\n\n/***/ }),\n/* 68 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__run_route_handler__ = __webpack_require__(8);\n\nvar knownRunIDServiceChannels = {};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (runid, options, notifier) {\n    var runChannel = knownRunIDServiceChannels[runid];\n    if (!runChannel) {\n        var runOptions = $.extend(true, {}, options, { serviceOptions: { id: runid } });\n        runChannel = new __WEBPACK_IMPORTED_MODULE_0__run_route_handler__[\"a\" /* default */](runOptions, notifier);\n        knownRunIDServiceChannels[runid] = runChannel;\n    }\n    return runChannel;\n});\n\n/***/ }),\n/* 69 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = WorldRoutesHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__world_users_route_handler__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__world_current_user_route_handler__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__consensus_route_handler__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__run_route_handler__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_channels_channel_router__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n\nvar _window = window,\n    F = _window.F;\n\n\nvar RUN_PREFIX = 'run:';\nvar MULTI_USER_PREFIX = 'users:';\nvar USER_PREFIX = 'user:';\nvar CONSENSUS_PREFIX = 'consensus:';\n\n//TODO: Add custom worldid channel as well\nfunction WorldRoutesHandler(config, notifier) {\n    var _this = this;\n\n    var defaults = {\n        serviceOptions: {},\n        channelOptions: {}\n    };\n    var opts = $.extend(true, {}, defaults, config);\n\n    var rmOptions = opts.serviceOptions;\n    var rm = new F.manager.RunManager(rmOptions);\n\n    var runPromise = null;\n    function getRun() {\n        if (!runPromise) {\n            runPromise = rm.getRun().then(function (run) {\n                if (!run.world) {\n                    console.error('No world found in run. Make sure you\\'re using EpicenterJS version > 2.7');\n                    throw new Error('Could not find world');\n                }\n                return run;\n            }, function (err) {\n                console.error('Run manager get run error', err);\n                throw err;\n            });\n        }\n        return runPromise;\n    }\n    var $runPromise = getRun().then(function (run) {\n        var alreadyStubbedRunChannel = rm.run.channel; //FIXME: Explicitly pass instead of stubbing on a channel\n        if (alreadyStubbedRunChannel) {\n            return rm.run;\n        }\n        var channelManager = new F.manager.ChannelManager();\n        var worldChannel = channelManager.getWorldChannel(run.world);\n\n        worldChannel.subscribe(worldChannel.TOPICS.RUN_RESET, function (run) {\n            rm.run.updateConfig({ filter: run.id }); //Run handler is also listening on the run and will take care of notifying\n        }, _this, { includeMine: false });\n        rm.run.channel = worldChannel;\n        return rm.run;\n    });\n\n    var currentRunHandlerOpts = $.extend(true, { serviceOptions: $runPromise, channelOptions: opts.channelOptions }, opts.defaults, opts.current);\n    var currentRunHandler = new __WEBPACK_IMPORTED_MODULE_5__run_route_handler__[\"a\" /* default */](currentRunHandlerOpts, Object(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, [RUN_PREFIX, '']));\n\n    var handlers = [];\n\n    var runRouteHandler = $.extend(currentRunHandler, {\n        match: Object(__WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__[\"a\" /* matchDefaultPrefix */])(RUN_PREFIX),\n        name: 'World Run',\n        isDefault: true,\n        options: currentRunHandlerOpts.channelOptions\n    });\n    handlers.unshift(runRouteHandler);\n\n    var $worldProm = null;\n    function getWorld() {\n        if (!$worldProm) {\n            $worldProm = getRun().then(function (run) {\n                return run.world;\n            });\n        }\n        return $worldProm;\n    }\n\n    var worldChannelMap = {};\n    var channelManager = new F.manager.ChannelManager();\n    function getChannelForWorld(worldid) {\n        if (!worldChannelMap[worldid]) {\n            worldChannelMap[worldid] = channelManager.getWorldChannel(worldid);\n        }\n        return worldChannelMap[worldid];\n    }\n\n    var am = new F.manager.AuthManager();\n    var handlerOptions = {\n        serviceOptions: {\n            getRun: getRun,\n            getWorld: getWorld,\n            getSession: function () {\n                return am.getCurrentUserSessionInfo();\n            },\n            getChannel: getChannelForWorld\n        },\n        channelOptions: opts.channelOptions\n    };\n\n    var usersRouteHandler = new __WEBPACK_IMPORTED_MODULE_0__world_users_route_handler__[\"a\" /* default */](handlerOptions, Object(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, MULTI_USER_PREFIX));\n    var usersHandler = $.extend(usersRouteHandler, {\n        match: Object(__WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(MULTI_USER_PREFIX),\n        name: 'world users'\n    });\n    handlers.unshift(usersHandler);\n\n    var currentUserRouteHandler = new __WEBPACK_IMPORTED_MODULE_1__world_current_user_route_handler__[\"a\" /* default */](handlerOptions, Object(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, USER_PREFIX));\n    var currentUserHandler = $.extend(currentUserRouteHandler, {\n        match: Object(__WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(USER_PREFIX),\n        name: 'world current user'\n    });\n    handlers.unshift(currentUserHandler);\n\n    var ConsensusManager = window.F.manager.ConsensusManager;\n    if (ConsensusManager) {\n        //epijs < 2.80 did not have this\n        var consensusRouteHandler = new __WEBPACK_IMPORTED_MODULE_2__consensus_route_handler__[\"a\" /* default */](handlerOptions, Object(__WEBPACK_IMPORTED_MODULE_3_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, CONSENSUS_PREFIX));\n        var consensusHandler = $.extend(consensusRouteHandler, {\n            match: Object(__WEBPACK_IMPORTED_MODULE_4_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(CONSENSUS_PREFIX),\n            name: 'consensus'\n        });\n        handlers.unshift(consensusHandler);\n    }\n\n    var worldRouteHandler = Object(__WEBPACK_IMPORTED_MODULE_6_channels_channel_router__[\"a\" /* default */])(handlers);\n    worldRouteHandler.expose = { runManager: rm };\n\n    return worldRouteHandler;\n}\n\n/***/ }),\n/* 70 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = WorldUsersRouteHandler;\nvar F = window.F;\n\nfunction WorldUsersRouteHandler(config, notifier) {\n    var options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {}\n    }, config);\n\n    var _options$serviceOptio = options.serviceOptions,\n        getWorld = _options$serviceOptio.getWorld,\n        getSession = _options$serviceOptio.getSession,\n        getChannel = _options$serviceOptio.getChannel;\n\n\n    var store = {\n        users: [],\n        mark: function (userid, isOnline) {\n            store.users = store.users.map(function (u) {\n                if (u.userId === userid) {\n                    u.isOnline = isOnline;\n                }\n                return u;\n            });\n            return store.users;\n        }\n    };\n\n    var parsedUsersPromise = getWorld().then(function (world) {\n        var session = getSession();\n        var parsed = world.users.map(function (u) {\n            u.name = u.lastName;\n            u.isMe = u.userId === session.userId;\n            u.isOnline = u.isMe; //Assume i'm the only online one by default\n            return u;\n        });\n        store.users = parsed;\n        return parsed;\n    });\n\n    var presenceSubsId = void 0;\n    return {\n        unsubscribeHandler: function (knownTopics, remainingTopics) {\n            if (remainingTopics.length || !presenceSubsId) {\n                return;\n            }\n            getWorld().then(function (world) {\n                var worldChannel = getChannel(world.id);\n                worldChannel.unsubscribe(presenceSubsId);\n                presenceSubsId = null;\n            });\n        },\n        subscribeHandler: function (userids) {\n            if (!presenceSubsId) {\n                //TODO: Also listen to roles channel to update users\n                getWorld().then(function (world) {\n                    var worldChannel = getChannel(world.id);\n                    presenceSubsId = worldChannel.subscribe(worldChannel.TOPICS.PRESENCE, function (user, meta) {\n                        var userid = user.id;\n                        store.mark(userid, user.isOnline);\n                        return notifier([{ name: '', value: store.users }]);\n                    }, { includeMine: false });\n                });\n            }\n            return parsedUsersPromise.then(function (users) {\n                return [{ name: '', value: users }];\n            });\n        },\n        publishHandler: function (topics, options) {\n            var ps = new F.service.Presence();\n            topics.forEach(function (topic) {\n                var split = topic.name.split(':');\n                if (split[1]) {\n                    if (split[1] === 'markOnline') {\n                        ps.markOnline(split[0]);\n                    } else if (split[1] === 'markOffline') {\n                        ps.markOffline(split[0]);\n                    }\n                }\n            });\n            return topics;\n        }\n    };\n}\n\n/***/ }),\n/* 71 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = WorldCurrentUserRouteHandler;\nfunction WorldCurrentUserRouteHandler(config, notifier) {\n    var options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {}\n    }, config);\n\n    var _options$serviceOptio = options.serviceOptions,\n        getWorld = _options$serviceOptio.getWorld,\n        getSession = _options$serviceOptio.getSession,\n        getChannel = _options$serviceOptio.getChannel;\n\n\n    var subsid = void 0;\n\n    var store = $.extend(true, {\n        isMe: true,\n        isOnline: true\n    }, getSession());\n\n    return {\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            var stillNeedRoles = remainingTopics.indexOf('role') !== -1;\n            if (!stillNeedRoles && subsid) {\n                getWorld().then(function (world) {\n                    var worldChannel = getChannel(world.id);\n                    worldChannel.unsubscribe(subsid);\n                });\n                subsid = null;\n            }\n        },\n        subscribeHandler: function (userFields) {\n            return getWorld().then(function (world) {\n                var session = getSession();\n                var myUser = world.users.find(function (user) {\n                    return user.userId === session.userId;\n                });\n                $.extend(store, myUser);\n\n                var toNotify = userFields.reduce(function (accum, field) {\n                    if (field === '') {\n                        //the entire user object\n                        accum.push({ name: field, value: store });\n                    } else if (store[field] !== undefined) {\n                        accum.push({ name: field, value: store[field] });\n                    }\n                    return accum;\n                }, []);\n\n                var isSubscribingToRole = userFields.indexOf('role') !== -1;\n                if (isSubscribingToRole && !subsid) {\n                    var worldChannel = getChannel(world.id);\n                    subsid = worldChannel.subscribe(worldChannel.TOPICS.ROLES, function (users, meta) {\n                        var myUser = users.find(function (u) {\n                            return u.userId === session.userId;\n                        });\n                        if (myUser && myUser.role !== store.role) {\n                            store.role = myUser.role;\n                            notifier([{ name: 'role', value: myUser.role }]);\n                        }\n                    });\n                }\n                return toNotify;\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 72 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ConsensusRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consensus_operations_handler__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__consensus_status_handler__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__ = __webpack_require__(2);\n\n\n\n\n\n\nvar ConsensusManager = window.F.manager.ConsensusManager;\n\nvar OPERATIONS_PREFIX = 'operations:';\n\nfunction ConsensusRouteHandler(config, notifier) {\n    var options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {}\n    }, config);\n\n    var _options$serviceOptio = options.serviceOptions,\n        getWorld = _options$serviceOptio.getWorld,\n        getRun = _options$serviceOptio.getRun,\n        getSession = _options$serviceOptio.getSession,\n        getChannel = _options$serviceOptio.getChannel;\n\n\n    var cm = new ConsensusManager();\n\n    var consensusProm = null;\n    function getConsensus(force) {\n        if (!consensusProm || force) {\n            consensusProm = getRun().then(function () {\n                return cm.getCurrent(); //TODO: GetRun deletes the barrier if it overlaps with this call, so synchronize them\n            });\n        }\n        return consensusProm;\n    }\n\n    var handlerOptions = {\n        serviceOptions: {\n            getConsensus: getConsensus,\n            getSession: getSession\n        },\n        channelOptions: {}\n    };\n\n    var opnHandler = Object(__WEBPACK_IMPORTED_MODULE_0__consensus_operations_handler__[\"a\" /* default */])(handlerOptions, Object(__WEBPACK_IMPORTED_MODULE_4_channels_channel_router_utils__[\"g\" /* withPrefix */])(notifier, OPERATIONS_PREFIX));\n    var statusHandler = Object(__WEBPACK_IMPORTED_MODULE_1__consensus_status_handler__[\"a\" /* default */])(handlerOptions, notifier);\n\n    var handlers = [$.extend({}, opnHandler, {\n        name: 'consensus operations',\n        match: Object(__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(OPERATIONS_PREFIX),\n        options: handlerOptions.channelOptions.operations\n    }), $.extend({}, statusHandler, {\n        name: 'consensus status',\n        match: Object(__WEBPACK_IMPORTED_MODULE_3_channels_route_handlers_route_matchers__[\"b\" /* matchPrefix */])(''),\n        isDefault: true,\n        options: handlerOptions.channelOptions.status\n    })];\n\n    getWorld().then(function (world) {\n        var channel = getChannel(world.id);\n        channel.subscribe(channel.TOPICS.RUN_RESET, function () {\n            getConsensus(true).then(function (consensus) {\n                statusHandler.notify(consensus);\n            });\n        });\n        // FIXME: Filter by stage here\n        channel.subscribe(channel.TOPICS.CONSENSUS_UPDATE, function (consensus) {\n            var isComplete = consensus.closed;\n            if (isComplete) {\n                getConsensus(true).then(function (consensus) {\n                    statusHandler.notify(consensus);\n                });\n            } else {\n                statusHandler.notify(consensus);\n            }\n        });\n    });\n\n    var consensusRouteHandler = Object(__WEBPACK_IMPORTED_MODULE_2_channels_channel_router__[\"a\" /* default */])(handlers, notifier);\n    consensusRouteHandler.expose = { consensusManager: cm };\n\n    return consensusRouteHandler;\n}\n\n/***/ }),\n/* 73 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ConsensusOperationsHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consensus_utils__ = __webpack_require__(15);\n\n\nfunction ConsensusOperationsHandler(config, notifier) {\n    var options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {}\n    }, config);\n\n    var getConsensus = options.serviceOptions.getConsensus;\n\n\n    return {\n        subscribeHandler: function () {\n            return [];\n        },\n        publishHandler: function (topics, options) {\n            return getConsensus().then(function (consensus) {\n                var actions = topics.map(function (topic) {\n                    return { name: topic.name, arguments: topic.value };\n                });\n                var cs = Object(__WEBPACK_IMPORTED_MODULE_0__consensus_utils__[\"a\" /* makeConsensusService */])(consensus);\n                return cs.submitActions(actions).then(function () {\n                    return topics;\n                });\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 74 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ConsensusStatusHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__consensus_utils__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\n\n\n\n\nfunction ConsensusStatusHandler(config, notifier) {\n    var options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {}\n    }, config);\n\n    var _options$serviceOptio = options.serviceOptions,\n        getConsensus = _options$serviceOptio.getConsensus,\n        getSession = _options$serviceOptio.getSession;\n\n\n    function normalizePlayers(rolePlayerMap) {\n        var session = getSession();\n        var normalized = Object.keys(rolePlayerMap).reduce(function (accum, role) {\n            var playersForRole = rolePlayerMap[role];\n            var playersWithRole = playersForRole.map(function (p) {\n                var player = p.user || p; //submitted puts user under an extra object because of course\n                return Object.assign({}, player, {\n                    role: role,\n                    userName: player.userName.split('/')[0], //API adds user/project because of course\n                    name: player.lastName,\n                    isMe: player.userName === session.userName // so you can do :submitted:users | reject('isMe')\n                });\n            });\n            accum = accum.concat(playersWithRole);\n            return accum;\n        }, []);\n        return normalized;\n    }\n    function normalizeConsensus(consensus) {\n        var session = getSession();\n        var submitted = normalizePlayers(consensus.submitted);\n        var amWaiting = submitted.find(function (u) {\n            return u.userName === session.userName;\n        });\n        var normalized = $.extend(true, {}, consensus, {\n            amWaiting: !!amWaiting,\n            submitted: submitted,\n            pending: normalizePlayers(consensus.pending)\n        });\n        return normalized;\n    }\n\n    return {\n        notify: function (consensus) {\n            var normalizedConsensus = normalizeConsensus(consensus);\n            notifier(Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"b\" /* objectToPublishable */])(normalizedConsensus));\n        },\n        subscribeHandler: function (topics) {\n            return getConsensus().then(function (consensus) {\n                var normalized = normalizeConsensus(consensus);\n                var dataForTopics = Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"pick\"])(normalized, topics);\n                return Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"b\" /* objectToPublishable */])(dataForTopics);\n            });\n        },\n        publishHandler: function (topics) {\n            return getConsensus().then(function (consensus) {\n                if (topics.length > 1 || topics[0].name !== 'close') {\n                    throw new TypeError('Can only publish `close` on consensus:status');\n                }\n                var cs = Object(__WEBPACK_IMPORTED_MODULE_0__consensus_utils__[\"a\" /* makeConsensusService */])(consensus);\n                return cs.forceClose().then(function () {\n                    return topics;\n                });\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 75 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = MultiRunRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_utils_general__ = __webpack_require__(7);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\n\nvar _window = window,\n    F = _window.F;\n\n\nfunction MultiRunRouteHandler(options, notifier, channelManagerContext) {\n    var runService = new F.service.Run(options.serviceOptions.run);\n\n    var topicParamMap = {};\n\n    function extractFiltersFromTopic(topicString) {\n        var filters = topicString.replace('(', '').replace(')', '');\n        var filterParam = filters.split(';').reduce(function (accum, filter) {\n            var _filter$split = filter.split('='),\n                _filter$split2 = _slicedToArray(_filter$split, 2),\n                key = _filter$split2[0],\n                val = _filter$split2[1];\n\n            if (val) {\n                val = true;\n            }\n            accum[key] = val;\n            return accum;\n        }, {});\n        return filterParam;\n    }\n\n    function fetch(topic, variables) {\n        var filters = extractFiltersFromTopic(topic);\n        return runService.query(filters, { include: variables }).then(function (runs) {\n            notifier([{ name: topic, value: runs }]);\n\n            // if (topicParamMap[topic]) {\n            //     Object.keys(topicParamMap[topic]).forEach((runid)=> {\n            //         channelManagerContext.unsubscribe(topicParamMap[topic][runid]);\n            //     });\n            // }\n\n            return runs;\n        });\n    }\n\n    return {\n        fetch: fetch,\n\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            // knownTopics = remainingTopics;\n        },\n        subscribeHandler: function (topics, options) {\n            var topic = [].concat(topics)[0];\n\n            var filters = extractFiltersFromTopic(topic);\n            var variables = options && options.include;\n\n            var debounceInterval = 300;\n            var debouncedFetch = Object(__WEBPACK_IMPORTED_MODULE_0_utils_general__[\"a\" /* debounceAndMerge */])(fetch, debounceInterval, [function (accum, newval) {\n                return newval;\n            }]);\n            return fetch(topic, variables).then(function (runs) {\n                var subsMap = {};\n                //TODO: Provide this meta information to runs-factory so it doesn't trigger a fetch to get meta for each run\n                runs.forEach(function (run) {\n                    var subscriptions = Object.keys(filters).map(function (filter) {\n                        return run.id + ':meta:' + filter;\n                    });\n                    var subsid = channelManagerContext.subscribe(subscriptions, function () {\n                        debouncedFetch(topic, variables);\n                    }, { batch: false, autoFetch: false, cache: false });\n                    subsMap[run.id] = subsid;\n                });\n\n                topicParamMap[topic] = subsMap;\n                return runs;\n            });\n        }\n    };\n}\n\n/***/ }),\n/* 76 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export match */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = DOMRouteHandler;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\nfunction match(topic) {\n    return topic.indexOf('#') === 0 ? '' : false;\n}\n\nfunction DOMRouteHandler(options, notifier) {\n\n    var knownEls = new WeakMap();\n    var domOptions = $.extend(true, {\n        uiChangeEvents: {},\n        debounceInterval: 200\n    }, options.defaults, options.dom);\n\n    function changeHandler($el, id, evt) {\n        var val = Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__[\"b\" /* toImplicitType */])($el.val());\n        notifier([{ name: id, value: val }]);\n    }\n    var debouncedChangeHandler = __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.debounce(changeHandler, domOptions.debounceInterval);\n    return {\n        match: match,\n        name: 'DOM Route',\n        subscribeHandler: function (topics) {\n            var _this = this;\n\n            var parsed = topics.map(function (elID) {\n                var $el = $(elID);\n                if (!knownEls.has($el)) {\n                    knownEls.set($el, true);\n                    var overrides = domOptions.uiChangeEvents || {};\n                    var matchingEventOverride = Object.keys(overrides).find(function (selector) {\n                        return $el.is(selector);\n                    });\n                    var changeEvent = matchingEventOverride ? overrides[matchingEventOverride] : 'change';\n                    var handler = changeEvent.indexOf('key') !== -1 ? debouncedChangeHandler : changeHandler;\n                    $el.on(changeEvent + '.dom-handler', handler.bind(_this, $el, elID));\n                }\n\n                var val = Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__[\"b\" /* toImplicitType */])($el.val());\n                return {\n                    name: elID,\n                    value: val\n                };\n            });\n            return parsed;\n        },\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            var toKill = unsubscribedTopics.filter(function (t) {\n                var isRemaining = remainingTopics.indexOf(t) !== -1;\n                return !isRemaining;\n            });\n            toKill.forEach(function (elID) {\n                var $el = $(elID);\n\n                $el.off('change.dom-handler');\n                knownEls.delete($el);\n            });\n        },\n        /**\n         * \n         * @param {Publishable[]} publishable \n         */\n        publishHandler: function (publishable) {\n            publishable.forEach(function (p) {\n                $(p.name).val(p.value);\n            });\n            return publishable;\n        }\n    };\n}\n\n/***/ }),\n/* 77 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interpolatable__ = __webpack_require__(78);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__interpolatable__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__routable__ = __webpack_require__(81);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__routable__[\"a\"]; });\n\n\n// export { default as withMiddleware } from './with-middleware';\n\n/***/ }),\n/* 78 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = interpolatable;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__subscribe_interpolator__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__publish_interpolator__ = __webpack_require__(80);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n/**\n * Decorates passed channel manager with interpolation functionality\n * @param  {ChannelManager} ChannelManager\n * @returns {ChannelManager}                wrapped channel manager\n */\nfunction interpolatable(ChannelManager) {\n    var subsidMap = {};\n\n    /**\n     * @implements {ChannelManager}\n     */\n    return function (_ChannelManager) {\n        _inherits(InterpolatedChannelManager, _ChannelManager);\n\n        function InterpolatedChannelManager(options) {\n            _classCallCheck(this, InterpolatedChannelManager);\n\n            //FIXME: Add on-error (from routable) here?\n            var _this = _possibleConstructorReturn(this, (InterpolatedChannelManager.__proto__ || Object.getPrototypeOf(InterpolatedChannelManager)).call(this, options));\n\n            _this.subscribe = Object(__WEBPACK_IMPORTED_MODULE_0__subscribe_interpolator__[\"a\" /* default */])(_this.subscribe.bind(_this), function (dependencySubsId, newDependentId) {\n                var existing = subsidMap[dependencySubsId];\n                if (existing) {\n                    _this.unsubscribe(existing);\n                }\n                subsidMap[dependencySubsId] = newDependentId;\n            });\n\n            _this.publish = Object(__WEBPACK_IMPORTED_MODULE_1__publish_interpolator__[\"a\" /* default */])(_this.publish.bind(_this), function (variables, cb) {\n                _get(InterpolatedChannelManager.prototype.__proto__ || Object.getPrototypeOf(InterpolatedChannelManager.prototype), 'subscribe', _this).call(_this, variables, function (response, meta) {\n                    _this.unsubscribe(meta.id);\n                    cb(response);\n                }, { autoFetch: true, batch: true, onError: function (e) {\n                        throw e;\n                    } });\n            });\n            return _this;\n        }\n\n        _createClass(InterpolatedChannelManager, [{\n            key: 'unsubscribe',\n            value: function unsubscribe(token) {\n                var existing = subsidMap[token];\n                if (existing) {\n                    _get(InterpolatedChannelManager.prototype.__proto__ || Object.getPrototypeOf(InterpolatedChannelManager.prototype), 'unsubscribe', this).call(this, existing);\n                }\n                _get(InterpolatedChannelManager.prototype.__proto__ || Object.getPrototypeOf(InterpolatedChannelManager.prototype), 'unsubscribe', this).call(this, token);\n                delete subsidMap[token];\n            }\n        }, {\n            key: 'unsubscribeAll',\n            value: function unsubscribeAll() {\n                subsidMap = {};\n                _get(InterpolatedChannelManager.prototype.__proto__ || Object.getPrototypeOf(InterpolatedChannelManager.prototype), 'unsubscribeAll', this).call(this);\n            }\n        }]);\n\n        return InterpolatedChannelManager;\n    }(ChannelManager);\n}\n\n/***/ }),\n/* 79 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getDependencies */\n/* unused harmony export interpolateWithDependencies */\n/* unused harmony export mergeInterpolatedTopicsWithData */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = subscribeInterpolator;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\n/**\n * @param {string[]} topics\n * @returns {string[]} interpolated\n */\nfunction getDependencies(topics) {\n    var deps = topics.reduce(function (accum, topic) {\n        var inner = Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__[\"a\" /* extractDependencies */])(topic);\n        accum = accum.concat(inner);\n        return accum;\n    }, []);\n    return Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"uniq\"])(deps);\n}\n\n/**\n * @param {string[]} topics\n * @param {Object} data\n * @returns {string[]}\n */\nfunction interpolateWithDependencies(topics, data) {\n    return topics.map(function (topic) {\n        return Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__[\"b\" /* interpolateWithValues */])(topic, data);\n    });\n}\n\n/**\n * @param  {string[]} originalTopics     \n * @param  {string[]} interpolatedTopics \n * @param  {Object} data               \n * @returns {Object}                    Interpolated\n */\nfunction mergeInterpolatedTopicsWithData(originalTopics, interpolatedTopics, data) {\n    return interpolatedTopics.reduce(function (accum, interpolatedTopic, index) {\n        var original = originalTopics[index];\n        var val = data[interpolatedTopic];\n        if (val !== undefined) {\n            accum[original] = data[interpolatedTopic];\n        }\n        return accum;\n    }, {});\n}\n\n/**\n * Takes a subscribe function and resolves any interpolated inputs\n * @param  {Function} subscribeFn        function to wrap\n * @param  {Function} onDependencyChange callback function when any dependencies change\n * @returns {Function}                    wrapped function\n */\nfunction subscribeInterpolator(subscribeFn, onDependencyChange) {\n    return function interpolatedSubscribe(topics, cb, options) {\n        topics = [].concat(topics);\n        var dependencies = getDependencies(topics);\n        if (!dependencies.length) {\n            return subscribeFn(topics, cb, options);\n        }\n        var innerSubsId = subscribeFn(dependencies, function handleDependencyValueChange(data, dependenciesMeta) {\n            var isSameData = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"isEqual\"])(data, dependenciesMeta.previousData);\n            if (isSameData) return;\n\n            var interpolatedTopics = interpolateWithDependencies(topics, data);\n            var outerSubsId = subscribeFn(interpolatedTopics, function handleInterpolatedValueChange(actualData, actualMeta) {\n                var toSendback = mergeInterpolatedTopicsWithData(topics, interpolatedTopics, actualData);\n\n                cb(toSendback, actualMeta);\n            }, options);\n\n            (onDependencyChange || $.noop)(dependenciesMeta.id, outerSubsId);\n            return outerSubsId;\n        }, $.extend(options, { autoFetch: true, batch: true }));\n\n        return innerSubsId;\n    };\n}\n\n/***/ }),\n/* 80 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export getDependencies */\n/* unused harmony export interpolateWithDependencies */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = publishInterpolator;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);\n\n\n\n\n\n/**\n * @param {Publishable[]} publishInputs\n * @returns {string[]} dependencies for inputs\n */\nfunction getDependencies(publishInputs) {\n    var deps = publishInputs.reduce(function (accum, input) {\n        var inner = Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__[\"a\" /* extractDependencies */])(input.name);\n        accum = accum.concat(inner);\n        return accum;\n    }, []);\n    return Object(__WEBPACK_IMPORTED_MODULE_2_lodash__[\"uniq\"])(deps);\n}\n\n/**\n * @param {Publishable[]} publishInputs\n * @param {{string: any}} valuesToInterpolate\n * @returns {Publishable[]} inputs with resolved dependencies\n */\nfunction interpolateWithDependencies(publishInputs, valuesToInterpolate) {\n    return publishInputs.map(function (ip) {\n        return {\n            name: Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__[\"b\" /* interpolateWithValues */])(ip.name, valuesToInterpolate),\n            value: ip.value\n        };\n    });\n}\n\n/**\n * Publish function to wrap\n * @param  {Function} publishFunction\n * @param  {function(string[], function({string: any}):void):void} fetchFn         function to get interpolated values from\n * @returns {Function}                 wrapped function\n */\nfunction publishInterpolator(publishFunction, fetchFn) {\n    return function interpolatedPublishfunction(topic, value, options) {\n        var normalizedPublishInputs = Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__[\"a\" /* normalizeParamOptions */])(topic, value, options);\n        var dependencies = getDependencies(normalizedPublishInputs.params);\n        if (!dependencies.length) {\n            return publishFunction(topic, value, options);\n        }\n\n        var prom = $.Deferred();\n        fetchFn(dependencies, function handleDependencyChange(resolvedDependencies) {\n            var interpolated = interpolateWithDependencies(normalizedPublishInputs.params, resolvedDependencies);\n            var newPublishProm = publishFunction(interpolated, normalizedPublishInputs.options);\n            newPublishProm.then(prom.resolve, prom.reject);\n        });\n        return prom.promise();\n    };\n}\n\n/***/ }),\n/* 81 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = withRouter;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__channel_utils__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nfunction getTopicsFromSubsList(subcriptionList) {\n    var allTopics = subcriptionList.reduce(function (accum, subs) {\n        accum = accum.concat(subs.topics);\n        return accum;\n    }, []);\n    return Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"uniq\"])(allTopics);\n}\n\n/**\n * Decorates passed channel manager with middleware functionality\n * @param  {ChannelManager} BaseChannelManager\n * @param  {Object} router\n * @returns {ChannelManager} wrapped channel manager\n */\nfunction withRouter(BaseChannelManager, router) {\n    /**\n     * @augments ChannelManager\n     */\n    return function (_BaseChannelManager) {\n        _inherits(ChannelWithRouter, _BaseChannelManager);\n\n        function ChannelWithRouter(options) {\n            _classCallCheck(this, ChannelWithRouter);\n\n            var _this = _possibleConstructorReturn(this, (ChannelWithRouter.__proto__ || Object.getPrototypeOf(ChannelWithRouter)).call(this, options));\n\n            var defaults = {\n                routes: []\n            };\n            var opts = $.extend(true, {}, defaults, options);\n            var optsToPassOn = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"omit\"])(opts, Object.keys(defaults));\n\n            var rt = router(opts.routes, optsToPassOn, _this.notify.bind(_this));\n            Object.assign(_this, rt.expose || {});\n            _this.router = rt;\n            return _this;\n        }\n\n        /**\n         * Allow intercepting and excluding topics from by subsequent middlewares\n         * @param  {string | string[]}   topics\n         * @param  {Function} cb\n         * @param  {Object}   options\n         * @returns {string}           subscription id\n         */\n\n\n        _createClass(ChannelWithRouter, [{\n            key: 'subscribe',\n            value: function subscribe(topics, cb, options) {\n                var _this2 = this;\n\n                var subsid = _get(ChannelWithRouter.prototype.__proto__ || Object.getPrototypeOf(ChannelWithRouter.prototype), 'subscribe', this).call(this, topics, cb, options);\n                this.router.subscribeHandler([].concat(topics), options).then(function (topicsWithData) {\n                    if (topicsWithData && topicsWithData.length) {\n                        _this2.notify([].concat(topicsWithData));\n                    }\n                }, function (err) {\n                    _this2.unsubscribe(subsid);\n                    if (options && options.onError) {\n                        options.onError(err);\n                    }\n                });\n                return subsid;\n            }\n\n            /**\n             * Allow intercepting and handling/suppressing data to publish calls.\n             * @param {string | Publishable } topic\n             * @param {any} [value] item to publish\n             * @param {Object} [options]\n             * @returns {Promise}\n             */\n\n        }, {\n            key: 'publish',\n            value: function publish(topic, value, options) {\n                var _this3 = this;\n\n                var publishData = Object(__WEBPACK_IMPORTED_MODULE_0__channel_utils__[\"a\" /* normalizeParamOptions */])(topic, value, options);\n                return this.router.publishHandler(publishData.params, publishData.options).then(function (published) {\n                    return _get(ChannelWithRouter.prototype.__proto__ || Object.getPrototypeOf(ChannelWithRouter.prototype), 'publish', _this3).call(_this3, published, publishData.options);\n                });\n            }\n\n            /**\n             * Calls unsubscribe middleware *after* unsubscription with a list of recently unsubscribed topics\n             * @param  {string} token\n             * @returns {void}\n             */\n\n        }, {\n            key: 'unsubscribe',\n            value: function unsubscribe(token) {\n                var originalTopics = getTopicsFromSubsList(this.subscriptions);\n                _get(ChannelWithRouter.prototype.__proto__ || Object.getPrototypeOf(ChannelWithRouter.prototype), 'unsubscribe', this).call(this, token);\n                var remainingTopics = getTopicsFromSubsList(this.subscriptions);\n                var unsubscribedTopics = Object(__WEBPACK_IMPORTED_MODULE_1_lodash__[\"difference\"])(originalTopics, remainingTopics);\n\n                this.router.unsubscribeHandler(unsubscribedTopics, remainingTopics);\n            }\n\n            /**\n             * Calls unsubscribe middleware after unsubscribeAll on the channel\n             * @returns {void}\n             */\n\n        }, {\n            key: 'unsubscribeAll',\n            value: function unsubscribeAll() {\n                var originalTopics = getTopicsFromSubsList(this.subscriptions);\n                _get(ChannelWithRouter.prototype.__proto__ || Object.getPrototypeOf(ChannelWithRouter.prototype), 'unsubscribeAll', this).call(this);\n\n                return this.router.unsubscribeHandler(originalTopics, []);\n            }\n        }]);\n\n        return ChannelWithRouter;\n    }(BaseChannelManager);\n}\n\n/***/ }),\n/* 82 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__general__ = __webpack_require__(7);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"makePromise\", function() { return __WEBPACK_IMPORTED_MODULE_0__general__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"debounceAndMerge\", function() { return __WEBPACK_IMPORTED_MODULE_0__general__[\"a\"]; });\n\n\n/***/ })\n/******/ ])[\"default\"];\n\n\n// WEBPACK FOOTER //\n// flow.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8b65228350414fef48c2","module.exports = _;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 0\n// module chunks = 0","module.exports = {\n    prefix: 'f',\n    binderAttr: 'f-bind',\n\n    events: {\n        /** UI Change to publish to the channel. */\n        trigger: 'update.f.ui',\n\n        /** Trigger with payload '{attrToUpdate: value}', for e.g. { bind: 34 }. This will run this through all the converts and pass it to attr handler. Useful to by-pass getting this from the model directly.  */\n        convert: 'f.convert',\n\n        /** On a bind or other flow-related error  */\n        error: 'f.error',\n    },\n\n    attrs: {\n        checkboxOffValue: 'data-off-value',\n        //Used by repeat attr handler to keep track of template after first evaluation\n        repeat: {\n            templateId: 'repeat-template-id' //don't prefix by f or dom-manager unbind will kill it\n        },\n    },\n\n    errorAttr: 'data-flow-error',\n    animation: {\n        addAttr: 'data-add',\n        changeAttr: 'data-update',\n        initialAttr: 'data-initial',\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","const CHANNEL_DELIMITER = ':';\n\nexport { default as silencable } from './silencable';\nexport { default as excludeReadOnly } from './exclude-read-only';\n\n/**\n * \n * @param {string} text\n * @returns {string}\n */\nexport function stripSuffixDelimiter(text) {\n    if (text && text.indexOf(CHANNEL_DELIMITER) === (text.length - 1)) {\n        text = text.replace(CHANNEL_DELIMITER, '');\n    }\n    return text;\n}\n\n/**\n * \n * @param {Publishable[]} dataArray \n * @param {string} prefix \n * @returns {Publishable[]} array with name prefixed\n */\nexport function mapWithPrefix(dataArray, prefix) {\n    if (!prefix) return dataArray;\n    return (dataArray || []).map(function (datapt) {\n        const name = (prefix + datapt.name).replace(/:$/, ''); //replace trailing delimiters\n        return $.extend(true, {}, datapt, { name: name });\n    });\n}\n\n/**\n * \n * @param {Function} callback \n * @param {string|string[]} prefixList\n * @returns {Function}\n */\nexport function withPrefix(callback, prefixList) {\n    const arr = [].concat(prefixList);\n\n    /**\n     * @param {Publishable[]} data\n     */\n    return function (data) {\n        arr.forEach(function (prefix) {\n            const mapped = mapWithPrefix(data, prefix);\n            callback(mapped);\n        });\n    };\n}\n\n/**\n * \n * @param {string[]} list \n * @param {string} prefix\n * @returns {string[]} Item with prefix removed\n */\nexport function unprefixTopics(list, prefix) {\n    if (!prefix) return list;\n    const unprefixed = list.map(function (item) {\n        return item.replace(prefix, '');\n    });\n    return unprefixed;\n}\n\n/**\n * \n * @param {Publishable[]} list \n * @param {string} prefix\n * @returns {Publishable[]} Item with prefix removed\n */\nexport function unprefix(list, prefix) {\n    if (!prefix) return list;\n    const unprefixed = list.map(function (item) {\n        if (item.name) {\n            return $.extend(true, {}, item, { name: item.name.replace(prefix, '') });\n        }\n        return item.replace(prefix, '');\n    });\n    return unprefixed;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-router/utils/index.js","/* eslint-disable complexity */\nfunction toImplicitType(data) {\n    const objRegex = /^(?:\\{.*\\})$/;\n    const arrRegex = /^(?:\\[.*])$/;\n\n    let converted = data;\n    if (typeof data === 'string') {\n        converted = data.trim();\n\n        if (converted === 'true') {\n            converted = true;\n        } else if (converted === 'false') {\n            converted = false;\n        } else if (converted === 'null') {\n            converted = null;\n        } else if (converted === 'undefined') {\n            converted = '';\n        } else if (converted.charAt(0) === '\\'' || converted.charAt(0) === '\"') {\n            converted = converted.substring(1, converted.length - 1);\n        } else if ($.isNumeric(converted)) {\n            converted = +converted;\n        } else if (arrRegex.test(converted)) {\n            const bracketReplaced = converted.replace(/[[\\]]/g, '');\n            if (!bracketReplaced) return [];\n            const parsed = bracketReplaced.split(/,(?![^[]*])/).map((val)=> {\n                return toImplicitType(val);\n            });\n            return parsed;\n        } else if (objRegex.test(converted)) {\n            try {\n                converted = JSON.parse(converted);\n            } catch (e) {\n                console.error('toImplicitType: couldn\\'t convert', converted);\n            }\n        }\n    }\n    return converted;\n}\n\nfunction splitUnescapedCommas(str) {\n    const regex = /(\\\\.|[^,])+/g;\n    let m;\n\n    const op = [];\n    while ((m = regex.exec(str)) !== null) { //eslint-disable-line\n        // This is necessary to avoid infinite loops with zero-width matches\n        if (m.index === regex.lastIndex) {\n            regex.lastIndex++;\n        }\n        m.forEach(function (match, groupIndex) {\n            if (groupIndex === 0) {\n                op.push(match.replace('\\\\', ''));\n            }\n        });\n    }\n    return op;\n}\n\nfunction splitNameArgs(value) {\n    value = value.trim();\n    const fnName = value.split('(')[0];\n    const params = value.substring(value.indexOf('(') + 1, value.indexOf(')'));\n    const args = splitUnescapedCommas(params).map((p)=> p.trim());\n    return { name: fnName, args: args };\n}\n\n/**\n * @param  {string} value\n * @returns {{ name: string, value: any}[]}       [description]\n */\nfunction toPublishableFormat(value) {\n    const OPERATIONS_SEPERATOR = '&&';\n    const split = (value || '').split(OPERATIONS_SEPERATOR);\n    const listOfOperations = split.map(function (value) {\n        if (value && value.indexOf('=') !== -1) {\n            const split = value.split('=');\n            return { name: split[0].trim(), value: split[1].trim() };\n        }\n        const parsed = splitNameArgs(value);\n        return { name: parsed.name, value: parsed.args };\n    });\n    return listOfOperations;\n}\n\nexport { toImplicitType, toPublishableFormat, splitNameArgs };\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/parse-utils.js","/**\n * \n * @param {Object} obj\n * @returns {Publishable[]}\n */\nexport function objectToPublishable(obj) {\n    var mapped = Object.keys(obj || {}).map(function (t) {\n        return { name: t, value: obj[t] };\n    });\n    return mapped;\n}\n\n/**\n * Converts arrays of the form [{ name: '', value: ''}] to {[name]: value}\n * @param {Publishable[]} arr\n * @param {Object} [mergeWith]\n * @returns {Object}\n */\nexport function publishableToObject(arr, mergeWith) {\n    var result = (arr || []).reduce(function (accum, topic) {\n        accum[topic.name] = topic.value;\n        return accum;\n    }, $.extend(true, {}, mergeWith));\n    return result;\n}\n\n/**\n * @typedef NormalizedParam\n * @property {Publishable[]} params\n * @property {Object} options\n */\n\n/**\n *\n * @param {string|Object|Array} topic \n * @param {*} publishValue \n * @param {Object} [options]\n * @returns {NormalizedParam}\n */\nexport function normalizeParamOptions(topic, publishValue, options) {\n    if (!topic) {\n        return { params: [], options: {} };\n    }\n    if ($.isPlainObject(topic)) {\n        return { params: objectToPublishable(topic), options: publishValue };\n    }\n    if (Array.isArray(topic)) {\n        return { params: topic, options: publishValue };\n    }\n    return { params: [{ name: topic, value: publishValue }], options: options };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-utils.js","import { groupByHandlers, groupSequentiallyByHandlers, normalizeSubscribeResponse } from './utils/handler-utils';\nimport { unprefix, unprefixTopics, mapWithPrefix, silencable, excludeReadOnly } from './utils';\nimport { makePromise } from 'utils/general';\nimport _ from 'lodash';\n\n\n/**\n * Handle subscriptions\n * @param  {Handler[]} handlers Array of the form [{ match: function (){}, }]\n * @param  {Array<string>} topics   Array of strings\n * @param  {SubscribeOptions} [options]\n * @returns {Promise<Publishable[]>} Returns populated topics if available\n */\nexport function notifySubscribeHandlers(handlers, topics, options) {\n    const grouped = groupByHandlers(topics, handlers);\n    const promises = [];\n    grouped.filter((handler)=> handler.subscribeHandler).forEach(function (handler) {\n        const mergedOptions = $.extend(true, {}, handler.options, options);\n        const unprefixed = unprefixTopics(handler.data, handler.matched);\n        const promise = makePromise(()=> {\n            const subsResponse = handler.subscribeHandler(unprefixed, mergedOptions, handler.matched);\n            return subsResponse;\n        }).then((topicsWithData)=> {\n            const normalized = normalizeSubscribeResponse(topicsWithData, unprefixed);\n            const prefixed = mapWithPrefix(normalized, handler.matched);\n            return prefixed;\n        });\n        promises.push(promise);\n    });\n    return $.when.apply(null, promises).then(function () {\n        const arr = [].concat.apply([], arguments);\n        return arr;\n    });\n}\n\n/**\n * \n * @param {Handler[]} handlers \n * @param {Array<string>} recentlyUnsubscribedTopics\n * @param {Array<string>} remainingTopics \n */\nexport function notifyUnsubscribeHandlers(handlers, recentlyUnsubscribedTopics, remainingTopics) {\n    handlers = handlers.map(function (h, index) {\n        h.unsubsKey = index;\n        return h;\n    });\n\n    const unsubsGrouped = groupByHandlers(recentlyUnsubscribedTopics, handlers);\n    const remainingGrouped = groupByHandlers(remainingTopics, handlers);\n\n    unsubsGrouped.filter((h)=> h.unsubscribeHandler).forEach(function (handler) {\n        const unprefixedUnsubs = unprefixTopics(handler.data, handler.matched);\n        const matchingRemainingHandler = _.find(remainingGrouped, function (remainingHandler) {\n            return remainingHandler.unsubsKey === handler.unsubsKey;\n        });\n        const matchingTopicsRemaining = matchingRemainingHandler ? matchingRemainingHandler.data : [];\n        const unprefixedRemaining = unprefixTopics(matchingTopicsRemaining || [], handler.matched);\n        handler.unsubscribeHandler(unprefixedUnsubs, unprefixedRemaining);\n    });\n}\n/**\n * \n * @param {Handler[]} handlers \n * @param {Publishable[]} publishData \n * @param {PublishOptions} [options]\n * @returns {Promise}\n */\nexport function passthroughPublishInterceptors(handlers, publishData, options) {\n    const grouped = groupSequentiallyByHandlers(publishData, handlers);\n    let $initialProm = $.Deferred().resolve([]).promise();\n    grouped.forEach(function (handler) {\n        $initialProm = $initialProm.then(function (dataSoFar) {\n            const mergedOptions = $.extend(true, {}, handler.options, options);\n            const unprefixed = unprefix(handler.data, handler.matched);\n\n            const publishableData = excludeReadOnly(unprefixed, mergedOptions.readOnly);\n            if (!publishableData.length) {\n                return dataSoFar;\n            }\n\n            const result = handler.publishHandler ? handler.publishHandler(publishableData, mergedOptions, handler.matched) : publishableData;\n            const publishProm = $.Deferred().resolve(result).promise();\n            return publishProm.then(function (published) {\n                return silencable(published, mergedOptions.silent);\n            }).then(function (published) {\n                let mapped = mapWithPrefix(published, handler.matched);\n                if (handler.isDefault && handler.matched) {\n                    mapped = mapped.concat(published);\n                }\n                return mapped;\n            }).then(function (mapped) {\n                return [].concat(dataSoFar, mapped);\n            });\n        });\n    });\n    return $initialProm;\n}\n\n/**\n * Router\n * @param  {Handler[]} handlers\n * @param {Object} [options]\n * @param {Function} [notifier]\n * @returns {Router}\n */\nexport default function router(handlers, options, notifier) {\n    let myHandlers = (handlers || []).map((Handler)=> {\n        let handler = Handler;\n        if (_.isFunction(Handler)) {\n            handler = new Handler(options, notifier);\n            $.extend(this, handler.expose);\n        }\n        if (typeof handler.match === 'string') {\n            const matchString = handler.match;\n            handler.name = matchString;\n            handler.match = (t)=> t === matchString ? '' : false;\n        }\n        return handler;\n    });\n\n    const expose = myHandlers.reduce((accum, h)=> {\n        $.extend(true, accum, h.expose);\n        return accum;\n    }, {});\n\n    return {\n        expose: expose,\n        match: (topic)=> {\n            return myHandlers.reduce((match, handler)=> {\n                const matched = handler.match(topic);\n                if (match === false && matched !== false) {\n                    return '';\n                }\n                return match;\n            }, false);\n        },\n\n        /**\n         * @param {Array<string>} topics\n         * @param {SubscribeOptions} [options]\n         * @returns {Promise<Publishable[]>} Returns populated topics if available\n         */\n        subscribeHandler: function (topics, options) {\n            return notifySubscribeHandlers(myHandlers, topics, options);\n        },\n        /**\n         * @param {Array<string>} recentlyUnsubscribedTopics\n         * @param {Array<string>} remainingTopics\n         * @returns {void}\n         */\n        unsubscribeHandler: function (recentlyUnsubscribedTopics, remainingTopics) {\n            return notifyUnsubscribeHandlers(myHandlers, recentlyUnsubscribedTopics, remainingTopics);\n        },\n\n        /**\n         * @param {Publishable[]} data\n         * @param {PublishOptions} [options]\n         * @returns {Promise}\n         */\n        publishHandler: function (data, options) {\n            return passthroughPublishInterceptors(myHandlers, data, options);\n        },\n\n        addRoute: function (handler) {\n            if (!handler || !handler.match) {\n                throw Error('Handler does not have a valid `match` property');\n            }\n            handler.id = _.uniqueId('routehandler-');\n            myHandlers.unshift(handler);\n            return handler.id;\n        },\n        removeRoute: function (routeid) {\n            myHandlers = myHandlers.filter((handler)=> {\n                return handler.id !== routeid;\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-router/index.js","const ROUTE_DELIMITER = ':';\n\n/**\n * \n * @param {string} prefix\n * @returns {matchFunction}\n */\nexport function matchPrefix(prefix) {\n    return function prefixMatcher(topic) {\n        const hasPrefix = topic.indexOf(prefix) === 0;\n        if (hasPrefix) return prefix;\n\n        const isOnlyPrefix = prefix.replace(/:/g, '') === topic;\n        if (isOnlyPrefix) return topic;\n\n        return false;\n    };\n}\n\n/**\n* \n* @param {string} prefix\n* @returns {matchFunction}\n*/\nexport function matchDefaultPrefix(prefix) {\n    return function defaultPrefixMatcher(topic, forcePrefix) {\n        const hasPrefix = topic.indexOf(prefix) === 0;\n        return (hasPrefix || forcePrefix) ? prefix : '';\n    };\n}\n\n/**\n * \n * @param {string} regex\n * @returns {matchFunction}\n */\nexport function matchRegex(regex) {\n    var toMatch = new RegExp('^' + regex + ROUTE_DELIMITER);\n    return function regexMatcher(topic) {\n        var match = topic.match(toMatch);\n        if (match && match.length) {\n            return match[0];\n        }\n        return false;\n    };\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/route-matchers.js","import { uniqueId, random as _random } from 'lodash';\n\nexport { makePromise, promisify } from './promise-utils';\nexport { default as debounceAndMerge } from './debounce-and-merge';\n\nexport function random(prefix, min, max) {\n    if (!min) {\n        min = parseInt(uniqueId(), 10);\n    }\n    if (!max) {\n        max = 100000; //eslint-disable-line no-magic-numbers\n    }\n    var rnd = _random(min, max, false) + '';\n    if (prefix) {\n        rnd = prefix + rnd;\n    }\n    return rnd;\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/general/index.js","import MetaRouteHandler from './run-meta-route-handler';\nimport VariablesRouteHandler from './run-variables-route-handler';\nimport OperationsRouteHandler from './run-operations-route-handler';\n\nimport router from 'channels/channel-router';\nimport { withPrefix, silencable } from 'channels/channel-router/utils';\nimport { matchPrefix, matchDefaultPrefix } from 'channels/route-handlers/route-matchers';\n\nimport _ from 'lodash';\nimport { objectToPublishable } from 'channels/channel-utils';\n\nexport const VARIABLES_PREFIX = 'variables:';\nexport const META_PREFIX = 'meta:';\nexport const OPERATIONS_PREFIX = 'operations:';\n\n/**\n * \n * @param {Publishable[]} result \n * @param {string[]} ignoreOperations \n * @returns {boolean}\n */\nexport function _shouldFetch(result, ignoreOperations) {\n    const filtered = (result || []).filter((r)=> {\n        const name = r.name || '';\n        const isIgnored = (ignoreOperations || []).indexOf(name.replace(OPERATIONS_PREFIX, '')) !== -1;\n        const isVariable = name.indexOf(VARIABLES_PREFIX) === 0;\n        const isOperation = name.indexOf(OPERATIONS_PREFIX) === 0;\n\n        return isVariable || (isOperation && !isIgnored);\n    });\n    return filtered.length > 0;\n}\n\nconst RunService = F.service.Run;\nexport default function GenericRunRouteHandler(config, notifier) {\n    const defaults = {\n        serviceOptions: {},\n        channelOptions: {\n            variables: {\n                autoFetch: true,\n                debounce: 200,\n                silent: false,\n                readOnly: false,\n            },\n            operations: {\n                readOnly: false,\n                silent: false,\n            },\n            meta: {\n                silent: false,\n                autoFetch: true,\n                readOnly: ['id', 'created', 'account', 'project', 'model', 'lastModified']\n            },\n        }\n    };\n    const opts = $.extend(true, {}, defaults, config);\n\n    const serviceOptions = _.result(opts, 'serviceOptions');\n\n    let $initialProm = null;\n    if (serviceOptions instanceof RunService) {\n        $initialProm = $.Deferred().resolve(serviceOptions).promise();\n    } else if (serviceOptions.then) {\n        $initialProm = serviceOptions;\n    } else {\n        const rs = new RunService(serviceOptions);\n        $initialProm = $.Deferred().resolve(rs).promise();\n    }\n\n    const operationNotifier = withPrefix(notifier, OPERATIONS_PREFIX);\n    const variableNotifier = withPrefix(notifier, [VARIABLES_PREFIX, '']);\n\n    const metaHandler = new MetaRouteHandler($initialProm, withPrefix(notifier, META_PREFIX));\n    const operationsHandler = new OperationsRouteHandler($initialProm, operationNotifier);\n    const variablesHandler = new VariablesRouteHandler($initialProm, variableNotifier);\n\n    let subscribed = false;\n    const channelOptions = opts.channelOptions;\n    $initialProm.then((rs)=> {\n        if (rs.channel && !subscribed) {\n            subscribed = true;\n            const { TOPICS } = rs.channel;\n            const subscribeOpts = { includeMine: false };\n            //TODO: Provide subscription fn to individual channels and let them handle it?\n            rs.channel.subscribe(TOPICS.RUN_VARIABLES, (data, meta)=> {\n                const publishable = objectToPublishable(data);\n                const excludingSilenced = silencable(publishable, channelOptions.variables.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                variablesHandler.notify(excludingSilenced, meta);\n                variablesHandler.fetch();//Variables channel #notify also does a fetch, but this is not supposed to know about that. Debouncing will take care of duplicate fetches anyway.\n            }, this, subscribeOpts);\n            rs.channel.subscribe(TOPICS.RUN_OPERATIONS, (data, meta)=> {\n                const publishable = [{ name: data.name, value: data.result }];\n                const excludingSilenced = silencable(publishable, channelOptions.operations.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                operationsHandler.notify(excludingSilenced, meta);\n                variablesHandler.fetch();\n            }, this, subscribeOpts);\n            rs.channel.subscribe(TOPICS.CONSENSUS_UPDATE, (consensus, meta)=> {\n                if (consensus.closed) {\n                    variablesHandler.fetch(); \n                    // I should also do operationsHandler.notify but I don't know what to notify them about\n                    //Just remove the 'include Mine' check for operations? That's just cached anyway\n                }\n            }, this, { includeMine: true });\n            rs.channel.subscribe(TOPICS.RUN_RESET, (data, meta)=> {\n                const publishable = [{ name: 'reset', value: data }];\n                const excludingSilenced = silencable(publishable, channelOptions.operations.silent);\n                if (!excludingSilenced.length) {\n                    return;\n                }\n                operationsHandler.notify(excludingSilenced, meta);\n            }, this, subscribeOpts);\n\n            // rs.channel.subscribe('', (data, meta)=> {\n            //     console.log('everything', data, meta);\n            // });\n        }\n    });\n\n    const handlers = [\n        $.extend({}, metaHandler, { \n            name: 'meta',\n            match: matchPrefix(META_PREFIX),\n            options: opts.channelOptions.meta,\n        }),\n        $.extend({}, operationsHandler, { \n            name: 'operations',\n            match: matchPrefix(OPERATIONS_PREFIX),\n            options: opts.channelOptions.operations,\n        }),\n        $.extend({}, variablesHandler, { \n            isDefault: true,\n            name: 'variables',\n            match: matchDefaultPrefix(VARIABLES_PREFIX),\n            options: opts.channelOptions.variables,\n        }),\n    ];\n\n    // router.addRoute(prefix('meta:'), metaChannel, opts.channelOptions.meta);\n\n    const runRouter = router(handlers);\n    const oldhandler = runRouter.publishHandler;\n    runRouter.publishHandler = function (publishable) {\n        const prom = oldhandler.apply(router, arguments);\n        return prom.then(function (result) { //all the silencing will be taken care of by the router\n            const shouldFetch = _shouldFetch(result, ['reset']);\n            if (shouldFetch) {\n                const excludeFromFetch = result.map((r)=> r.name); //This was just published, no need to get the value again\n                variablesHandler.fetch({ exclude: excludeFromFetch });\n            }\n            return result;\n        });\n    };\n    return runRouter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/index.js","export function _findMostConsequtive(arr, match) {\n    const reduced = arr.reduce((accum, val)=> {\n        if (val === match) {\n            if (accum.prev === match) {\n                accum.count = accum.count + 1;\n            } else {\n                accum.count = 1;\n            }\n        }\n        accum.maxCount = Math.max(accum.maxCount, accum.count);\n        accum.prev = val;\n        return accum;\n    }, { prev: null, count: 0, maxCount: 0 });\n    return reduced.maxCount;\n}\n\nfunction buildDiffArray(currentcontents, newContents) {\n    return newContents.map((contents, index)=> {\n        const isSame = contents === currentcontents[index]; \n        return isSame;\n    });\n}\n\nfunction fill(count, val) {\n    const a = [];\n    for (let i = 0; i < count; i++) {\n        a.push(val);\n    }\n    return a;\n}\n\nfunction elToContents(el) {\n    //ignore data attributes for comparison\n    return el.outerHTML\n        .replace(/\\s?data-[a-zA-Z]*=['\"][a-zA-Z0-9]*['\"]/g, '')\n        .replace(/\\s\\s/g, ' ').trim();\n}\n\nfunction elementsToContents($els) {\n    return $els.map((index, child)=> {\n        return elToContents(child);\n    }).get();\n}\n\nconst defaults = {\n    addAttr: 'data-add',\n    changeAttr: 'data-update',\n    initialAttr: 'data-initial',\n};\n\n/**\n * Compares 2 lists and Adds add or update classes\n * @param {JQuery<HTMLElement>} $currentEls existing elements\n * @param {JQuery<HTMLElement>} $newEls   new elements\n * @param {boolean} isInitial check if this is initial data or it's updating\n * @param {{ addAttr: string, changeAttr: string}} [options]\n * @returns {JQuery<HTMLElement>} elements with updated attributes\n */\nexport function addChangeClassesToList($currentEls, $newEls, isInitial, options) {\n    const opts = $.extend({}, defaults, options);\n\n    let currentcontents = elementsToContents($currentEls);\n    const newContents = elementsToContents($newEls);\n    const reversedContents = currentcontents;\n\n    //Guess if data was added to end or beginning of array\n    const diffFromEnd = buildDiffArray(currentcontents, newContents);\n    const diffFromBeginning = buildDiffArray(reversedContents.slice().reverse(), newContents.slice().reverse());\n\n    const endMatches = _findMostConsequtive(diffFromEnd, true);\n    const beginningMatches = _findMostConsequtive(diffFromBeginning, true);\n\n    const placeHoldersCount = newContents.length - currentcontents.length;\n    const placeHolders = fill(placeHoldersCount, undefined);\n\n    if (beginningMatches <= endMatches) {\n        currentcontents = currentcontents.concat(placeHolders);\n    } else {\n        currentcontents = placeHolders.concat(currentcontents);\n    }\n\n    for (let i = 0; i < newContents.length; i++) {\n        const $el = $newEls.eq(i);\n        const curr = currentcontents[i];\n        $el.removeAttr(opts.initialAttr);\n\n        const contents = elToContents($el.get(0));\n        if (curr === undefined) {\n            $el.attr({\n                [opts.addAttr]: true,\n                [opts.initialAttr]: isInitial || null\n            });\n            $el.removeAttr(opts.changeAttr);\n        } else if (curr !== contents) {\n            $el.attr({\n                [opts.changeAttr]: true,\n                [opts.initialAttr]: isInitial || null\n            });\n            $el.removeAttr(opts.addAttr);\n        } else {\n            $el.removeAttr(`${opts.addAttr} ${opts.changeAttr}`);\n        }\n    }\n\n    return $newEls;\n}\n\nexport function addContentAndAnimate($el, newValue, isInitial, options) {\n    const opts = $.extend({}, defaults, options);\n    const current = $el.html().trim();\n\n    $el.removeAttr(`${opts.changeAttr} ${opts.initialAttr}`);\n    if (current === `${newValue}`.trim()) {\n        return $el;\n    }\n\n    $el.html(newValue);\n    setTimeout(function () {\n        $el.attr({\n            [opts.changeAttr]: true,\n            [opts.initialAttr]: isInitial || null //jquery removes if set to null\n        });\n    }, 0); //need this to trigger animation\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/animation.js","import { uniqueId } from 'lodash';\n\nconst CURRENT_INDEX_KEY = 'current-index';\nconst CURRENT_INDEX_ATTR = `data-${CURRENT_INDEX_KEY}`;\n\nexport function getKnownDataForEl($el) {\n    const closestKnownDataEl = $el.closest(`[${CURRENT_INDEX_ATTR}]`);\n    let knownData = {};\n    if (closestKnownDataEl.length) {\n        knownData = closestKnownDataEl.data(CURRENT_INDEX_KEY);\n    }\n    return knownData;\n}\nexport function updateKnownDataForEl($el, data) {\n    $el.attr(CURRENT_INDEX_ATTR, JSON.stringify(data));\n}\nexport function removeKnownData($el) {\n    $el.removeAttr(CURRENT_INDEX_ATTR);\n}\n\nexport function getTemplateTags(template) {\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n    const templateTagsUsed = template.match(/<%[=-]?([\\s\\S]+?)%>/g);\n    return templateTagsUsed || [];\n}\nexport function isTemplated(template) {\n    return getTemplateTags(template).length > 0;\n}\n\n\nexport function findMissingReferences(template, knownDataKeys) {\n    function isKnownTag(tag, knownTags) {\n        const match = knownDataKeys.find((key)=> {\n            const regex = new RegExp('\\\\b' + key + '\\\\b');\n            return regex.test(tag);\n        });\n        return match;\n    }\n\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n    const missingReferences = {};\n    const templateTagsUsed = getTemplateTags(template);\n    if (templateTagsUsed) {\n        templateTagsUsed.forEach(function (tag) {\n            if (tag.match(/\\w+/) && !isKnownTag(tag, knownDataKeys)) {\n                let refKey = missingReferences[tag];\n                if (!refKey) {\n                    refKey = uniqueId('no-ref');\n                    missingReferences[tag] = refKey;\n                }\n            }\n        });\n    }\n    return missingReferences;\n}\n\nfunction refToMarkup(refKey) {\n    return '<!--' + refKey + '-->';\n}\n\nexport function stubMissingReferences(template, missingReferences) {\n    template = template.replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n\n    Object.keys(missingReferences).forEach((tag)=> {\n        const refId = missingReferences[tag];\n        const r = new RegExp(tag, 'g');\n        template = template.replace(r, refToMarkup(refId));\n    });\n    return template;\n}\n\nexport function addBackMissingReferences(template, missingReferences) {\n    Object.keys(missingReferences).forEach((originalTemplateVal)=> {\n        const commentRef = missingReferences[originalTemplateVal];\n        const r = new RegExp(refToMarkup(commentRef), 'g');\n        template = template.replace(r, originalTemplateVal);\n    });\n\n    return template;\n}\n\n\nconst elTemplateMap = new WeakMap();\nexport function getOriginalContents($el, resolver) {\n    const el = $el.get(0);\n    let originalHTML = elTemplateMap.get(el);\n    if (!originalHTML && resolver) {\n        originalHTML = resolver($el).replace(/&lt;/g, '<').replace(/&gt;/g, '>');\n        elTemplateMap.set(el, originalHTML);\n    }\n    return originalHTML;\n}\nexport function clearOriginalContents($el) {\n    const el = $el.get(0);\n    elTemplateMap.delete(el);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attr-template-utils.js","/*eslint no-undef: 0*/\nimport { binderAttr, events } from '../../config';\nimport BaseView from './default-node';\n\nexport default BaseView.extend({\n    propertyHandlers: [],\n\n    uiChangeEvent: 'change.f-node-event',\n    getUIValue: function () {\n        return this.$el.val();\n    },\n\n    removeEvents: function () {\n        this.$el.off(this.uiChangeEvent);\n    },\n\n    initialize: function (options) {\n        const propName = this.$el.data(binderAttr);\n        if (options && options.triggerChangeOn) {\n            this.uiChangeEvent = options.triggerChangeOn;\n        }\n        if (propName) {\n            const changeHandler = function () {\n                const val = this.getUIValue();\n                const payload = [{ name: propName, value: val }];\n                \n                this.$el.trigger(events.trigger, { data: payload, source: 'bind', restoreOriginal: val.length === 0 });\n            }.bind(this);\n\n            const handlerDebounceTime = 200;\n            const debouncedHandler = _.debounce(changeHandler, handlerDebounceTime);\n            const handler = this.uiChangeEvent.indexOf('key') !== -1 ? debouncedHandler : changeHandler;\n            this.$el.off(this.uiChangeEvent).on(this.uiChangeEvent, handler);\n        }\n        BaseView.prototype.initialize.apply(this, arguments);\n    }\n}, { selector: 'input, select, textarea' });\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/node-manager/default-input-node.js","'use strict';\n\nvar BaseView = require('../../utils/base-view');\n\nmodule.exports = BaseView.extend({\n    propertyHandlers: [\n\n    ],\n\n    initialize: function () {\n    }\n}, { selector: '*' });\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/node-manager/default-node.js","const IN_OF_REGEX = /\\((.*)\\) (?:in|of)\\s+(.*)/;\nconst KEY_VALUE_REGEX = /(.*),(.*)/;\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nexport function extractVariableName(attrVal) {\n    const inMatch = attrVal.trim().match(IN_OF_REGEX);\n    const varName = inMatch ? inMatch[2] : attrVal;\n    return varName.trim();\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nexport function parseKeyAlias(attrVal) {\n    const inMatch = attrVal.match(IN_OF_REGEX);\n    if (!inMatch) {\n        return undefined;\n    }\n    const itMatch = inMatch[1].match(KEY_VALUE_REGEX);\n    const alias = itMatch ? itMatch[1].trim() : undefined;\n    return alias;\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nexport function parseValueAlias(attrVal) {\n    const inMatch = attrVal.match(IN_OF_REGEX);\n    if (!inMatch) {\n        return undefined;\n    }\n    const itMatch = inMatch[1].match(KEY_VALUE_REGEX);\n    const alias = itMatch ? itMatch[2] : inMatch[1];\n    return alias.trim();\n}\n\n\n//Public exports\n\nexport function aliasesFromTopics(topics, value) {\n    const relevantTopic = topics[0]; //doesn't support multiple topics\n\n    const defaultKey = $.isPlainObject(value) ? 'key' : 'index';\n    const keyAlias = relevantTopic.keyAlias || defaultKey;\n    const valueAlias = relevantTopic.valueAlias || 'value';\n\n    return { keyAlias: keyAlias, valueAlias: valueAlias };\n}\nexport function parseTopics(topics) {\n    const attrVal = topics[0].name; //doesn't support multiple topics\n    return [{\n        name: extractVariableName(attrVal),\n        keyAlias: parseKeyAlias(attrVal),\n        valueAlias: parseValueAlias(attrVal),\n    }];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/loop-attrs/loop-attr-utils.js","import { isFunction } from 'lodash';\n\n/**\n * @param {any} val \n * @returns {Promise}\n */\nexport function makePromise(val) {\n    //Can be replaced with Promise.resolve when we drop IE11;\n    // if (isFunction(val)) {\n    //     return Promise.resolve(val());\n    // }\n    // return Promise.resolve(val);\n    if (val && val.then) {\n        return val;\n    }\n    const $def = $.Deferred();\n    if (isFunction(val)) {\n        try {\n            const toReturn = val();\n            if (toReturn && toReturn.then) {\n                return toReturn.then((r)=> $def.resolve(r), ((e)=> $def.reject(e)));\n            }\n            $def.resolve(toReturn);\n        } catch (e) {\n            $def.reject(e);\n        }\n    } else {\n        $def.resolve(val);\n    }\n    return $def.promise();\n}\n\n/**\n * \n * @param {function(*)} fn \n * @returns {function(...any): Promise}\n */\nexport function promisify(fn) {\n    if (!isFunction(fn)) {\n        throw new Error(`Promisify requires a function, received ${typeof fn}`);\n    }\n    /**\n     * @param {...*} args \n     * @returns {Promise}\n     */\n    return function promisifiedFunction(args) {\n        const $def = $.Deferred();\n        try {\n            const toReturn = fn.apply(fn, arguments);\n            if (toReturn && toReturn.then) {\n                return toReturn.then((r)=> {\n                    return $def.resolve(r);\n                }, (e)=> {\n                    return $def.reject(e);\n                });\n            } else {\n                $def.resolve(toReturn);\n            }\n        } catch (e) {\n            $def.reject(e);\n        }\n        return $def.promise();\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/general/promise-utils.js","export function makeConsensusService(consensisAPIResponse) {\n    return new window.F.service.Consensus({\n        name: consensisAPIResponse.stage,\n        consensusGroup: consensisAPIResponse.name,\n        worldId: consensisAPIResponse.worldId,\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-utils.js","var interpolationRegex = /<(.*?)>/g;\n/**\n *  \n * @param {string} topic topic to extract dependencies from\n * @returns {string[]} dependencies\n */\nexport function extractDependencies(topic) {\n    var deps = (topic.match(interpolationRegex) || []).map((val)=> {\n        return val.substring(1, val.length - 1); \n    });\n    return deps;\n}\n\n/**\n * @param {string} topic topic with dependencies\n * @param {{string: any}} data object with values of dependencies\n * @returns {string} interpolated string\n */\nexport function interpolateWithValues(topic, data) {\n    var interpolatedTopic = topic.replace(interpolationRegex, (match, dependency)=> {\n        var val = data[dependency];\n        var toReplace = Array.isArray(val) ? val[val.length - 1] : val;\n        return toReplace;\n    });\n    return interpolatedTopic;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager-enhancements/interpolatable/interpolatable-utils.js","import domManager from './dom/dom-manager';\n\nimport ChannelManager from 'channels/configured-channel-manager';\nimport config from 'config';\n\nimport * as utils from './utils';\n\nconst Flow = {\n    dom: domManager,\n    utils: utils,\n    initialize: function (config) {\n        const model = $('body').data('f-model');\n        const defaults = {\n            channel: {\n                //FIXME: Defaults can't be here..\n                defaults: {\n                    run: {\n                        model: model,\n                    }\n                },\n            },\n            dom: {\n                root: 'body',\n                autoBind: true\n            }\n        };\n\n        const options = $.extend(true, {}, defaults, config);\n   \n        if (config && config.channel && (config.channel instanceof ChannelManager)) {\n            this.channel = config.channel;\n        } else {\n            this.channel = new ChannelManager(options.channel);\n        }\n\n        const prom = domManager.initialize($.extend(true, {\n            channel: this.channel\n        }, options.dom));\n        \n        this.channel.subscribe('operations:reset', function () {\n            domManager.unbindAll();\n            domManager.bindAll();\n        });\n\n        return prom;\n    }\n};\nFlow.ChannelManager = ChannelManager;\nFlow.constants = config;\n//set by grunt\nif (RELEASE_VERSION) Flow.version = RELEASE_VERSION; //eslint-disable-line no-undef\nexport default Flow;\n\n\n\n// WEBPACK FOOTER //\n// ./src/flow.js","import { getConvertersForEl, getChannelForAttribute, getChannelConfigForElement, parseTopicsFromAttributeValue } from './dom-manager-utils/dom-parse-helpers';\n\nimport { addPrefixToTopics, addDefaultPrefix } from './dom-manager-utils/dom-channel-prefix-helpers';\nimport { toImplicitType } from 'utils/parse-utils';\n\nimport { pick, isEqual } from 'lodash';\n\nimport { prefix, errorAttr, events, animation } from '../config';\n\nimport converterManager from './converter-manager';\nimport nodeManager from './node-manager';\nimport attrManager from './attribute-manager';\nimport autoUpdatePlugin from './plugins/auto-update-bindings';\n\nexport default (function () {\n    //Jquery selector to return everything which has a f- property set\n    $.expr.pseudos[prefix] = function (el) {\n        if (!el || !el.attributes) {\n            return false;\n        }\n        for (let i = 0; i < el.attributes.length; i++) {\n            const attr = el.attributes[i].nodeName;\n            if (attr.indexOf('data-' + prefix) === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n     * @param {JQuery<HTMLElement>} root\n     * @returns {JQuery<HTMLElement>}\n     */\n    function getMatchingElements(root) {\n        const $root = $(root);\n        let matchedElements = $root.find(':' + prefix);\n        if ($root.is(':' + prefix)) {\n            matchedElements = matchedElements.add($root);\n        }\n        return matchedElements;\n    }\n\n    /**\n     * @param {JQuery<HTMLElement> | HTMLElement} element\n     * @param {*} [context]\n     * @returns {HTMLElement}\n     */\n    function getElementOrError(element, context) {\n        const el = (element instanceof $) ? element.get(0) : element;\n        if (!el || !el.nodeName) {\n            console.error(context, 'Expected to get DOM Element, got ', element);\n            throw new Error(context + ': Expected to get DOM Element, got' + (typeof element));\n        }\n        return el;\n    }\n\n    //Unbind utils\n    function triggerError($el, e) {\n        let msg = e.message || e;\n        if ($.isPlainObject(msg)) {\n            msg = JSON.stringify(msg);\n        }\n        $el.attr(errorAttr, msg).trigger(events.error, e);\n    }\n    function unbindAllAttributes(domEl) {\n        const $el = $(domEl);\n        $(domEl.attributes).each(function (index, nodeMap) {\n            let attr = nodeMap.nodeName;\n            const wantedPrefix = 'data-f-';\n            if (attr.indexOf(wantedPrefix) === 0) {\n                attr = attr.replace(wantedPrefix, '');\n                const handler = attrManager.getHandler(attr, $el);\n                if (handler.unbind) {\n                    handler.unbind(attr, $el);\n                }\n            }\n        });\n    }\n    function unbindAllNodeHandlers(domEl) {\n        const $el = $(domEl);\n        //FIXME: have to readd events to be able to remove them. Ugly\n        const Handler = nodeManager.getHandler($el);\n        const h = new Handler.handle({\n            el: domEl\n        });\n        if (h.removeEvents) {\n            h.removeEvents();\n        }\n    }\n    function removeAllSubscriptions(subscriptions, channel, el) {\n        [].concat(subscriptions).forEach(function (subs) {\n            try {\n                channel.unsubscribe(subs);\n            } catch (e) {\n                triggerError(el, e);\n            }\n        });\n    }\n\n\n    const publicAPI = {\n\n        nodes: nodeManager,\n        attributes: attrManager,\n        converters: converterManager,\n\n        matchedElements: new Map(),\n\n        /**\n         * Unbind the element; unsubscribe from all updates on the relevant channels.\n         *\n         * @param {JQuery<HTMLElement> | HTMLElement} element The element to remove from the data binding.\n         * @param {Channel} channel (Optional) The channel from which to unsubscribe. Defaults to the [variables channel](../channels/variables-channel/).\n         * @returns {void}\n         */\n        unbindElement: function (element, channel) {\n            if (!channel) {\n                channel = this.options.channel;\n            }\n            const domEl = getElementOrError(element);\n            const $el = $(element);\n            const existingData = this.matchedElements.get(domEl);\n            if (!$el.is(':' + prefix) || !existingData) {\n                return;\n            }\n            this.matchedElements.delete(element);\n            const subscriptions = Object.keys(existingData).reduce((accum, a)=> {\n                const subsid = existingData[a].subscriptionId;\n                if (subsid) accum.push(subsid);\n                return accum;\n            }, []);\n\n            unbindAllNodeHandlers(domEl);\n            unbindAllAttributes(domEl);\n            removeAllSubscriptions(subscriptions, channel, $el);\n\n            const animAttrs = Object.keys(animation).join(' ');\n            $el.removeAttr(animAttrs);\n\n            Object.keys($el.data()).forEach(function (key) {\n                if (key.indexOf('f-') === 0 || key.match(/^f[A-Z]/)) {\n                    $el.removeData(key);\n                }\n            });\n        },\n\n        /**\n         * Bind the element: subscribe from updates on the relevant channels.\n         *\n         * @param {HTMLElement | JQuery<HTMLElement>} element The element to add to the data binding.\n         * @param {Channel} channel (Optional) The channel to subscribe to. Defaults to the [run channel](../channels/run-channel/).\n         * @returns {void}\n         */\n        bindElement: function (element, channel) {\n            const opts = this.options || {};\n            if (!channel) {\n                channel = opts.channel;\n            }\n            // this.unbindElement(element); //unbind actually removes the data,and jquery doesn't refetch when .data() is called..\n            const domEl = getElementOrError(element);\n            const $el = $(domEl);\n            const isExcluded = opts.exclude && $el.is(opts.exclude);\n            if (!$el.is(`:${prefix}`) || isExcluded) {\n                return;\n            }\n\n            //Send to node manager to handle ui changes\n            const changeEventOverrides = opts.uiChangeEvents || {};\n            const triggerSelector = Object.keys(changeEventOverrides).find((selector)=> {\n                return $el.is(selector);\n            });\n            const matchingEvent = triggerSelector && changeEventOverrides[triggerSelector];\n            const Handler = nodeManager.getHandler($el);\n            new Handler.handle({\n                el: domEl,\n                triggerChangeOn: matchingEvent\n            });\n\n            const filterPrefix = `data-${prefix}-`;\n            const attrList = {};\n            $(domEl.attributes).each(function (index, nodeMap) {\n                let attr = nodeMap.nodeName;\n                if (attr.indexOf(filterPrefix) !== 0) {\n                    return;\n                }\n                attr = attr.replace(filterPrefix, '');\n\n                const attrVal = nodeMap.value;\n                let topics = parseTopicsFromAttributeValue(attrVal);\n\n                const handler = attrManager.getHandler(attr, $el);\n                if (handler && handler.init) {\n                    handler.init(attr, topics, $el);\n                }\n                if (topics.length && handler && handler.parse) {\n                    topics = [].concat(handler.parse(topics));\n                }\n\n                const channelPrefix = getChannelForAttribute($el, attr);\n                topics = addPrefixToTopics(topics, channelPrefix);\n\n                const converters = getConvertersForEl($el, attr);\n                attrList[attr] = {\n                    channelPrefix: channelPrefix,\n                    topics: topics,\n                    converters: converters, //Store once instead of calculating on demand. Avoids having to parse through dom every time\n                };\n            });\n            //Need this to be set before subscribing or callback maybe called before it's set\n            this.matchedElements.set(domEl, attrList);\n\n            const channelConfig = getChannelConfigForElement(domEl);\n            const attrsWithSubscriptions = Object.keys(attrList).reduce((accum, name)=> {\n                const attr = attrList[name];\n                const { topics, channelPrefix } = attr;\n                if (!topics.length) {\n                    accum[name] = attr;\n                    return accum;\n                }\n\n                const subsOptions = $.extend({\n                    batch: true,\n                    onError: (e)=> {\n                        console.error('DomManager: Subscription error', domEl, e);\n                        triggerError($el, e);\n                    }\n                }, channelConfig);\n                const subscribableTopics = topics.map((t)=> t.name);\n                const subsid = channel.subscribe(subscribableTopics, (data, meta)=> {\n                    if (meta && isEqual(data, meta.previousData)) {\n                        return;\n                    }\n                    const toConvert = {};\n                    if (subscribableTopics.length === 1) { //If I'm only interested in 1 thing pass in value directly, else make a map;\n                        toConvert[name] = data[subscribableTopics[0]];\n                    } else {\n                        const dataForAttr = pick(data, subscribableTopics) || {};\n                        toConvert[name] = Object.keys(dataForAttr).reduce((accum, key)=> {\n                            //If this was through a auto-prefixed channel attr return what was bound\n                            const toReplace = new RegExp(`^${channelPrefix}:`);\n                            const k = channelPrefix ? key.replace(toReplace, '') : key;\n                            accum[k] = dataForAttr[key];\n                            return accum;\n                        }, {});\n                    }\n                    $el.removeAttr(errorAttr).trigger(events.convert, toConvert);\n                }, subsOptions);\n\n                accum[name] = Object.assign({}, attr, { subscriptionId: subsid });\n                return accum;\n            }, {});\n\n            this.matchedElements.set(domEl, attrsWithSubscriptions);\n        },\n\n        /**\n         * Bind all provided elements.\n         *\n         * @param  {JQuery<HTMLElement> | HTMLElement[]} [elementsToBind] (Optional) If not provided, binds all matching elements within default root provided at initialization.\n         * @returns {void}\n         */\n        bindAll: function (elementsToBind) {\n            if (!elementsToBind) {\n                elementsToBind = getMatchingElements(this.options.root);\n            } else if (!Array.isArray(elementsToBind)) {\n                elementsToBind = getMatchingElements(elementsToBind);\n            }\n\n            //parse through dom and find everything with matching attributes\n            $.each(elementsToBind, (index, element)=> {\n                this.bindElement(element, this.options.channel);\n            });\n        },\n        /**\n         * Unbind provided elements.\n         *\n         * @param  {JQuery<HTMLElement> | HTMLElement[]} [elementsToUnbind] (Optional) If not provided, unbinds everything.\n         * @returns {void}\n         */\n        unbindAll: function (elementsToUnbind) {\n            const me = this;\n            if (!elementsToUnbind) {\n                elementsToUnbind = [];\n                this.matchedElements.forEach((val, key)=> {\n                    elementsToUnbind.push(key);\n                });\n            } else if (!Array.isArray(elementsToUnbind)) {\n                elementsToUnbind = getMatchingElements(elementsToUnbind);\n            }\n            $.each(elementsToUnbind, function (index, element) {\n                me.unbindElement(element, me.options.channel);\n            });\n        },\n\n        plugins: {},\n\n        /**\n         * Initialize the DOM Manager to work with a particular HTML element and all elements within that root. Data bindings between individual HTML elements and the model variables specified in the attributes will happen via the channel.\n         *\n         * @param {Object} options (Optional) Overrides for the default options.\n         * @param {string} options.root The root HTML element being managed by this instance of the DOM Manager. Defaults to `body`.\n         * @param {Object} options.channel The channel to communicate with. Defaults to the Channel Manager from [Epicenter.js](../../../api_adapters/).\n         * @param {boolean} options.autoBind If `true` (default), any variables added to the DOM after `Flow.initialize()` has been called will be automatically parsed, and subscriptions added to channels. Note, this does not work in IE versions < 11.\n         * @returns {Promise}\n         */\n        initialize: function (options) {\n            const defaults = {\n                /**\n                 * Root of the element for flow.js to manage from.\n                 * @type {string} jQuery selector\n                 */\n                root: 'body',\n                channel: null,\n\n                /**\n                 * Exclude elements matching these selectors from being bound\n                 */\n                exclude: 'pre *',\n\n                /**\n                 * Any elements added to the DOM after `Flow.initialize()` has been called will be automatically bound, and subscriptions added to channels.\n                 * @type {boolean}\n                 */\n                autoBind: true,\n\n                /**\n                 * By default Flow triggers events on 'change', but you may want to trigger on, say, 'keypress' for specific inputs. Set { uiChangeEvents: { [selector]: 'keypress' } } for such cases\n                 */\n                uiChangeEvents: {\n\n                }\n            };\n            $.extend(defaults, options);\n\n            const channel = defaults.channel;\n\n            this.options = defaults;\n\n            const me = this;\n            const $root = $(defaults.root);\n\n            function attachUIListeners($root) {\n                function parseValue(value, converters) {\n                    if (Array.isArray(value)) {\n                        const parsed = value.map(function (val) {\n                            return toImplicitType(val);\n                        });\n                        return converterManager.parse(parsed, converters);\n                    }\n                    return converterManager.parse(toImplicitType(value), converters);\n                }\n\n                $root.off(events.trigger).on(events.trigger, function (evt, params) {\n                    const elMeta = me.matchedElements.get(evt.target);\n                    const { data, source, options, restoreOriginal } = params;\n\n                    if (!elMeta || !data) {\n                        return;\n                    }\n                    const sourceMeta = elMeta[source] || {};\n                    const { channelPrefix, converters } = sourceMeta;\n                    const $el = $(evt.target);\n\n                    const parsed = ([].concat(data)).map(function (action) {\n                        const { name, value } = action;\n                        const parsedValue = parseValue(value, converters);\n                        const actualName = name.split('|')[0].trim(); //FIXME: this shouldn't know about the pipe syntax\n                        const prefixedName = addDefaultPrefix(actualName, source, channelPrefix);\n                        return { name: prefixedName, value: parsedValue };\n                    }, []);\n\n                    if (restoreOriginal) {\n                        //Ideally this should simply be a fetch to the previous version of the variable to use that.\n                        me.unbindElement($el, channel);\n                        me.bindElement($el, channel);\n                        return;\n                    }\n\n                    channel.publish(parsed, options).then((result)=> {\n                        if (!result || !result.length) {\n                            return;\n                        }\n                        const last = result[result.length - 1];\n                        $el.trigger(events.convert, { [source]: last.value });\n                    }, (e)=> {\n                        triggerError($el, e);\n                    });\n                });\n            }\n\n            function attachConversionListner($root) {\n                // data = {proptoupdate: value}\n                $root.off(events.convert).on(events.convert, function (evt, data) {\n                    const $el = $(evt.target);\n\n                    const elMeta = me.matchedElements.get(evt.target);\n                    if (!elMeta) {\n                        return;\n                    }\n\n                    Object.keys(data).forEach((prop)=> {\n                        const val = data[prop];\n                        const { converters, topics } = elMeta[prop];\n                        const convertedValue = converterManager.convert(val, converters);\n\n                        const handler = attrManager.getHandler(prop, $el);\n                        handler.handle(convertedValue, prop, $el, topics);\n                    });\n                });\n            }\n\n            const deferred = $.Deferred();\n            $(function () {\n                me.bindAll();\n\n                attachUIListeners($root);\n                attachConversionListner($root);\n\n                me.plugins.autoBind = autoUpdatePlugin($root.get(0), me, me.options.autoBind);\n\n                deferred.resolve($root);\n                $root.trigger('f.domready');\n            });\n\n            return deferred.promise();\n        }\n    };\n\n    return $.extend(this, publicAPI);\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/dom-manager.js","/**\n * @param {string} conv \n * @returns {string[]}\n */\nfunction convertersToArray(conv) {\n    if (!conv || !conv.trim()) return [];\n    return conv.split('|').map((v)=> v.trim());\n}\n\n/**\n * @param {JQuery<HTMLElement>} $el\n * @param {string} attribute \n * @returns {string[]}\n */\nfunction getConvertersFromAttr($el, attribute) {\n    const attrVal = $el.attr(`data-f-${attribute}`);\n    const withConv = convertersToArray(attrVal);\n    if (withConv.length > 1) {\n        return withConv.slice(1); //First item will be the topic\n    }\n    return [];\n}\nfunction getFConvertAttrVal($el, suffix) {\n    const baseAttr = 'data-f-convert';\n    const suffixAttr = suffix ? `-${suffix}` : '';\n    const conv = $el.attr(`${baseAttr}${suffixAttr}`); //.data shows value cached by jquery\n    return convertersToArray(conv);\n}\n\n/**\n * @param {JQuery<HTMLElement>} $el  \n * @param {string} attribute \n * @returns {string[]} converters\n */\nexport function getConvertersForEl($el, attribute) {\n    function getAllConverters($el, attribute) {\n        const convertersAsPipes = getConvertersFromAttr($el, attribute);\n        if (convertersAsPipes.length) {\n            return convertersAsPipes;\n        }\n\n        const whiteListedGenericAttributes = ['bind', 'foreach', 'repeat'];\n        const canUseFConvert = whiteListedGenericAttributes.indexOf(attribute) !== -1;\n        if (canUseFConvert) {\n            return getFConvertAttrVal($el, '');\n        }\n        return getFConvertAttrVal($el, attribute);\n    }\n   \n    const converters = getAllConverters($el, attribute);\n    const $parentEl = $el.parents('[data-f-convert]').eq(0);\n    const resolvedConverters = converters.reduce((accum, val)=> {\n        if (val === 'inherit') {\n            const parentConv = getConvertersForEl($parentEl, attribute);\n            accum = accum.concat(parentConv);\n        } else {\n            accum = accum.concat(val);\n        }\n        return accum;\n    }, []);\n\n    if (!resolvedConverters.length && $parentEl.length) {\n        return getConvertersForEl($parentEl, attribute);\n    }\n    return resolvedConverters;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/dom-manager-utils/dom-parse-helpers/parse-converters.js","/**\n * \n * @param {JQuery<HTMLElement>} $el  \n * @param {string} attr \n * @returns {string|undefined}\n */\nexport function getChannelForAttribute($el, attr) {\n    attr = attr.replace('data-f-', '');\n    let channel = $el.data('f-channel-' + attr);\n    if (channel === undefined) {\n        channel = $el.attr('data-f-channel'); //.data shows value cached by jquery\n    }\n    if (channel === undefined) {\n        const $parentEl = $el.closest('[data-f-channel]');\n        if ($parentEl) {\n            channel = $parentEl.attr('data-f-channel');\n        }\n    }\n    return channel;\n}\n\n/**\n * @param {HTMLElement} el\n * @returns {Object}\n */ \nexport function getChannelConfigForElement(el) {\n    //TODO: Should this look at parents too?\n    const attrs = el.attributes;\n    const config = {};\n    for (let i = 0; i < attrs.length; i++) {\n        const attrib = el.attributes[i];\n        if (attrib.specified && attrib.name.indexOf('data-f-channel-') === 0) {\n            const key = attrib.name.replace('data-f-channel-', '');\n            config[key] = attrib.value;\n        }\n    }\n    return config;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/dom-manager-utils/dom-parse-helpers/parse-channel.js","/**\n * @param {string} attrVal \n * @returns {NormalizedTopic[]} variables\n */\nexport function parseTopicsFromAttributeValue(attrVal) {\n    const commaRegex = /,(?![^[(]*[\\])])/; //split except on a[b,c] or a(v,c)\n    const topicsPart = attrVal.split('|')[0];\n    if (topicsPart.indexOf('<%') !== -1) { //Assume it's templated for later use\n        return [];\n    } \n    const split = topicsPart.split(commaRegex);\n    if (split.length > 1) {\n        return split.map((v)=> ({ name: v.trim() }));\n    } \n    return [{ name: topicsPart.trim() }];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/dom-manager-utils/dom-parse-helpers/parse-topics.js","/**\n * \n * @param {NormalizedTopic[]} topics \n * @param {string} prefix \n * @returns {NormalizedTopic[]}\n */\nexport function addPrefixToTopics(topics, prefix) {\n    if (!prefix) {\n        return topics;\n    }\n    const mappedTopics = topics.map((topic)=> {\n        const currentName = topic.name;\n        const hasChannelDefined = currentName.indexOf(':') !== -1;\n        if (!hasChannelDefined) {\n            topic.name = `${prefix}:${currentName}`;\n        }\n        return topic;\n    });\n    return mappedTopics;\n}\n\nconst DEFAULT_OPERATIONS_PREFIX = 'operations:';\nconst DEFAULT_VARIABLES_PREFIX = 'variables:';\n\nexport function addDefaultPrefix(name, source, channelPrefix) {\n    const isUnprefixed = name.indexOf(':') === -1;\n\n    const defaultPrefix = source.indexOf('on-') === 0 ? DEFAULT_OPERATIONS_PREFIX : DEFAULT_VARIABLES_PREFIX;\n    const needsDefaultPrefix = defaultPrefix !== DEFAULT_VARIABLES_PREFIX;\n\n    if (isUnprefixed && needsDefaultPrefix) {\n        name = `${defaultPrefix}${name}`;\n    }\n    const hasDefaultPrefix = name.indexOf(defaultPrefix) === 0;\n    if ((isUnprefixed || hasDefaultPrefix) && channelPrefix) {\n        name = `${channelPrefix}:${name}`;\n    }\n    return name;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/dom-manager-utils/dom-channel-prefix-helpers/index.js","import { isFunction, isString, isRegExp, find, mapValues } from 'lodash';\nimport { splitNameArgs, toImplicitType } from 'utils/parse-utils';\n\nvar normalize = function (alias, converter, acceptList) {\n    var ret = [];\n    //nomalize('flip', fn)\n    if (isFunction(converter)) {\n        ret.push({\n            alias: alias,\n            convert: converter,\n            acceptList: acceptList\n        });\n    } else if ($.isPlainObject(converter) && converter.convert) {\n        converter.alias = alias;\n        converter.acceptList = acceptList;\n        ret.push(converter);\n    } else if ($.isPlainObject(alias)) {\n        //normalize({alias: 'flip', convert: function})\n        if (alias.convert) {\n            ret.push(alias);\n        } else {\n            // normalize({flip: fun})\n            $.each(alias, function (key, val) {\n                ret.push({\n                    alias: key,\n                    convert: val,\n                    acceptList: acceptList\n                });\n            });\n        }\n    }\n    return ret;\n};\n\nvar matchConverter = function (alias, converter) {\n    if (isString(converter.alias)) {\n        return alias === converter.alias;\n    } else if (isFunction(converter.alias)) {\n        return converter.alias(alias);\n    } else if (isRegExp(converter.alias)) {\n        return converter.alias.match(alias);\n    }\n    return false;\n};\n\nvar converterManager = {\n    private: {\n        matchConverter: matchConverter\n    },\n\n    list: [],\n    /**\n     * Add a new attribute converter to this instance of Flow.js.\n     *\n     * **Example**\n     *\n     *      Flow.dom.converters.register('max', function (value) {\n     *          return max(value);\n     *      }, true);\n     *\n     *      Flow.dom.converters.register({\n     *          alias: 'sig',\n     *          parse: $.noop,\n     *          convert: function (value) {\n     *              return value.firstName + ' ' + value.lastName + ', ' + value.jobTitle;\n     *      }, false);\n     *\n     *      <div>\n     *          The largest sales you had was <span data-f-bind=\"salesByYear | max | $#,###\"></span>.\n     *          The current sales manager is <span data-f-bind=\"salesMgr | sig\"></span>.\n     *      </div>\n     *\n     * @param  {string|Function|RegExp} alias Formatter name.\n     * @param  {Function|Object} [converter] If a function, `converter` is called with the value. If an object, should include fields for `alias` (name), `parse` (function), and `convert` (function).\n     * @param {boolean} [acceptList] Determines if the converter is a 'list' converter or not. List converters take in arrays as inputs, others expect single values.\n     * @returns {void}\n     */\n    register: function (alias, converter, acceptList) {\n        var normalized = normalize(alias, converter, acceptList);\n        this.list = normalized.concat(this.list);\n    },\n\n    /**\n     * Replace an already registered converter with a new one of the same name.\n     *\n     * @param {string} alias Formatter name.\n     * @param {Function|Object} converter If a function, `converter` is called with the value. If an object, should include fields for `alias` (name), `parse` (function), and `convert` (function).\n     * @returns {void}\n     */\n    replace: function (alias, converter) {\n        var index;\n        this.list.forEach(function (currentConverter, i) {\n            if (matchConverter(alias, currentConverter)) {\n                index = i;\n                return false;\n            }\n        });\n        this.list.splice(index, 1, normalize(alias, converter)[0]);\n    },\n\n    getConverter: function (alias) {\n        var norm = splitNameArgs(alias);\n        norm.args = norm.args.map(toImplicitType);\n\n        var conv = find(this.list, function (converter) {\n            return matchConverter(norm.name, converter);\n        });\n        if (conv && norm.args) {\n            return $.extend({}, conv, { convert: Function.bind.apply(conv.convert, [null].concat(norm.args)) });\n        }\n        return conv;\n    },\n\n    /**\n     * Pipes the value sequentially through a list of provided converters.\n     *\n     * @param  {*} value Input for the converter to tag.\n     * @param  {string|string[]} list List of converters (maps to converter alias).\n     *\n     * @returns {*} Converted value.\n     */\n    convert: function (value, list) {\n        if (!list || !list.length) {\n            return value;\n        }\n        list = ([].concat(list)).map((v)=> v.trim());\n\n        var currentValue = value;\n        var me = this;\n\n        var convertArray = function (converter, val, converterName) {\n            return val.map(function (v) {\n                return converter.convert(v, converterName);\n            });\n        };\n        var convert = function (converter, value, converterName) {\n            var converted;\n            if (Array.isArray(value) && converter.acceptList !== true) {\n                converted = convertArray(converter, value, converterName);\n            } else {\n                converted = converter.convert(value, converterName);\n            }\n            return converted;\n        };\n        var convertObject = function (converter, value, converterName) {\n            return mapValues(value, function (val) {\n                return convert(converter, val, converterName);\n            });\n        };\n        list.forEach(function (converterName) {\n            var converter = me.getConverter(converterName);\n            if (!converter) {\n                throw new Error('Could not find converter for ' + converterName);\n            }\n            if ($.isPlainObject(currentValue) && converter.acceptList !== true) {\n                currentValue = convertObject(converter, currentValue, converterName);\n            } else {\n                currentValue = convert(converter, currentValue, converterName);\n            }\n        });\n        return currentValue;\n    },\n\n    /**\n     * Counter-part to `convert()`. Translates converted values back to their original form.\n     *\n     * @param  {*} value Value to parse.\n     * @param  {string|string[]} list  List of parsers to run the value through. Outermost is invoked first.\n     * @returns {*} Original value.\n     */\n    parse: function (value, list) {\n        if (!list || !list.length) {\n            return value;\n        }\n        list = [].concat(list).reverse().map((v)=> v.trim());\n\n        var currentValue = value;\n        var me = this;\n        list.forEach(function (converterName) {\n            var converter = me.getConverter(converterName);\n            if (!converter) {\n                throw new Error('parse: Could not find converter ' + converterName);\n            }\n            if (converter.parse) {\n                currentValue = converter.parse(currentValue, converterName);\n            }\n        });\n        return currentValue;\n    }\n};\n\n\n//Bootstrap\nvar defaultconverters = [\n    require('./converters/number-converters'),\n    require('./converters/string-converters'),\n    require('./converters/array-converters'),\n    require('./converters/general-util-converters'),\n    require('./converters/numberformat-converter'),\n    require('./converters/number-compare-converters'),\n    require('./converters/boolean-conditional-converters'),\n    require('./converters/collection-converters')\n];\n\ndefaultconverters.reverse().forEach(function (converter) {\n    if (Array.isArray(converter)) {\n        converter.forEach(function (c) {\n            converterManager.register(c);\n        });\n    } else {\n        converterManager.register(converter);\n    }\n});\n\nexport default converterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/index.js","module.exports = {\n    /**\n     * Convert source value to an integer. Often used for chaining to another converter.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Your car has driven\n     *          <span data-f-bind=\"Odometer | i | s0.0\"></span> miles.\n     *      </div>\n     *\n     * @param {string} value Source value.\n     * @returns {number}\n     */\n    i: function (value) {\n        return parseFloat(value);\n    },\n\n    /**\n     * Add value to source number.\n     *\n     * **Example**\n     *      <div>\n     *          Next year is <span data-f-bind=\"Year | plus(1)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    plus: function (operand, val) {\n        return Number(val) + Number(operand);\n    },\n\n    /**\n     * Subtract value from source number.\n     *\n     * **Example**\n     *      <div>\n     *          Last year was <span data-f-bind=\"Year | minus(1)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    minus: function (operand, val) {\n        return Number(val) - Number(operand);\n    },\n\n    /**\n     * Multiply value with source number.\n     *\n     * **Example**\n     *      <div>\n     *          Total cost is <span data-f-bind=\"Units | multiplyBy(10)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    multiplyBy: function (operand, val) {\n        return Number(val) * Number(operand);\n    },\n\n    /**\n     * Divide value by source number.\n     *\n     * **Example**\n     *      <div>\n     *          Unit cost is <span data-f-bind=\"Total Cost | divideBy(10)\"></span>.\n     *      </div>\n     *\n     * @param {string} operand Value to add\n     * @param {string} value Source value\n     * @returns {number}\n     */\n    divideBy: function (operand, val) {\n        return Number(val) / Number(operand);\n    },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/number-converters/index.js","module.exports = {\n\n    /**\n     * Convert the model variable to a string. Often used for chaining to another converter.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          This year you are in charge of sales for\n     *          <span data-f-bind=\"salesMgr.region | s | upperCase\"></span>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    s: function (val) {\n        return val + '';\n    },\n\n    /**\n     * Convert the model variable to UPPER CASE.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          This year you are in charge of sales for\n     *          <span data-f-bind=\"salesMgr.region | s | upperCase\"></span>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    upperCase: function (val) {\n        return (val + '').toUpperCase();\n    },\n\n    /**\n     * Convert the model variable to lower case.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Enter your user name:\n     *          <input data-f-bind=\"userName | lowerCase\"></input>.\n     *      </div>\n     *\n     * @param {Array} val The model variable.\n     * @returns {string} converted string\n     */\n    lowerCase: function (val) {\n        return (val + '').toLowerCase();\n    },\n\n    /**\n     * Convert the model variable to Title Case.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Congratulations on your promotion!\n     *          Your new title is: <span data-f-bind=\"currentRole | titleCase\"></span>.\n     *      </div>\n     *\n     * @param {string} val The model variable.\n     * @returns {string} converted string\n     */\n    titleCase: function (val) {\n        val = val + '';\n        return val.replace(/\\w\\S*/g, function (txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/string-converters/index.js","const _ = require('lodash');\n\nfunction parseLimitArgs(starting, limit, val) {\n    let toRet = {};\n    if (arguments.length === 3) { //eslint-disable-line\n        toRet = {\n            input: limit,\n            limit: starting\n        };\n    } else if (arguments.length === 2) {\n        toRet = {\n            input: starting\n        };\n    } else {\n        console.error('Too many arguments passed to last', arguments);\n        throw new Error('Too many arguments passed to last');\n    }\n\n    toRet.input = [].concat(toRet.input);\n    return toRet;\n}\n\nconst list = {\n    /**\n     * Convert the input into an array. \n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any[]}\n     */\n    list: (val)=> [].concat(val),\n\n    /**\n     * Reverse the array.\n     *\n     * **Example**\n     *\n     *      <p>Show the history of our sales, starting with the last (most recent):</p>\n     *      <ul data-f-foreach=\"Sales | reverse\">\n     *          <li></li>\n     *      </ul>\n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any[]} the reversed array\n     */\n    reverse: (val)=> ([].concat(val)).reverse(),\n\n    /**\n     * Select only the last element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          In the current year, we have <span data-f-bind=\"Sales | last\"></span> in sales.\n     *      </div>\n     *\n     * @param {number} n number of items to get\n     * @param {any[]} val The array model variable.\n     * @returns {any} last element of array\n     */\n    last: function (n, val) {\n        const parsed = parseLimitArgs.apply(null, arguments);\n        const stripped = parsed.input.slice(-(parsed.limit || 1));\n        if (stripped.length <= 1) {\n            return stripped[0];\n        }\n        return stripped;\n    },\n\n    /**\n     * Select only the first element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Our initial investment was <span data-f-bind=\"Capital | first\"></span>.\n     *      </div>\n     *\n     * @param {number} n number of items to get\n     * @param {any[]} val The array model variable.\n     * @returns {any} first element of the array\n     */\n    first: function (n, val) {\n        const parsed = parseLimitArgs.apply(null, arguments);\n        const stripped = parsed.input.slice(0, (parsed.limit || 1));\n        if (stripped.length <= 1) {\n            return stripped[0];\n        }\n        return stripped;\n    },\n\n    /**\n     * Select only the previous (second to last) element of the array.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          Last year we had <span data-f-bind=\"Sales | previous\"></span> in sales.\n     *      </div>\n     *\n     * @param {any[]} val The array model variable.\n     * @returns {any} the previous (second to last) element of the array.\n     */\n    previous: (val)=> {\n        val = [].concat(val);\n        return (val.length <= 1) ? val[0] : val[val.length - 2];\n    },\n\n    /**\n     * Returns length of array\n     *\n     * **Example**\n     * Total Items: <h6 data-f-bind=\"items | size\"></h6>\n     * \n     * @param  {any[]} src array\n     * @returns {number}     length of array\n     */\n    size: (src)=> [].concat(src).length,\n\n    /**\n     * Select every nth item from array\n     *\n     * **Example**\n     * <!-- select every 10th item starting from itself\n     * <ul data-f-foreach=\"Time | pickEvery(10)\"><li></li></ul>\n     * <!-- select every 10th item starting from the fifth\n     * <ul data-f-foreach=\"Time | pickEvery(10, 5)\"><li></li></ul>\n     * \n     * @param  {number} n          nth item to select\n     * @param  {number} [startIndex] index to start from\n     * @param  {any[]} [val]        source array\n     * @returns {any[]}            shortened array\n     */\n    pickEvery: function (n, startIndex, val) {\n        if (arguments.length === 3) { //eslint-disable-line\n            //last item is match string\n            val = startIndex;\n            startIndex = 0;\n        }\n        val = [].concat(val);\n        val = val.slice(startIndex);\n        return val.filter((item, index)=> {\n            return (index % n) === 0;\n        });\n    },\n};\n\nconst mapped = Object.keys(list).map(function (alias) {\n    const fn = list[alias];\n    const newfn = function () {\n        const args = _.toArray(arguments);\n        const indexOfActualValue = args.length - 2; //last item is the matchstring\n        const val = args[indexOfActualValue];\n        if ($.isPlainObject(val)) {\n            return Object.keys(val).reduce((accum, key)=> {\n                const arr = val[key];\n                const newArgs = args.slice();\n                newArgs[indexOfActualValue] = arr;\n                accum[key] = fn.apply(fn, newArgs);\n                return accum;\n            }, {});\n        }\n        return fn.apply(fn, arguments);\n    };\n    return {\n        alias: alias,\n        acceptList: true,\n        convert: newfn,\n    };\n});\nmodule.exports = mapped;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/array-converters/index.js","function parseArgs(toCompare, trueVal, falseVal, valueToCompare, matchString) {\n    const toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 5: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: valueToCompare });\n        case 4: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal }); \n        case 3: //eslint-disable-line\n            return $.extend(toReturn, { input: trueVal, falseVal: trueVal }); \n        default:\n            return toReturn;\n    }\n}\n\nmodule.exports = [\n    {\n        alias: 'is',\n        acceptList: false,\n        convert: function (toCompare) {\n            const args = parseArgs.apply(null, arguments);\n            return args.input === toCompare ? args.trueVal : args.falseVal;\n        }\n    }\n];\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/general-util-converters/index.js","const { isString, isNumber } = require('lodash');\n\nfunction isAllowedLeading(str) { \n    const validPrefixes = ['', '$', '', '', '', '', '', ''];\n    return validPrefixes.indexOf(str.trim()) !== -1;\n}\n\nmodule.exports = {\n    /**\n     * @param {string} name\n     * @returns {boolean}\n     */\n    alias: function (name) {\n        /**\n         * @param {string} v\n         * @returns {boolean}\n         */\n        function checkValMatch(v) {\n            const validStandalone = ['#', '0', '%'];\n            if (v.length === 1) {\n                return validStandalone.indexOf(v) !== -1;\n            }\n\n            const validFirstChars = ['s', '#', '0', '.'];\n            const validLastChars = ['%', '#', '0'];\n\n            if (isAllowedLeading(v.charAt(0))) {\n                v = v.slice(1);\n            }\n            const isValidFirstChar = validFirstChars.indexOf(v.charAt(0)) !== -1;\n            const isValidLastChar = validLastChars.indexOf(v.charAt(v.length - 1)) !== -1;\n\n            if (v.length === 2) {\n                return isValidFirstChar && isValidLastChar;\n            }\n            \n            const validRemainingChars = ['#', '0', '.', ','];\n            const areRemainingCharactersValid = v.substr(1, v.length - 2).split('').reduce((accum, char)=> {\n                const isMatch = validRemainingChars.indexOf(char) !== -1;\n                if (!isMatch) {\n                    accum = false;\n                }\n                return accum;\n            }, true);\n\n            return isValidFirstChar && isValidLastChar && areRemainingCharactersValid;\n        }\n\n        const parts = name.split(' ');\n        if (parts.length === 3) {\n            return checkValMatch(parts[1]); //prefix and suffix\n        } else if (parts.length === 1) {\n            return checkValMatch(parts[0]); //just the number\n        } else if (parts.length === 2) {\n            return checkValMatch(parts[0]) || checkValMatch(parts[1]); //either prefix or suffix\n        }\n        return false;\n    },\n\n    /**\n     * @param {string} val\n     * @returns {number}\n     */\n    parse: function (val) {\n        val += '';\n        var isNegative = val.charAt(0) === '-';\n\n        val = val.replace(/,/g, '');\n        var floatMatcher = /([-+]?[0-9]*\\.?[0-9]+)(K?M?B?%?)/i;\n        var results = floatMatcher.exec(val);\n        var number;\n        var suffix = '';\n        if (results && results[1]) {\n            number = results[1];\n        }\n        if (results && results[2]) {\n            suffix = results[2].toLowerCase();\n        }\n\n        /*eslint no-magic-numbers: 0 complexity: 0 */\n        switch (suffix) {\n            case '%':\n                number = number / 100;\n                break;\n            case 'k':\n                number = number * 1000;\n                break;\n            case 'm':\n                number = number * 1000000;\n                break;\n            case 'b':\n                number = number * 1000000000;\n                break;\n            default:\n        }\n        number = parseFloat(number);\n        if (isNegative && number > 0) {\n            number = number * -1;\n        }\n        return number;\n    },\n\n    convert: (function (value) {\n        var scales = ['', 'K', 'M', 'B', 'T'];\n        function roundTo(value, digits) {\n            return Math.round(value * Math.pow(10, digits)) / Math.pow(10, digits);\n        }\n\n        function getDigits(value, digits) {\n            value = value === 0 ? 0 : roundTo(value, Math.max(0, digits - Math.ceil(Math.log(value) / Math.LN10)));\n\n            var TXT = '';\n            var numberTXT = value.toString();\n            var decimalSet = false;\n\n            for (var iTXT = 0; iTXT < numberTXT.length; iTXT++) {\n                TXT += numberTXT.charAt(iTXT);\n                if (numberTXT.charAt(iTXT) === '.') {\n                    decimalSet = true;\n                } else {\n                    digits--;\n                }\n\n                if (digits <= 0) {\n                    return TXT;\n                }\n            }\n\n            if (!decimalSet) {\n                TXT += '.';\n            }\n            while (digits > 0) {\n                TXT += '0';\n                digits--;\n            }\n            return TXT;\n        }\n\n        function addDecimals(value, decimals, minDecimals, hasCommas) {\n            hasCommas = !!hasCommas;\n            var numberTXT = value.toString();\n            var hasDecimals = (numberTXT.split('.').length > 1);\n            var iDec = 0;\n\n            if (hasCommas) {\n                for (var iChar = numberTXT.length - 1; iChar > 0; iChar--) {\n                    if (hasDecimals) {\n                        hasDecimals = (numberTXT.charAt(iChar) !== '.');\n                    } else {\n                        iDec = (iDec + 1) % 3;\n                        if (iDec === 0) {\n                            numberTXT = numberTXT.substr(0, iChar) + ',' + numberTXT.substr(iChar);\n                        }\n                    }\n                }\n\n            }\n            if (decimals > 0) {\n                var toADD;\n                if (numberTXT.split('.').length <= 1) {\n                    toADD = minDecimals;\n                    if (toADD > 0) {\n                        numberTXT += '.';\n                    }\n                } else {\n                    toADD = minDecimals - numberTXT.split('.')[1].length;\n                }\n\n                while (toADD > 0) {\n                    numberTXT += '0';\n                    toADD--;\n                }\n            }\n            return numberTXT;\n        }\n\n        function getSuffix(formatTXT) {\n            formatTXT = formatTXT.replace('.', '');\n            var fixesTXT = formatTXT.split(new RegExp('[0|,|#]+', 'g'));\n            return (fixesTXT.length > 1) ? fixesTXT[1].toString() : '';\n        }\n\n        function format (number, formatTXT) { // eslint-disable-line\n            if (Array.isArray(number)) {\n                number = number[number.length - 1];\n            }\n            if (!isString(number) && !isNumber(number)) {\n                return number;\n            }\n\n            if (!formatTXT || formatTXT.toLowerCase() === 'default') {\n                return number.toString();\n            }\n\n            if (isNaN(number)) {\n                return '?';\n            }\n\n            //var formatTXT;\n            const entityCodeMapping = {\n                '&euro;': '',\n                '&dollar;': '$',\n                '&cent;': '',\n                '&pound;': '',\n                '&yen;': '',\n            };\n            Object.keys(entityCodeMapping).forEach((code)=> {\n                formatTXT = formatTXT.replace(code, entityCodeMapping[code]);\n            });\n\n            // Divide +/- Number Format\n            var formats = formatTXT.split(';');\n            if (formats.length > 1) {\n                return format(Math.abs(number), formats[((number >= 0) ? 0 : 1)]);\n            }\n\n            // Save Sign\n            var sign = (number >= 0) ? '' : '-';\n            number = Math.abs(number);\n\n\n            var leftOfDecimal = formatTXT;\n            var d = leftOfDecimal.indexOf('.');\n            if (d > -1) {\n                leftOfDecimal = leftOfDecimal.substring(0, d);\n            }\n\n            var normalized = leftOfDecimal.toLowerCase();\n            var index = normalized.lastIndexOf('s');\n            var isShortFormat = index > -1;\n\n            if (isShortFormat) {\n                var nextChar = leftOfDecimal.charAt(index + 1);\n                if (nextChar === ' ') {\n                    isShortFormat = false;\n                }\n            }\n\n            var leadingText = isShortFormat ? formatTXT.substring(0, index) : '';\n            var rightOfPrefix = isShortFormat ? formatTXT.substr(index + 1) : formatTXT.substr(index);\n\n            //first check to make sure 's' is actually short format and not part of some leading text\n            if (isShortFormat) {\n                var shortFormatTest = /[0-9#*]/;\n                var shortFormatTestResult = rightOfPrefix.match(shortFormatTest);\n                if (!shortFormatTestResult || shortFormatTestResult.length === 0) {\n                    //no short format characters so this must be leading text ie. 'weeks '\n                    isShortFormat = false;\n                    leadingText = '';\n                }\n            }\n\n            //if (formatTXT.charAt(0) == 's')\n            if (isShortFormat) {\n                var valScale = number === 0 ? 0 : Math.floor(Math.log(Math.abs(number)) / (3 * Math.LN10));\n                valScale = ((number / Math.pow(10, 3 * valScale)) < 1000) ? valScale : (valScale + 1);\n                valScale = Math.max(valScale, 0);\n                valScale = Math.min(valScale, 4);\n                number = number / Math.pow(10, 3 * valScale);\n                //if (!isNaN(Number(formatTXT.substr(1) ) ) )\n\n                if (!isNaN(Number(rightOfPrefix)) && rightOfPrefix.indexOf('.') === -1) {\n                    var limitDigits = Number(rightOfPrefix);\n                    if (number < Math.pow(10, limitDigits)) {\n                        if (isAllowedLeading(leadingText)) {\n                            return sign + leadingText + getDigits(number, Number(rightOfPrefix)) + scales[valScale];\n                        } else {\n                            return leadingText + sign + getDigits(number, Number(rightOfPrefix)) + scales[valScale];\n                        }\n                    } else if (isAllowedLeading(leadingText)) {\n                        return sign + leadingText + Math.round(number) + scales[valScale];\n                    } else {\n                        return leadingText + sign + Math.round(number) + scales[valScale];\n                    }\n                } else {\n                    //formatTXT = formatTXT.substr(1);\n                    formatTXT = formatTXT.substr(index + 1);\n                    var SUFFIX = getSuffix(formatTXT);\n                    formatTXT = formatTXT.substr(0, formatTXT.length - SUFFIX.length);\n\n                    var valWithoutLeading = format(((sign === '') ? 1 : -1) * number, formatTXT) + scales[valScale] + SUFFIX;\n                    if (isAllowedLeading(leadingText) && sign !== '') {\n                        valWithoutLeading = valWithoutLeading.substr(sign.length);\n                        return sign + leadingText + valWithoutLeading;\n                    }\n\n                    return leadingText + valWithoutLeading;\n                }\n            }\n\n            var subFormats = formatTXT.split('.');\n            var decimals;\n            var minDecimals;\n            if (subFormats.length > 1) {\n                decimals = subFormats[1].length - subFormats[1].replace(new RegExp('[0|#]+', 'g'), '').length;\n                minDecimals = subFormats[1].length - subFormats[1].replace(new RegExp('0+', 'g'), '').length;\n                formatTXT = subFormats[0] + subFormats[1].replace(new RegExp('[0|#]+', 'g'), '');\n            } else {\n                decimals = 0;\n            }\n\n            var fixesTXT = formatTXT.split(new RegExp('[0|,|#]+', 'g'));\n            var preffix = fixesTXT[0].toString();\n            var suffix = (fixesTXT.length > 1) ? fixesTXT[1].toString() : '';\n\n            number = number * ((formatTXT.split('%').length > 1) ? 100 : 1);\n            //            if (formatTXT.indexOf('%') !== -1) number = number * 100;\n            number = roundTo(number, decimals);\n\n            sign = (number === 0) ? '' : sign;\n\n            var hasCommas = (formatTXT.substr(formatTXT.length - 4 - suffix.length, 1) === ',');\n            var formatted = sign + preffix + addDecimals(number, decimals, minDecimals, hasCommas) + suffix;\n\n            //  console.log(originalNumber, originalFormat, formatted)\n            return formatted;\n        }\n\n        return format;\n    }())\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/numberformat-converter/index.js","function parseArgs(limit, trueVal, falseVal, valueToCompare, matchString) {\n    var toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 5: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: valueToCompare });\n        case 4: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal }); \n        case 3: //eslint-disable-line\n            return $.extend(toReturn, { input: trueVal, falseVal: trueVal }); \n        default:\n            return toReturn;\n    }\n}\nmodule.exports = {\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is greater than the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | greaterThan(50)\"></span> \n     *\n     *          <!-- displays custom text -->\n     *          <span data-f-bind=\"widgets | greaterThan(50, 'Congratulations!', 'Better luck next year')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is greater than `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is greater than `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    greaterThan: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) > Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is greater than or equal to the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | greaterThan(50)\"></span> \n     *\n     *          <!-- displays custom text -->\n     *          <span data-f-bind=\"widgets | greaterThan(50, 'Congratulations!', 'Better luck next year')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is greater than or equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is greater than or equal to `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */    \n    greaterThanEqual: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) >= Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is equal to the limit.\n     *\n     * \n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | equalsNumber(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | equalsNumber(50, 'Met the goal exactly!', 'Not an exact match')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is not equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable equals `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    equalsNumber: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) === Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is less than the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | lessThan(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | lessThan(50, 'Oops didn't make quite enough!', 'Built a lot of widgets this year!')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is less than `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */ \n    lessThan: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) < Number(limit) ? args.trueVal : args.falseVal;\n    },\n\n    /**\n     * Convert the model variable to true, or other values passed to the converter, based on whether the model variable is less than or equal to the limit.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <!-- displays true or the number of widgets -->\n     *          <span data-f-bind=\"widgets | lessThanEqual(50)\"></span> \n     *\n     *          <!-- display custom text -->\n     *          <span data-f-bind=\"widgets | lessThanEqual(50, 'Oops didn't make quite enough!', 'Built a lot of widgets this year!')\"></span>\n     *      </div>\n     *\n     * @param {number} limit The reference value to compare the model variable against.\n     * @param {string} trueVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is `true`. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The format (value) to display if the model variable is less than or equal to `limit`. If not included, the display is the value of the model variable. If there are commas in this argument, they must be escaped with `\\`.\n     * @returns {*} If the model variable is less than or equal to `limit`, returns trueVal or `true`. Otherwise returns falseVal if provided, or echoes the input.\n     */\n    lessThanEqual: function (limit) {\n        var args = parseArgs.apply(null, arguments);\n        return Number(args.input) <= Number(limit) ? args.trueVal : args.falseVal;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/number-compare-converters/index.js","function parseArgs(trueVal, falseVal, input, matchString) {\n    var toReturn = { trueVal: true, falseVal: false };\n    switch (arguments.length) {\n        case 4: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: input });\n        case 3: //eslint-disable-line\n            return $.extend(toReturn, { trueVal: trueVal, falseVal: falseVal, input: falseVal }); \n        default:\n            return toReturn;\n    }\n}\n\nmodule.exports = {\n    /**\n     * Convert 'truthy' values to true and 'falsy' values to false.\n     *\n     * **Example**\n     *\n     *      <!-- displays \"true\" or \"false\" -->\n     *      <!-- in particular, true if sampleVar is truthy (1, true, 'some string', [] etc.), \n     *            false if sampleVar is falsy (0, false, '') -->\n     *      <span data-f-bind=\"sampleVar | toBool\"></span>\n     * \n     * @param {Any} value\n     * @returns {boolean}\n     */\n    toBool: (value)=> !!value,\n\n    /**\n     * Converts values to boolean and negates.\n     *\n     * **Example**\n     *\n     *      <!-- disables input if isGameInProgress is false -->\n     *      <input type=\"text\" data-f-disabled=\"isGameInProgress | not\" />\n     * \n     * @param {Any} value\n     * @returns {boolean}\n     */\n    not: (value)=> !value,\n\n    /**\n     * Convert the input to a new value (for example, some text), based on whether it is true or false.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <span data-f-bind=\"sampleVar | ifTrue('yes! please move forward', 'not ready to proceed')\"></span> \n     *          <span data-f-bind=\"sampleVar | ifTrue('yes! please move forward')\"></span>\n     *      </div>\n     *\n     * @param {string} trueVal The value to display if the input is true. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The value to display if the input is false. If not included, returns the input. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {Any} input (Optional) The input to test. If not included, the output of the previous argument is used.\n     * @returns {Any} If input is true, returns trueVal. If input is false, returns falseVal if provided, or echoes the input.\n     */\n    ifTrue: function () {\n        var args = parseArgs.apply(null, arguments);\n        return args.input ? args.trueVal : args.falseVal;\n    },\n    /**\n     * Convert the input to a new value (for example, some text), based on whether it is false or true.\n     *\n     * **Example**\n     *\n     *      <div>\n     *          <span data-f-bind=\"sampleVar | ifFalse('not ready to proceed', 'actually this is still true')\"></span> \n     *          <span data-f-bind=\"sampleVar | ifFalse('not ready to proceed')\"></span>\n     *      </div>\n     *\n     * @param {string} trueVal The value to display if the input is false. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {string} falseVal (Optional) The value to display if the input is true. If not included, returns the input. If there are commas in this argument, they must be escaped with `\\`.\n     * @param {Any} input (Optional) The input to test. If not included, the output of the previous argument is used.\n     * @returns {Any} If input is false, returns trueVal. If input is true, returns falseVal if provided, or echoes the input.\n     */\n    ifFalse: function () {\n        var args = parseArgs.apply(null, arguments);\n        return !args.input ? args.trueVal : args.falseVal;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/boolean-conditional-converters/index.js","const _ = require('lodash');\n\nconst list = {\n    /**\n     * Returns all values in array matching argument\n     *\n     * ** Example **\n     * <!-- list online users -->\n     * <ul data-f-foreach=\"users | filter(isOnline)\"><li></li></button>\n     * \n     * @param  {string|number|boolean} valueToFilterBy value to reject\n     * @param  {any[]} source The arrayed model variable\n     * @returns {any[]}     filtered lsit\n     */\n    filter: function (valueToFilterBy, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.filter(source, valueToFilterBy);\n        }\n        return source.filter((v)=> v === valueToFilterBy);\n    },\n\n    /**\n     * Returns all values in array excluding match\n     *\n     * ** Example **\n     * <!-- list offline users -->\n     * <ul data-f-foreach=\"users | except(isOnline)\"><li></li></button>\n     * \n     * @param  {string|number|boolean} valueToReject value to reject\n     * @param  {any[]} source The arrayed model variable\n     * @returns {any[]}     filtered lsit\n     */\n    except: function (valueToReject, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.reject(source, valueToReject);\n        }\n        return source.filter((v)=> v !== valueToReject);\n    },\n\n    /**\n     * Checks if array contains *any* item passing the test\n     *\n     * ** Example **\n     * <!-- hides button if any of the users are not online -->\n     * <button data-f-hideif=\"users | any(isOnline) | not\">Get Started</button>\n     * <button data-f-hideif=\"users | any({ isOnline: false })\">Get Started</button>\n     * \n     * @param  {string|Object} value value to check for\n     * @param  {any[]} source The arrayed model variable\n     * @returns {boolean}     True if match found in array\n     */\n    any: function (value, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.some(source, value);\n        }\n        return source.indexOf(value) !== -1;\n    },\n\n    /**\n     * Checks if *every* item in the array passes the test\n     *\n     * ** Example **\n     * <!-- shows button if any of the users are not online -->\n     * <button data-f-showif=\"users | every(isOnline)\">Get Started</button>\n     * \n     * @param  {string|Object} value value to check for\n     * @param  {any[]} source The arrayed model variable\n     * @returns {boolean}     True if match found in array\n     */\n    every: function (value, source) {\n        source = [].concat(source);\n        if ($.isPlainObject(source[0])) {\n            return _.every(source, value);\n        }\n        return source.filter((v)=> v === value).length === source.length;\n    }\n};\nconst converters = Object.keys(list).map((name)=> {\n    return {\n        alias: name,\n        acceptList: true,\n        convert: list[name]\n    };\n});\n\nmodule.exports = converters;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/converter-manager/converters/collection-converters/index.js","import { isString, isFunction } from 'lodash';\n/**\n * @typedef NodeHandler\n * @property {string} selector\n * @property {Function} handle\n */ \n\n \n/**\n * @param {string | undefined} selector\n * @param {Function | NodeHandler } handler\n * @returns {NodeHandler}\n */\nconst normalize = function (selector, handler) {\n    if (!selector) {\n        selector = '*';\n    }\n    if (isFunction(handler)) {\n        handler = {\n            selector: selector,\n            handle: handler\n        };\n    }\n   \n    handler.selector = selector;\n    return handler;\n};\n\n/**\n * @param {string|HTMLElement|JQuery<HTMLElement>} toMatch\n * @param { {selector:string} } node\n * @returns {boolean}\n */ \nconst match = function (toMatch, node) {\n    if (isString(toMatch)) {\n        return toMatch === node.selector;\n    }\n    return $(toMatch).is(node.selector);\n};\n\nconst nodeManager = {\n    list: [],\n\n    /**\n     * Add a new node handler\n     * @param  {string} selector jQuery-compatible selector to use to match nodes\n     * @param  {Function} handler  Handlers are new-able functions. They will be called with $el as context.? TODO: Think this through\n     * @returns {void}\n     */\n    register: function (selector, handler) {\n        this.list.unshift(normalize(selector, handler));\n    },\n\n    /**\n     * @param {string|HTMLElement|JQuery<HTMLElement>} selector\n     * @returns NodeHandler\n     */ \n    getHandler: function (selector) {\n        return this.list.find(function (node) {\n            return match(selector, node);\n        });\n    },\n\n    replace: function (selector, handler) {\n        let index;\n        this.list.forEach(function (currentHandler, i) {\n            if (selector === currentHandler.selector) {\n                index = i;\n                return false;\n            }\n        });\n        this.list.splice(index, 1, normalize(selector, handler));\n    }\n};\n\n//bootstraps\nconst defaultHandlers = [\n    require('./input-checkbox-node').default,\n    require('./default-input-node').default,\n    require('./default-node')\n];\ndefaultHandlers.reverse().forEach(function (handler) {\n    nodeManager.register(handler.selector, handler);\n});\n\nexport default nodeManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/node-manager/index.js","import BaseView from './default-input-node';\nimport config from 'config';\n\nconst offAttr = config.attrs.checkboxOffValue;\n\nexport default BaseView.extend({\n    propertyHandlers: [\n\n    ],\n\n    getUIValue: function () {\n        const $el = this.$el;\n        const offAttrVal = $el.attr(offAttr);\n        const offVal = (offAttrVal && typeof offAttrVal !== 'undefined') ? offAttrVal : false;\n\n        const onAttrVal = $el.attr('value');\n        //attr = initial value, prop = current value\n        const onVal = (onAttrVal && typeof onAttrVal !== 'undefined') ? $el.prop('value') : true;\n\n        const val = ($el.is(':checked')) ? onVal : offVal;\n        return val;\n    },\n    initialize: function () {\n        BaseView.prototype.initialize.apply(this, arguments);\n    }\n}, { selector: ':checkbox,:radio' });\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/node-manager/input-checkbox-node.js","const { extend, has } = require('lodash');\n\nvar extendView = function (protoProps, staticProps) {\n    var me = this;\n    var child;\n\n    // The constructor function for the new subclass is either defined by you\n    // (the \"constructor\" property in your `extend` definition), or defaulted\n    // by us to simply call the parent's constructor.\n    if (protoProps && has(protoProps, 'constructor')) {\n        child = protoProps.constructor;\n    } else {\n        child = function () { return me.apply(this, arguments); };\n    }\n\n    // Add static properties to the constructor function, if supplied.\n    extend(child, me, staticProps);\n\n    // Set the prototype chain to inherit from `parent`, without calling\n    // `parent`'s constructor function.\n    var Surrogate = function () { this.constructor = child; };\n    Surrogate.prototype = me.prototype;\n    child.prototype = new Surrogate();\n\n    // Add prototype properties (instance properties) to the subclass,\n    // if supplied.\n    if (protoProps) {\n        extend(child.prototype, protoProps);\n    }\n\n    // Set a convenience property in case the parent's prototype is needed\n    // later.\n    child.__super__ = me.prototype; //eslint-disable-line no-underscore-dangle\n\n    return child;\n};\n\nvar View = function (options) {\n    this.$el = (options.$el) || $(options.el);\n    this.el = options.el;\n    this.initialize.apply(this, arguments);\n\n};\nextend(View.prototype, {\n    initialize: function () {},\n});\n\nView.extend = extendView;\n\nmodule.exports = View;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/base-view.js","import { isString, isFunction, isRegExp, each } from 'lodash';\n\nconst defaultHandlers = [\n    require('./attributes/no-op-attr').default,\n    require('./attributes/events/default-event-attr').default,\n    require('./attributes/loop-attrs/foreach-attr').default,\n    require('./attributes/loop-attrs/repeat-attr').default,\n    require('./attributes/class-attr').default,\n    require('./attributes/boolean-attr').default,\n    require('./attributes/toggles/show-if-attr').default,\n    require('./attributes/toggles/hide-if-attr').default,\n    require('./attributes/binds/checkbox-radio-bind-attr').default,\n    require('./attributes/binds/input-bind-attr').default,\n    require('./attributes/binds/default-bind-attr').default,\n    require('./attributes/default-attr').default\n];\n\nconst handlersList = [];\n\nconst normalize = function (attributeMatcher, nodeMatcher, handler) {\n    if (!nodeMatcher) {\n        nodeMatcher = '*';\n    }\n    if (isFunction(handler)) {\n        handler = {\n            handle: handler\n        };\n    }\n    return $.extend(handler, { test: attributeMatcher, target: nodeMatcher });\n};\n\ndefaultHandlers.forEach(function (handler) {\n    handlersList.push(normalize(handler.test, handler.target, handler));\n});\n\n\nconst matchAttr = function (matchExpr, attr, $el) {\n    let attrMatch;\n\n    if (isString(matchExpr)) {\n        attrMatch = (matchExpr === '*' || (matchExpr.toLowerCase() === attr.toLowerCase()));\n    } else if (isFunction(matchExpr)) {\n        //TODO: remove element selectors from attributes\n        attrMatch = matchExpr(attr, $el);\n    } else if (isRegExp(matchExpr)) {\n        attrMatch = attr.match(matchExpr);\n    }\n    return attrMatch;\n};\n\nconst matchNode = function (target, nodeFilter) {\n    return (isString(nodeFilter)) ? (nodeFilter === target) : nodeFilter.is(target);\n};\n\nconst attributeManager = {\n    list: handlersList,\n    /**\n     * Add a new attribute handler.\n     *\n     * @param  {string|Function|RegExp} attributeMatcher Description of which attributes to match.\n     * @param  {string|JQuery<HTMLElement>} nodeMatcher Which nodes to add attributes to. Use [jquery Selector syntax](https://api.jquery.com/category/selectors/).\n     * @param  {Function|Object} handler If `handler` is a function, the function is called with `$element` as context, and attribute value + name. If `handler` is an object, it should include two functions, and have the form: `{ init: fn,  handle: fn }`. The `init` function is called when the page loads; use this to define event handlers. The `handle` function is called with `$element` as context, and attribute value + name.\n     * @returns {void}\n     */\n    register: function (attributeMatcher, nodeMatcher, handler) {\n        handlersList.unshift(normalize.apply(null, arguments));\n    },\n\n    /**\n     * Find an attribute matcher matching some criteria.\n     *\n     * @param  {string} attrFilter Attribute to match.\n     * @param  {string|JQuery<HTMLElement>} nodeFilter Node to match.\n     *\n     * @returns {AttributeHandler[]} An array of matching attribute handlers, or null if no matches found.\n     */\n    filter: function (attrFilter, nodeFilter) {\n        let filtered = handlersList.filter(function (handler) {\n            return matchAttr(handler.test, attrFilter);\n        });\n        if (nodeFilter) {\n            filtered = filtered.filter(function (handler) {\n                return matchNode(handler.target, nodeFilter);\n            });\n        }\n        return filtered;\n    },\n\n    /**\n     * Replace an existing attribute handler.\n     *\n     * @param  {string} attrFilter Attribute to match.\n     * @param  {string|JQuery<HTMLElement>} nodeFilter Node to match.\n     * @param  {Function|Object} handler The updated attribute handler. If `handler` is a function, the function is called with `$element` as context, and attribute value + name. If `handler` is an object, it should include two functions, and have the form: `{ init: fn,  handle: fn }`. The `init` function is called when the page loads; use this to define event handlers. The `handle` function is called with `$element` as context, and attribute value + name.\n     * @returns {void}\n     */\n    replace: function (attrFilter, nodeFilter, handler) {\n        let index;\n        each(handlersList, function (currentHandler, i) {\n            if (matchAttr(currentHandler.test, attrFilter) && matchNode(currentHandler.target, nodeFilter)) {\n                index = i;\n                return false;\n            }\n        });\n        handlersList.splice(index, 1, normalize(attrFilter, nodeFilter, handler));\n    },\n\n    /**\n     *  Retrieve the appropriate handler for a particular attribute. There may be multiple matching handlers, but the first (most exact) match is always used.\n     *\n     * @param {string} attr The attribute.\n     * @param {string|JQuery<HTMLElement>} $el The DOM element.\n     *\n     * @returns {AttributeHandler|undefined} The attribute handler, if a matching one is found\n     */\n    getHandler: function (attr, $el) {\n        const filtered = this.filter(attr, $el);\n        //There could be multiple matches, but the top first has the most priority\n        return filtered[0];\n    }\n};\n\nexport default attributeManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/index.js","/**\n * @type AttributeHandler \n */\nconst noopAttr = {\n\n    target: '*',\n\n    test: /^(?:model|convert|channel|on-init)/i,\n\n    handle: ()=> {},\n    parse: ()=> []\n};\n\nexport default noopAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/no-op-attr/index.js","import { events } from 'config';\nimport { toPublishableFormat } from 'utils/parse-utils';\n\nfunction eventNameFromAttr(attr) {\n    const eventName = attr.replace('on-', '');\n    const nameSpacedEvent = `${eventName}.f-event`;\n    return nameSpacedEvent;\n}\n/**\n * @type AttributeHandler \n */\nconst defaultEventAttr = {\n\n    target: '*',\n\n    test: function (attr) {\n        return (attr.indexOf('on-') === 0);\n    },\n\n    unbind: function (attr, $el) {\n        const eventName = eventNameFromAttr(attr);\n        $el.off(eventName);\n    },\n\n    parse: ()=> ([]), //There's nothing to subscribe to on an event\n    handle: ()=> {},\n\n    init: function (attr, topics, $el) {\n        const matching = topics[0] && topics[0].name; //multiple topics aren't really relevant here\n        const eventName = eventNameFromAttr(attr);\n        $el.off(eventName).on(eventName, function (evt) {\n            evt.preventDefault();\n            var listOfOperations = toPublishableFormat(matching);\n            $el.trigger(events.trigger, { data: listOfOperations, source: attr });\n        });\n    }\n};\n\nexport default defaultEventAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/events/default-event-attr/index.js","import { toImplicitType } from 'utils/parse-utils';\nimport { animation } from 'config';\n\nimport { aliasesFromTopics, parseTopics } from '../loop-attr-utils';\nimport { addChangeClassesToList } from 'utils/animation';\nimport { each, template } from 'lodash';\n\nimport { getKnownDataForEl, updateKnownDataForEl, removeKnownData, findMissingReferences, stubMissingReferences, addBackMissingReferences, getOriginalContents, clearOriginalContents } from 'dom/attribute-manager/attr-template-utils';\n\nconst elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\n/**\n * @type AttributeHandler\n */\nconst foreachAttr = {\n\n    test: 'foreach',\n\n    target: '*',\n\n    unbind: function (attr, $el) {\n        const el = $el.get(0);\n        elAnimatedMap.delete(el);\n        \n        const template = getOriginalContents($el);\n        const current = $el.html();\n        if (template && current !== template) {\n            $el.html(template);\n        }\n        clearOriginalContents($el);\n        removeKnownData($el);\n    },\n\n    parse: function (topics) {\n        return parseTopics(topics);\n    },\n\n    handle: function (value, prop, $el, topics) {\n        value = ($.isPlainObject(value) ? value : [].concat(value));\n\n        const { keyAlias, valueAlias } = aliasesFromTopics(topics, value);\n\n        const originalHTML = getOriginalContents($el, ($el)=> $el.html());\n        const knownData = getKnownDataForEl($el);\n        const missingReferences = findMissingReferences(originalHTML, [keyAlias, valueAlias].concat(Object.keys(knownData)));\n        const stubbedTemplate = stubMissingReferences(originalHTML, missingReferences);\n\n        const templateFn = template(stubbedTemplate);\n        const $dummyEl = $('<div></div>');\n        each(value, function (dataval, datakey) {\n            if (dataval === undefined || dataval === null) {\n                dataval = dataval + ''; //convert undefineds to strings\n            }\n            const templateData = $.extend(true, {}, knownData, {\n                [keyAlias]: datakey,\n                [valueAlias]: dataval\n            });\n\n            let nodes;\n            let isTemplated;\n            try {\n                const templated = templateFn(templateData);\n                const templatedWithReferences = addBackMissingReferences(templated, missingReferences);\n                isTemplated = templatedWithReferences !== stubbedTemplate;\n                nodes = $(templatedWithReferences);\n            } catch (e) { //you don't have all the references you need;\n                nodes = $(stubbedTemplate);\n                isTemplated = true;\n                updateKnownDataForEl($(nodes), templateData);\n            }\n\n            nodes.each(function (i, newNode) {\n                const $newNode = $(newNode);\n                each($newNode.data(), function (val, key) {\n                    $newNode.data(key, toImplicitType(val));\n                });\n                if (!isTemplated && !$newNode.html().trim()) {\n                    $newNode.html(dataval);\n                }\n            });\n            $dummyEl.append(nodes);\n        });\n        \n        const el = $el.get(0);\n        const isInitialAnim = !elAnimatedMap.get(el);\n        const $withAnimAttrs = addChangeClassesToList($el.children(), $dummyEl.children(), isInitialAnim, animation);\n        $el.empty().append($withAnimAttrs);\n\n        elAnimatedMap.set(el, true);\n    }\n};\n\nexport default foreachAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/loop-attrs/foreach-attr/index.js","import { template, each, isEmpty } from 'lodash';\nimport { toImplicitType } from 'utils/parse-utils';\nimport { random } from 'utils/general';\nimport { attrs, animation } from 'config';\n\nconst templateIdAttr = attrs.repeat.templateId;\n\nimport { addChangeClassesToList } from 'utils/animation';\n\nconst elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\nimport { getKnownDataForEl, updateKnownDataForEl, removeKnownData, findMissingReferences, stubMissingReferences, addBackMissingReferences, getOriginalContents, clearOriginalContents } from 'dom/attribute-manager/attr-template-utils';\n\nimport { aliasesFromTopics, parseTopics } from '../loop-attr-utils';\n\n/**\n * @type AttributeHandler \n */\nconst loopAttrHandler = {\n    test: 'repeat',\n\n    target: '*',\n\n    unbind: function (attr, $el) {\n        var id = $el.data(templateIdAttr);\n        if (id) {\n            $el.nextUntil(':not([data-' + id + '])').remove();\n            // $el.removeAttr('data-' + templateIdAttr); //FIXME: Something about calling rebind multiple times in IB makes this happen without the removal\n        }\n\n        const el = $el.get(0);\n        elAnimatedMap.delete(el);\n\n        const originalHTML = getOriginalContents($el);\n        const current = $el.get(0).outerHTML;\n        if (originalHTML && current !== originalHTML) {\n            $el.replaceWith(originalHTML);\n        }\n        clearOriginalContents($el);\n        removeKnownData($el);\n    },\n\n    parse: function (topics) {\n        return parseTopics(topics);\n    },\n\n    init: function (attr, value, $el) {\n        \n    },\n\n    handle: function (value, prop, $el, topics) {\n        value = ($.isPlainObject(value) ? value : [].concat(value));\n        let id = $el.data(templateIdAttr);\n        \n        $el.removeAttr('hidden');\n        const originalHTML = getOriginalContents($el, ($el)=> $el.get(0).outerHTML);\n\n        const $dummyOldDiv = $('<div></div>');\n        if (id) {\n            const $removed = $el.nextUntil(':not([data-' + id + '])').remove();\n            $dummyOldDiv.append($removed);\n        } else {\n            id = random('repeat-');\n            $el.attr('data-' + templateIdAttr, id);\n        }\n\n        const { keyAlias, valueAlias } = aliasesFromTopics(topics, value);\n\n        const knownData = getKnownDataForEl($el);\n        const missingReferences = findMissingReferences(originalHTML, [keyAlias, valueAlias].concat(Object.keys(knownData)));\n        const stubbedTemplate = stubMissingReferences(originalHTML, missingReferences);\n\n        if (isEmpty(value)) {\n            $el.attr('hidden', true); //There's always going to be 1 el otherwise\n            return;\n        }\n\n        const templateFn = template(stubbedTemplate);\n        let last;\n        each(value, function (dataval, datakey) {\n            if (dataval === undefined || dataval === null) {\n                dataval = dataval + ''; //convert undefineds to strings\n            }\n            const templateData = $.extend(true, {}, knownData, {\n                [keyAlias]: datakey,\n                [valueAlias]: dataval\n            });\n\n            let nodes;\n            let isTemplated;\n            try {\n                const templated = templateFn(templateData);\n                const templatedWithReferences = addBackMissingReferences(templated, missingReferences);\n                isTemplated = templatedWithReferences !== stubbedTemplate;\n                nodes = $(templatedWithReferences);\n            } catch (e) { //you don't have all the references you need;\n                nodes = $(stubbedTemplate);\n                isTemplated = true;\n                updateKnownDataForEl($(nodes), templateData);\n            }\n\n            var hasData = (dataval !== null && dataval !== undefined);\n            nodes.each(function (i, newNode) {\n                const $newNode = $(newNode);\n                $newNode.removeAttr('data-f-repeat').removeAttr('data-' + templateIdAttr);\n                each($newNode.data(), function (val, key) {\n                    if (!last) {\n                        $el.data(key, toImplicitType(val));\n                    } else {\n                        $newNode.data(key, toImplicitType(val));\n                    }\n                });\n                $newNode.attr('data-' + id, true);\n                if (!isTemplated && !$newNode.children().length && hasData) {\n                    $newNode.html(dataval + '');\n                }\n            });\n            if (!last) {\n                last = $el.html(nodes.html());\n            } else {\n                last = nodes.insertAfter(last);\n            }\n        });\n\n        const $newEls = $el.nextUntil(`:not('[data-${id}]')`);\n\n        const el = $el.get(0);\n        const isInitialAnim = !elAnimatedMap.get(el);\n        addChangeClassesToList($dummyOldDiv.children(), $newEls, isInitialAnim, animation);\n\n        elAnimatedMap.set(el, true);\n    }\n};\n\nexport default loopAttrHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/loop-attrs/repeat-attr/index.js","import { promisify } from './promise-utils';\n\nfunction executeAndResolve(fn, args, $def) {\n    const promisifiedFn = promisify(fn);\n    return promisifiedFn.apply(fn, args).then((result)=> {\n        $def.resolve(result);\n    }, (e)=> {\n        $def.reject(e);\n    });\n}\n\n/**\n * Returns debounced version of original (optionally promise returning) function\n * \n * @param {function(*):Promise} fn function to debounce\n * @param {number} debounceInterval \n * @param {Function[]} [argumentsReducers] pass in 1 reducer for each option your function takes\n * @returns {Function} debounced function\n */\nexport default function debounceAndMerge(fn, debounceInterval, argumentsReducers) {\n    if (!argumentsReducers) {\n        var arrayReducer = function (accum, newVal) {\n            return (accum || []).concat(newVal);\n        };\n        argumentsReducers = [arrayReducer];\n    }\n\n    const queue = [];\n    let timer = null;\n\n    function mergeArgs(oldArgs, newArgs) {\n        const merged = newArgs.map(function (newArg, index) {\n            var reducer = argumentsReducers[index];\n            if (reducer) {\n                return reducer(oldArgs[index], newArg);\n            }\n            return newArg;\n        });\n        return merged;\n    }\n\n    /**\n     * @returns {Promise}\n     */\n    return function debouncedFunction() {\n        const newArgs = Array.prototype.slice.call(arguments);\n        if (timer) {\n            clearTimeout(timer);\n            const mergedArgs = mergeArgs(queue[0].args, newArgs);\n            queue[0].args = mergedArgs;\n        } else {\n            const args = mergeArgs([], newArgs);\n            queue.push({\n                $def: $.Deferred(),\n                args: args\n            });\n        }\n\n        timer = setTimeout(()=> {\n            timer = null;\n            const item = queue.pop();\n            executeAndResolve(fn, item.args, item.$def);\n        }, debounceInterval);\n\n        return queue[0].$def.promise();\n    };\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/general/debounce-and-merge.js","import { isNumber } from 'lodash';\n\nconst elClassesMap = new WeakMap();\nfunction deleteAddedClasses($el) {\n    const el = $el.get(0);\n    const addedClasses = elClassesMap.get(el);\n    if (addedClasses) {\n        $el.removeClass(addedClasses);\n    }\n}\n/**\n * @type AttributeHandler\n */\nconst classAttr = {\n    test: 'class',\n\n    target: '*',\n\n\n    unbind: function (attr, $el) {\n        const el = $el.get(0);\n        deleteAddedClasses($el);\n        elClassesMap.delete(el);\n    },\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n\n        const el = $el.get(0);\n        deleteAddedClasses($el);\n\n        if (isNumber(value)) {\n            value = 'value-' + value;\n        }\n        setTimeout(()=> {\n            $el.addClass(value); //If the classes have an animation set, removing with a timeout will trigger it\n        }, 0);\n        elClassesMap.set(el, value);\n    }\n};\n\nexport default classAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/class-attr/index.js","/**\n * @type AttributeHandler \n */\nconst booleanAttrHandler = {\n    target: '*',\n\n    test: /^(?:checked|selected|async|autofocus|autoplay|controls|defer|ismap|loop|multiple|open|required|scoped|disabled|hidden|readonly)$/i,\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        const val = ($el.attr('value')) ? (value == $el.prop('value')) : !!value; //eslint-disable-line eqeqeq\n        $el.prop(prop, val);\n    }\n};\n\nexport default booleanAttrHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/boolean-attr/index.js","/**\n  * @type AttributeHandler\n  */\nconst showifHandler = {\n    test: 'showif',\n\n    target: '*',\n\n    init: function (attr, value, $el) {\n        $el.hide(); //hide by default; if not this shows text until data is fetched\n    },\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        return (value && `${value}`.trim()) ? $el.show() : $el.hide();\n    }\n};\n\nexport default showifHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/toggles/show-if-attr/index.js","/**\n  * @type AttributeHandler\n  */\nconst hideifHandler = {\n    test: 'hideif',\n\n    target: '*',\n\n    init: function (attr, value, $el) {\n        $el.hide(); //hide by default; if not this shows text until data is fetched\n    },\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        if (value && `${value}`.trim()) {\n            $el.hide();\n        } else {\n            $el.show();\n        }\n    }\n};\n\nexport default hideifHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/toggles/hide-if-attr/index.js","/**\n  * @type {AttributeHandler}\n  */\nconst checkboxAttrHandler = {\n\n    target: ':checkbox,:radio',\n\n    test: 'bind',\n\n    handle: function (value, prop, $el) {\n        if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        const settableValue = $el.attr('value'); //initial value\n        const isChecked = (typeof settableValue !== 'undefined') ? (settableValue == value) : !!value; //eslint-disable-line eqeqeq\n        $el.prop('checked', isChecked);\n    }\n};\n\nexport default checkboxAttrHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/binds/checkbox-radio-bind-attr/index.js","/**\n * @type AttributeHandler \n */\nconst inputBindAttr = {\n    target: 'input, select, textarea',\n\n    test: 'bind',\n\n    handle: function (value, prop, $el) {\n        if ($el.is(':focus')) {\n            return; //If an user is actively typing in a value, don't overwrite it\n        }\n        if (value === undefined) {\n            value = '';\n        } else if (Array.isArray(value)) {\n            value = value[value.length - 1];\n        }\n        $el.val(value + '');\n    }\n};\n\nexport default inputBindAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/binds/input-bind-attr/index.js","import { template } from 'lodash';\nimport { addContentAndAnimate } from 'utils/animation';\nimport { animation } from 'config';\n\nimport { extractVariableName, extractAlias, translateDataToTemplatable, translateDataToInsertable } from '../bind-utils';\n\nimport { getKnownDataForEl, updateKnownDataForEl, removeKnownData, findMissingReferences, stubMissingReferences, addBackMissingReferences, isTemplated, getOriginalContents, clearOriginalContents } from 'dom/attribute-manager/attr-template-utils';\n\nconst elAnimatedMap = new WeakMap(); //TODO: Can probably get rid of this if we make subscribe a promise and distinguish between initial value\n\nfunction toAliasMap(topics) {\n    return (topics || []).reduce((accum, topic)=> {\n        accum[topic.name] = topic.alias;   \n        return accum;\n    }, {});\n}\n\nfunction getNewContent(currentContents, value, $el, topics) {\n    if (!isTemplated(currentContents)) {\n        return translateDataToInsertable(value);\n    }\n\n    const templateData = translateDataToTemplatable(value, toAliasMap(topics));\n    const knownData = getKnownDataForEl($el);\n    $.extend(templateData, knownData);\n\n    const missingReferences = findMissingReferences(currentContents, Object.keys(templateData));\n    const stubbedTemplate = stubMissingReferences(currentContents, missingReferences);\n\n    const templateFn = template(stubbedTemplate);\n    try {\n        const templatedHTML = templateFn(templateData);\n        const templatedWithReferences = addBackMissingReferences(templatedHTML, missingReferences);\n        return templatedWithReferences;\n    } catch (e) { //you don't have all the references you need;\n        updateKnownDataForEl($el, templateData);\n        return currentContents;\n    }\n}\n\n/**\n * @type AttributeHandler \n */\nconst bindAttrHandler = {\n\n    target: '*',\n\n    test: 'bind',\n\n    parse: function (topics) {\n        return topics.map((topic)=> {\n            const attrVal = topic.name;\n            return {\n                name: extractVariableName(attrVal),\n                alias: extractAlias(attrVal),\n            };\n        });\n    },\n\n    //FIXME: Can't do this because if you have a bind within a foreach, foreach overwrites the old el with a new el, and at that points contents are lost\n    // But if i don't do this the <%= %> is going to show up\n    // init: function (attr, value, $el) {\n    //     const contents = getOriginalContents($el, ($el)=> $el.html());\n    //     if (isTemplated(contents)) {\n    //         $el.empty();\n    //     }\n    // },\n\n    unbind: function (attr, $el) {\n        const el = $el.get(0);\n        elAnimatedMap.delete(el);\n\n        const bindTemplate = getOriginalContents($el);\n        const current = $el.html();\n        if (bindTemplate && current !== bindTemplate) {\n            $el.html(bindTemplate);\n        }\n        clearOriginalContents($el);\n        removeKnownData($el);\n    },\n\n    handle: function (value, prop, $el, topics) {\n        const el = $el.get(0);\n        const originalContents = getOriginalContents($el, ($el)=> $el.html());\n        const contents = getNewContent(originalContents, value, $el, topics);\n\n        addContentAndAnimate($el, contents, !elAnimatedMap.has(el), animation);\n        elAnimatedMap.set(el, true);\n    }\n};\n\nexport default bindAttrHandler;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/binds/default-bind-attr/index.js","export function translateDataToInsertable(value) {\n    if (Array.isArray(value)) {\n        value = value[value.length - 1];\n    }\n    value = ($.isPlainObject(value)) ? JSON.stringify(value) : value + '';\n    return value;\n}\n\n/**\n * @param {any} value\n * @param {Object} aliasMap\n * @returns {{value: any}}\n */\nexport function translateDataToTemplatable(value, aliasMap) {\n    const templateData = { value: value };\n    if ($.isPlainObject(value)) {\n        Object.keys(value).forEach((originalName)=> {\n            const alias = aliasMap[originalName] || originalName;\n            templateData[alias] = value[originalName];\n        });\n    } else {\n        Object.keys(aliasMap).forEach((originalName)=> {\n            const alias = aliasMap[originalName] || originalName;\n            templateData[alias] = value;\n        });\n    }\n    \n    return templateData;\n}\n\nconst AS_REGEX = /(.*) (?:as)\\s+\\((.*)\\)/;\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nexport function extractVariableName(attrVal) {\n    const asMatch = attrVal.trim().match(AS_REGEX);\n    const varName = asMatch && asMatch[1] ? asMatch[1] : attrVal;\n    return varName.trim();\n}\n\n/**\n * @param {string} attrVal \n * @returns {string}\n */\nexport function extractAlias(attrVal) {\n    const asMatch = attrVal.trim().match(AS_REGEX);\n    const alias = asMatch && asMatch[2] ? asMatch[2] : attrVal;\n    return alias.trim();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/binds/bind-utils/index.js","/**\n * @type AttributeHandler \n */\nconst defaultAttr = {\n    test: '*',\n\n    target: '*',\n\n    handle: function (value, prop, $el) {\n        //FIXME: The _right_ way to do this would be to set attr, not prop. \n        //However Polymer 1.0 doesn't link attrs with stringified JSON, and that's really the primary use-case for this, so, ignoring\n        //However Polymer is fine with 'data-X' attrs having stringified JSON. Eventually we should make this attr and fix polymer\n        //but can't do that for backwards comptability reason. See commit bbc4a49039fb73faf1ef591a07b371d7d667cf57\n        $el.prop(prop, value);\n    }\n};\n\nexport default defaultAttr;\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/attribute-manager/attributes/default-attr/index.js","/**\n * Hooks up dom elements to mutation observer\n * @param  {HTMLElement} target     root to start observing from\n * @param  {Object} domManager \n * @param  {boolean} isEnabled Determines if it's enabled by default\n * @returns {Object}\n */\nexport default function (target, domManager, isEnabled) {\n    if (typeof MutationObserver === 'undefined') {\n        return;\n    }\n    // Create an observer instance\n    var observer = new MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n            var added = $(mutation.addedNodes).find(':f');\n            added = added.add($(mutation.addedNodes).filter(':f'));\n            var removed = $(mutation.removedNodes).find(':f');\n            removed = removed.add($(mutation.removedNodes).filter(':f'));\n            if (added && added.length) {\n                domManager.bindAll(added);\n            }\n            if (removed && removed.length) {\n                domManager.unbindAll(removed);\n            }\n            if (mutation.attributeName === 'data-f-channel') {\n                domManager.unbindAll(mutation.target);\n                domManager.bindAll(mutation.target);\n            }\n        });\n    });\n    var mutconfig = {\n        attributes: true,\n        attributeFilter: ['data-f-channel'],\n        childList: true,\n        subtree: true,\n        characterData: false\n    };\n    var publicApi = {\n        enable: function () {\n            observer.observe(target, mutconfig);\n        },\n        disable: function () {\n            observer.disconnect();\n        }\n    };\n    if (isEnabled) {\n        publicApi.enable();\n    }\n    return publicApi;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom/plugins/auto-update-bindings.js","import DefaultChannelManager from './channel-manager';\n\nimport router from 'channels/channel-router';\nimport { JSONRouteHandler, EpicenterRouteHandler, DomRouteHandler } from './route-handlers';\nimport { interpolatable, routable } from './channel-manager-enhancements';\n\n//Moving connecting glue here so channel-manager can be tested in isolation\nconst InterpolatableRoutableChannelManager = interpolatable(routable(DefaultChannelManager, router));\nexport default function ChannelManager(opts) {\n    const defaultRouteHandlers = [JSONRouteHandler, DomRouteHandler, EpicenterRouteHandler];\n    const routes = opts && opts.routes ? opts.routes : [];\n    const cm = new InterpolatableRoutableChannelManager($.extend(true, {}, {\n        routes: [].concat(routes, defaultRouteHandlers)\n    }, opts));\n    return cm;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/configured-channel-manager.js","import $ from 'jquery';\nimport { normalizeParamOptions, publishableToObject } from './channel-utils';\nimport { uniqueId, isFunction, intersection, uniq } from 'lodash';\n/**\n * \n * @param {Array<string>|string} topics \n * @param {Function} callback \n * @param {Object} options\n * @returns {Subscription}\n */\nfunction makeSubs(topics, callback, options) {\n    const id = uniqueId('subs-');\n    const defaults = {\n        /**\n         * Determines if the callback function is called per item or per subscription.\n         *\n         * If `false`, the callback function is called once for each item to which you are subscribing. If `true`, the callback function is called only once, no matter how many items you have subscribed to. Defaults to `false`.\n         * @type {Boolean}\n         */\n        batch: false,\n\n\n        /**\n         * Determines if the last published data should be cached for future notifications. For example:\n         *\n         *      channel.subscribe(['price', 'cost'], callback1, { batch: true, cache: false });\n         *      channel.subscribe(['price', 'cost'], callback2, { batch: true, cache: true });\n         *\n         *      channel.publish({ 'price': 1 });\n         *      channel.publish({ 'cost': 1 });\n         *\n         * Here, `callback2` is called once, and `callback1` is not called: The channel caches the first publish value and notifies after all dependent topics have data.\n         *\n         * If the `publish()` call was instead:\n         *\n         *      channel.publish({ price: 1, cost: 1 })\n         *\n         * Then both `callback1` and `callback2` are called.\n         *\n         * Setting `cache: true` is useful if you know if your topics will be published individually, but you still want to handle them together. As a concrete example, consider a slider with a chart: the input values, determined by the slider, should not cause the chart to redraw immediately. The chart could wait until all sliders have been updated a checkbox is checked, for example.\n         * Setting `cache: false` is useful if you know if your topics will *always* be published together and they'll be called at the same time.\n         *\n         * Note this has no discernible effect if `batch` is `false`. Additionally, this has no discernible effect if `variables` are \"noisy\" (`silent: true`).\n         * @type {Boolean}\n         */\n        cache: true,\n    };\n    const opts = $.extend({}, defaults, options);\n    if (!callback || !isFunction(callback)) {\n        throw new Error('subscribe callback should be a function');\n    }\n    return $.extend(true, {\n        id: id,\n        topics: [].concat(topics),\n        callback: callback,\n    }, opts);\n}\n\nlet cacheBySubsId = {};\nlet sentDataBySubsId = {};\n\nfunction copy(data) {\n    if (Array.isArray(data)) {\n        return data.map((d)=> copy(d));\n    } else if ($.isPlainObject(data)) {\n        return Object.keys(data).reduce((accum, key)=> {\n            accum[key] = copy(data[key]);\n            return accum;\n        }, {});\n    }\n    return data;\n}\n/**\n* @param {Subscription} subscription \n* @param {*} data\n*/\nfunction callbackSubscriber(subscription, data) {\n    const id = subscription.id;\n    subscription.callback(data, { id: id, previousData: sentDataBySubsId[id] });\n    sentDataBySubsId[id] = copy(data);\n}\n\n/**\n* @param {Publishable[]} topics\n* @param {Subscription} subscription \n*/\nfunction checkAndNotifyBatch(topics, subscription) {\n    const publishData = publishableToObject(topics);\n    const matchingTopics = intersection(Object.keys(publishData), subscription.topics);\n    if (!matchingTopics.length) {\n        return;\n    }\n\n    const relevantDataFromPublish = matchingTopics.reduce((accum, topic)=> {\n        accum[topic] = publishData[topic];\n        return accum;\n    }, {});\n    const cachedDataForSubs = cacheBySubsId[subscription.id] || {};\n    const knownDataForSubs = $.extend({}, cachedDataForSubs, relevantDataFromPublish);//jQ Deep clone here will also concat arrays.\n\n    if (subscription.cache) {\n        cacheBySubsId[subscription.id] = knownDataForSubs;\n    }\n    const hasDataForAllTopics = intersection(Object.keys(knownDataForSubs), subscription.topics).length === subscription.topics.length;\n    if (hasDataForAllTopics) {\n        callbackSubscriber(subscription, knownDataForSubs);\n    }\n}\n\n\n/**\n * @param {Publishable[]} topics\n * @param {Subscription} subscription \n */\nfunction checkAndNotify(topics, subscription) {\n    topics.forEach(function (topic) {\n        const needsThisTopic = subscription.topics.indexOf(topic.name) !== -1;\n        const isWildCard = subscription.topics.indexOf('*') !== -1;\n        if (needsThisTopic || isWildCard) {\n            callbackSubscriber(subscription, { [topic.name]: topic.value });\n        }\n    });\n}\n\n/**\n* @param {Subscription[]} subcriptionList\n* @returns {Array<string>}\n*/\nfunction getTopicsFromSubsList(subcriptionList) {\n    return subcriptionList.reduce(function (accum, subs) {\n        accum = accum.concat(subs.topics);\n        return accum;\n    }, []);\n}\n\n/**\n * @class ChannelManager\n */\nclass ChannelManager {\n    constructor(options) {\n        this.subscriptions = [];\n    }\n\n    /**\n     * Perform the action (for example, update the variables or call the operation), and alert subscribers.\n     *\n     * **Examples**\n     *\n     *      Flow.channel.publish('operations:myOperation', myOperParam);\n     *      Flow.channel.publish({ name: 'operations:operName', value: [operParam1, operParam2] });\n     *\n     *      Flow.channel.publish('variables:myVariable', newValue);\n     *      Flow.channel.publish({ myVar1: newVal1, myVar2: newVal2 });\n     *\n     * @param {string|Publishable} topic\n     * @param {any} [value] item to publish\n     * @param {PublishOptions} [options]\n     * @returns {Promise}\n     */\n    publish(topic, value, options) {\n        const normalized = normalizeParamOptions(topic, value, options);\n        let prom = $.Deferred().resolve(normalized.params).promise();\n        prom = prom.then((publishResponses)=> {\n            this.notify(publishResponses, options);\n            return publishResponses;\n        });\n        return prom;\n    }\n\n    /**\n     * Alert each subscriber about the operation and its parameters. This can be used to provide an update without a round trip to the server. However, it is rarely used: you almost always want to `subscribe()` instead so that the model is actually changed (has a variable update or an operation called).\n     *\n     * **Example**\n     *\n     *      Flow.channel.notify('variables:myVariable', newValue);\n     *      Flow.channel.notify('operations:myOperation', myOperParam);\n     *\n     * @param {string|Publishable} topic\n     * @param {any} [value] item to publish\n     * @param {PublishOptions} [options]\n     * @returns {void}\n     */\n    notify(topic, value, options) {\n        const normalized = normalizeParamOptions(topic, value, options);\n        // console.log('notify', normalized.params);\n        this.subscriptions.forEach(function (subs) {\n            const fn = subs.batch ? checkAndNotifyBatch : checkAndNotify;\n            fn(normalized.params, subs);\n        });\n    }\n\n    /**\n     * Subscribe to changes on a channel: Ask for notification when variables are updated, or when operations are called.\n     *\n     * **Examples**\n     *       Flow.channel.subscribe('variables:myVariable',\n     *          function() { console.log('updated!'); } );\n     *\n     *       Flow.channel.subscribe('operations:myOperation',\n     *          function() { console.log('called!'); } );\n     *\n     * @param {Array<string>|string} topics\n     * @param {Function} cb\n     * @param {Object} [options]\n     * @returns {string}\n     */\n    subscribe(topics, cb, options) {\n        const subs = makeSubs(topics, cb, options);\n        delete cacheBySubsId[subs.id]; //Just in case subsid is being reused\n        delete sentDataBySubsId[subs.id];\n        this.subscriptions = this.subscriptions.concat(subs);\n        return subs.id;\n    }\n        \n\n    /**\n     * Stop receiving notification when a variable is updated or an operation is called.\n     *\n     * @param {string} token The identifying token for this subscription. (Created and returned by the `subscribe()` call.)\n     */\n    unsubscribe(token) {\n        const olderLength = this.subscriptions.length;\n        const remaining = this.subscriptions.filter(function (subs) {\n            return subs.id !== token;\n        });\n        if (remaining.length === olderLength) {\n            throw new Error('No subscription found for token ' + token);\n        }\n        delete cacheBySubsId[token];\n        delete sentDataBySubsId[token];\n        this.subscriptions = remaining;\n    }\n\n    /**\n     * Stop receiving notifications for all operations. No parameters.\n     *\n     * @returns {void} No return value.\n     */ \n    unsubscribeAll() {\n        cacheBySubsId = {};\n        sentDataBySubsId = {};\n        this.subscriptions = [];\n    }\n\n    /**\n     * View all topics currently subscribed to for this channel.\n     * @returns {Array<string>} List of topics. \n     */\n    getSubscribedTopics() {\n        const list = uniq(getTopicsFromSubsList(this.subscriptions));\n        return list;\n    }\n\n    /**\n     *  View everything currently subscribed to this topic.\n     * \n     * @param {string} [topic] topic to filter by\n     * @returns {Subscription[]}\n     */\n    getSubscribers(topic) {\n        if (!topic) {\n            return this.subscriptions;\n        }\n        return this.subscriptions.filter(function (subs) {\n            return subs.topics.indexOf(topic) !== -1;\n        });\n    }\n}\n\nexport default ChannelManager;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager.js","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 54\n// module chunks = 0","import _ from 'lodash';\n\n/**\n * @param {string} topic\n * @param {Handler[]} handlers\n * @param {any} [matchOptions] options to pass on to matcher\n * @returns {Handler | undefined}\n */\nexport function findBestHandler(topic, handlers, matchOptions) {\n    for (var i = 0; i < handlers.length; i++) {\n        var thishandler = handlers[i];\n        var match = thishandler.match(topic, matchOptions);\n        if (match !== false) {\n            return $.extend(true, {}, thishandler, { matched: match });\n        }\n    }\n    return undefined;\n}\n\n/**\n * [groupByHandlers description]\n * @param  {Array<string>} topics   List of topics to match. Format can be anything your handler.match function handles\n * @param  {Handler[]} handlers Handlers of type [{ match: func }]\n * @returns {HandlerWithTopics[]} The handler array with each item now having an additional 'data' attr added to it with the matching topics\n */\nexport function groupByHandlers(topics, handlers) {\n    handlers = handlers.map(function (h, index) {\n        h.key = index;\n        return h;\n    });\n    var topicMapping = ([].concat(topics)).reduce(function (accum, topic) {\n        var bestHandler = findBestHandler(topic, handlers);\n        if (bestHandler) {\n            //if handler matches different strings treat both as different handlers\n            var key = bestHandler.key + bestHandler.matched;\n            if (!accum[key]) {\n                bestHandler.data = [];\n                accum[key] = bestHandler;\n            }\n            accum[key].data.push(topic);\n        }\n        return accum;\n    }, {});\n    return _.values(topicMapping);\n}\n\n/**\n * Takes a `publish` dataset and groups it by handler maintaining the data sequence\n * @param  {Publishable[]} data     Of the form [{ name: 'X', }]\n * @param  {Handler[]} handlers Handlers of type [{ match: func }]\n * @returns {HandlerWithData[]} The handler array with each item now having an additional 'data' attr added to it with the publishable data\n */\nexport function groupSequentiallyByHandlers(data, handlers) {\n    handlers = handlers.map(function (h, index) {\n        h.key = index;\n        return h;\n    });\n    var grouped = data.reduce(function (accum, dataPt) {\n        var lastHandler = accum[accum.length - 1];\n        var bestHandler = findBestHandler(dataPt.name, handlers, true);\n        if (bestHandler) {\n            if (lastHandler && bestHandler.key === lastHandler.key) {\n                lastHandler.data.push(dataPt);\n            } else {\n                accum.push($.extend({}, bestHandler, { data: [dataPt] }));\n            }\n        } else {\n            accum.push({ data: [dataPt], matched: false });\n        }\n        return accum;\n    }, []);\n    return grouped;\n}\n\n\n/**\n * @param {any} response \n * @param {string[]} topics \n * @returns {Publishable[]}\n */\nexport function normalizeSubscribeResponse(response, topics) {\n    // @ts-ignore\n    if (response === undefined) {\n        return [];\n    }\n    const isAlreadyInPublishableFormat = Array.isArray(response) && (!response.length || response[0].name !== undefined);\n    if (isAlreadyInPublishableFormat) {\n        return response; \n    }\n    if (typeof response === 'object' && !Array.isArray(response)) {\n        return topics.reduce((accum, t)=> {\n            accum.push({ name: t, value: response[t] });\n            return accum; \n        }, []);\n    }\n    if (topics.length === 1) { //it's not in a publishable format, so someone just returned a string or something\n        const name = topics[0];\n        return [{ name: name, value: response }];\n    }\n    throw new Error('unrecognized subscribe response format');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-router/utils/handler-utils.js","/**\n * @param {Publishable[]} published \n * @param {boolean|Array<string>|{except: Array<string>}} [silentOptions]\n * @returns {Publishable[]} filtered list\n */\nexport default function silencable(published, silentOptions) {\n    if (silentOptions === true || !published) {\n        return [];\n    } else if (Array.isArray(silentOptions)) {\n        return published.filter((data)=> {\n            const found = silentOptions.indexOf(data.name) !== -1;\n            return !found;\n        });\n    } else if (silentOptions && silentOptions.except) {\n        return published.filter((data)=> {\n            const found = (silentOptions.except || []).indexOf(data.name) !== -1;\n            return found;\n        });\n    }\n    return published;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-router/utils/silencable.js","import { isFunction } from 'lodash';\n\n/**\n * \n * @param {Publishable[]} publishable \n * @param {boolean|string[]|Function} readOnlyOptions \n * @returns {Publishable[]} filtered list\n */\nexport default function excludeReadOnly(publishable, readOnlyOptions) {\n    if (isFunction(readOnlyOptions)) {\n        readOnlyOptions = readOnlyOptions();\n    }\n    if (readOnlyOptions === true) {\n        console.error('Tried to publish to a readonly channel', publishable);\n        return [];\n    }  \n    if (Array.isArray(readOnlyOptions)) {\n        const split = publishable.reduce((accum, data)=> {\n            const isReadonly = readOnlyOptions.indexOf(data.name) !== -1;\n            if (isReadonly) {\n                accum.readOnly.push(data);\n            } else {\n                accum.remaining.push(data);\n            }\n            return accum;\n        }, { readOnly: [], remaining: [] });\n        \n        if (split.readOnly.length) {\n            console.warn('Ignoring readonly publishes', split.readOnly);\n        }\n        return split.remaining;\n    }\n    return publishable;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-router/utils/exclude-read-only.js","import { toImplicitType } from 'utils/parse-utils';\n\nexport function match(topic) {\n    var parsed = toImplicitType(topic);\n    return typeof parsed !== 'string' ? '' : false;\n}\n\nexport default {\n    match: match,\n    name: 'JSON Route',\n    subscribeHandler: function (topics) {\n        const parsed = topics.map((t)=> {\n            return {\n                name: t,\n                value: toImplicitType(t)\n            };\n        });\n        return parsed;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/json-route-handler/index.js","import DefaultRunRouteHandler from './default-run-route-handler';\nimport ScenarioRouteHandler from './scenario-route-handler';\nimport RunidRouteHandler from './runid-route-handler';\nimport WorldRouteHandler from './world-route-handler';\n\nimport MultiRunRouteHandler from './multi-run-route-handler';\n\n\nimport { withPrefix } from 'channels/channel-router/utils';\nimport { matchPrefix, matchDefaultPrefix, matchRegex } from 'channels/route-handlers/route-matchers';\n\nimport router from 'channels/channel-router';\n\nfunction getOptions(opts, key) {\n    var serviceOptions = $.extend(true, {}, opts.defaults, opts[key]);\n    var channelOptions = $.extend(true, {}, serviceOptions.channelOptions);\n    delete serviceOptions.channelOptions;\n\n    return { serviceOptions: serviceOptions, channelOptions: channelOptions };\n}\n\nvar SCENARIO_PREFIX = 'sm:';\nvar RUN_PREFIX = 'rm:';\nconst WORLD_PREFIX = 'world:';\n\nvar sampleRunidLength = '000001593dd81950d4ee4f3df14841769a0b'.length;\nvar runidRegex = '(?:.{' + sampleRunidLength + '})';\n\n/* eslint-disable complexity */\nexport default function EpicenterRouteHandler(config, notifier, channelManagerContext) {\n    var opts = $.extend(true, {}, config);\n\n    var runidHandlerOpts = getOptions(opts, 'runid');\n    var runidHandler = new RunidRouteHandler(runidHandlerOpts, notifier);\n    var multiRunHandler = new MultiRunRouteHandler(runidHandlerOpts, withPrefix(notifier, 'runs'), channelManagerContext);\n    // var userChannel = new UserRouter(getOptions(opts, 'runManager').run, withPrefix(notifier, 'user:'), channelManagerContext);\n    \n    /** @type {Handler[]} **/\n    var handlers = [\n        $.extend({}, runidHandler, { \n            name: 'customRun',\n            match: matchRegex(runidRegex),\n            options: runidHandlerOpts.channelOptions,\n        }), \n        $.extend({}, multiRunHandler, {\n            name: 'archiveRuns',\n            match: matchPrefix('runs:'),\n            options: runidHandlerOpts.channelOptions,\n        }),  \n        // $.extend({}, userChannel, {\n        //     name: 'User Channel',\n        //     match: matchPrefix('user:'),\n        // })\n    ];\n    var exposable = {};\n\n    var runManagerOpts = getOptions(opts, 'runManager');\n    if (opts.runManager || (!opts.scenarioManager && runManagerOpts.serviceOptions.run)) {\n        var rm;\n        const hasEnoughInfo = runManagerOpts.serviceOptions.run && runManagerOpts.serviceOptions.run.model;\n        const isMultiplayer = runManagerOpts.serviceOptions.strategy === 'multiplayer' || runManagerOpts.serviceOptions.isMultiplayer;\n        \n        if (!hasEnoughInfo) {\n            console.warn('No model specified, not initializing run manager channel', opts);\n            rm = { expose: {} };\n        } else if (opts.scenarioManager) {\n            rm = new DefaultRunRouteHandler(runManagerOpts, withPrefix(notifier, RUN_PREFIX));\n            handlers.push($.extend({}, rm, { \n                name: 'run',\n                match: matchPrefix(RUN_PREFIX), //if both scenario manager and run manager are being used, require a prefix\n                options: runManagerOpts.channelOptions,\n            }));\n        } else if (isMultiplayer) {\n            //Ignore case where both scenario manager and multiplayer are being used\n            rm = new WorldRouteHandler(runManagerOpts, withPrefix(notifier, [WORLD_PREFIX, '']));\n            handlers.push($.extend({}, rm, { \n                name: 'World run',\n                match: matchDefaultPrefix(WORLD_PREFIX),\n                isDefault: true,\n                options: runManagerOpts.channelOptions,\n            }));\n        } else {\n            rm = new DefaultRunRouteHandler(runManagerOpts, withPrefix(notifier, [RUN_PREFIX, '']));\n            handlers.push($.extend({}, rm, { \n                name: 'run',\n                match: matchDefaultPrefix(RUN_PREFIX),\n                isDefault: true,\n                options: runManagerOpts.channelOptions,\n            }));\n        }\n\n        $.extend(exposable, rm.expose);\n    }\n\n    if (opts.scenarioManager) {\n        var scenarioManagerOpts = getOptions(opts, 'scenarioManager');\n        var sm = new ScenarioRouteHandler(scenarioManagerOpts, withPrefix(notifier, [SCENARIO_PREFIX, '']));\n        handlers.push($.extend({}, sm, { \n            name: 'scenario',\n            match: matchDefaultPrefix(SCENARIO_PREFIX),\n            options: scenarioManagerOpts.channelOptions,\n            isDefault: true,\n        }));\n\n        $.extend(exposable, sm.expose);\n    }\n\n    var epicenterRouter = router(handlers, notifier);\n    epicenterRouter.expose = exposable;\n    \n    return epicenterRouter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/index.js","import RunRouteHandler from '../run-route-handler';\n\nimport { withPrefix } from 'channels/channel-router/utils';\nimport router from 'channels/channel-router';\nimport { matchDefaultPrefix } from 'channels/route-handlers/route-matchers';\n\nconst { F } = window;\n\nconst RUN_PREFIX = 'current:';\n\nexport default function RunManagerRouteHandler(config, notifier) {\n    const defaults = {\n        serviceOptions: {},\n        channelOptions: {}\n    };\n    const opts = $.extend(true, {}, defaults, config);\n\n    const rmOptions = opts.serviceOptions;\n    const rm = new F.manager.RunManager(rmOptions);\n\n    const $creationPromise = rm.getRun().then((run)=> {\n        return rm.run;\n    });\n    const currentChannelOpts = $.extend(true, \n        { serviceOptions: $creationPromise, channelOptions: opts.channelOptions }, opts.defaults, opts.current);\n    const currentRunChannel = new RunRouteHandler(currentChannelOpts, withPrefix(notifier, [RUN_PREFIX, '']));\n\n    const runRouteHandler = $.extend(currentRunChannel, { \n        match: matchDefaultPrefix(RUN_PREFIX), //TODO: Just remove prefix?\n        name: 'Current Run',\n        isDefault: true,\n        options: currentChannelOpts.channelOptions,\n    });\n    const handlers = [\n        runRouteHandler\n    ];\n\n    const runMangerRouter = router(handlers);\n    runMangerRouter.expose = { runManager: rm };\n\n    return runMangerRouter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/default-run-route-handler/index.js","import { objectToPublishable, publishableToObject } from 'channels/channel-utils';\nimport { intersection } from 'lodash';\n\nexport default function RunMetaRouteHandler($runServicePromise, notifier) {\n\n    function mergeAndSend(runMeta, requestedTopics) {\n        var toSend = ([].concat(requestedTopics)).reduce(function (accum, meta) {\n            accum.push({ name: meta, value: runMeta[meta] });\n            return accum;\n        }, []);\n        return toSend;\n        // return notifier(toSend);\n    }\n    return {\n        subscribeHandler: function (topics, options) {\n            topics = [].concat(topics);\n            \n            return $runServicePromise.then(function (runService) {\n                var cachedValues = intersection(Object.keys(runService.runMeta || {}), topics);\n                if (options.autoFetch === false) {\n                    return $.Deferred().resolve({}).promise();\n                } else if (cachedValues.length === topics.length) {\n                    //FIXME: Add 'updated time' to meta, and fetch if that's < debounce interval -- use the custom debounce fn with the custom merge (debounce save as well?)\n                    //Make run service factory return patched run-service?\n                    return $.Deferred().resolve(mergeAndSend(runService.runMeta, topics)).promise();\n                } if (!runService.loadPromise) {\n                    runService.loadPromise = runService.load().then(function (data) {\n                        runService.runMeta = data;\n                        return data;\n                    });\n                } \n                return runService.loadPromise.then(function (data) {\n                    return mergeAndSend(data, topics);\n                });\n            });\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                var toSave = publishableToObject(topics);\n                return runService.save(toSave).then(function (res) {\n                    runService.runMeta = $.extend({}, true, runService.runMeta, res);\n                    return objectToPublishable(res);\n                });\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-meta-route-handler/index.js","import { debounceAndMerge } from 'utils/general';\nimport { objectToPublishable, publishableToObject } from 'channels/channel-utils';\nimport { uniqueId, uniq, difference } from 'lodash';\nimport { retriableFetch } from './retriable-variable-fetch';\n// import { optimizedFetch } from './optimized-variables-fetch';\n\nfunction mergeVariables(accum, newval) {\n    if (!accum) {\n        accum = [];\n    }\n    const merged = uniq(accum.concat(newval)).filter((v)=> !!(v && v.trim()));\n    // console.log(merged, 'merged');\n    return merged;\n}\n\nexport default function RunVariablesRouteHandler($runServicePromise, notifier) {\n    const id = uniqueId('variable-route-handler');\n\n    function debouncedVariableQuery(runService, debounceInterval) {\n        if (!runService.debouncedFetchers) {\n            runService.debouncedFetchers = {};\n        }\n        if (!runService.debouncedFetchers[id]) {\n            runService.debouncedFetchers[id] = debounceAndMerge(function (variables) {\n                return retriableFetch(runService, variables);\n            }, debounceInterval, [mergeVariables]);\n        }\n        return runService.debouncedFetchers[id];\n    }\n\n    let knownTopics = [];\n    return { \n        /**\n         * @param {{exclude:? boolean}} options \n         * @returns {Promise}\n         */\n        fetch: function (options) {\n            const opts = $.extend({ exclude: [] }, options);\n            return $runServicePromise.then(function (runService) {\n                const variablesToFetch = difference([].concat(knownTopics), opts.exclude);\n                if (!variablesToFetch.length) {\n                    return [];\n                }\n                return retriableFetch(runService, [].concat(variablesToFetch)).then(objectToPublishable).then(notifier);\n            });\n        },\n\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            knownTopics = knownTopics.filter((t)=> {\n                const isUnsubscribed = unsubscribedTopics.indexOf(t) !== -1;\n                const isRemaining = remainingTopics.indexOf(t) !== -1;\n                return !isUnsubscribed || isRemaining;\n            });\n        },\n        subscribeHandler: function (topics, options) {\n            // console.log('subscribe', JSON.stringify(topics));\n            const isAutoFetchEnabled = options.autoFetch;\n            const debounceInterval = options.debounce;\n\n            return $runServicePromise.then(function (runService) {\n                knownTopics = uniq(knownTopics.concat(topics));\n                if (!knownTopics.length) {\n                    return $.Deferred().resolve([]).promise();\n                } else if (!isAutoFetchEnabled) {\n                    return $.Deferred().resolve(topics).promise();\n                }\n                return debouncedVariableQuery(runService, debounceInterval)(topics).then((response)=> {\n                    const missingVariables = difference(topics, Object.keys(response));\n                    if (missingVariables.length) {\n                        return $.Deferred().reject({\n                            context: missingVariables,\n                            message: `Missing variables: ${missingVariables.join(',')}`\n                        }).promise();\n                    }\n                    return response;\n                });\n            });\n        },\n        /**\n         * \n         * @param {Publishable[]} variableData\n         */\n        notify: function (variableData) {\n            return $runServicePromise.then(function (runService) {\n                const variables = variableData.map((v)=> v.name);\n                //Need to fetch again because for Vensim, i'm notified about the Current value, while i need the value over time\n                return retriableFetch(runService, variables).then(objectToPublishable).then(notifier);\n            });\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                const toSave = publishableToObject(topics);\n                return runService.variables().save(toSave).then(function (response) {\n                    const variables = Object.keys(toSave); \n                    //Get the latest from the server because what you think you saved may not be what was saved\n                    //bool -> 1, scalar to array for time-based models etc\n                    return retriableFetch(runService, variables).then(objectToPublishable);\n                });\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-variables-route-handler/index.js","//Opaquely handle missing variables\nexport function retriableFetch(runService, variables) {\n    if (!variables || !variables.length) {\n        return $.Deferred().resolve({}).promise();\n    }\n    return runService.variables().query(variables).catch((e)=> {\n        const response = e.responseJSON;\n        const info = response.information;\n        if (info.code !== 'VARIABLE_NOT_FOUND') {\n            throw e;\n        }\n        const goodVariables = variables.filter((vName)=> {\n            const baseName = vName.split('[')[0];\n            const isBad = info.context.names.indexOf(baseName) !== -1;\n            return !isBad;\n        });\n        return retriableFetch(runService, goodVariables);\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-variables-route-handler/retriable-variable-fetch.js","export default function RunOperationsRouteHandler($runServicePromise, notifier) {\n    return {\n        /**\n         * \n         * @param {Publishable[]} operationsResponse \n         */\n        notify: function (operationsResponse) {\n            return notifier([].concat(operationsResponse));\n        },\n\n        subscribeHandler: function () {\n            return []; //Cannot subscribe to operations\n        },\n        publishHandler: function (topics, options) {\n            return $runServicePromise.then(function (runService) {\n                const toSave = topics.map(function (topic) {\n                    return { name: topic.name, params: topic.value };\n                });\n                return runService.serial(toSave).then(function (result) {\n                    const toReturn = result.map(function (response, index) {\n                        return { name: topics[index].name, value: response.result };\n                    });\n                    return toReturn;\n                });\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-route-handler/run-operations-route-handler/index.js","import RunRouteHandler from '../run-route-handler';\nimport { withPrefix } from 'channels/channel-router/utils';\nimport router from 'channels/channel-router';\nimport { matchPrefix, matchDefaultPrefix, } from 'channels/route-handlers/route-matchers';\n\n\nexport default function ScenarioManagerRouteHandler(config, notifier) {\n    var defaults = {\n        serviceOptions: {},\n        channelOptions: {},\n    };\n    var opts = $.extend(true, {}, defaults, config);\n\n    var sm = new window.F.manager.ScenarioManager(opts.serviceOptions);\n\n    var baselinePromise = sm.baseline.getRun().then(()=> sm.baseline.run);\n    var baselineOptions = $.extend(true, {\n        serviceOptions: baselinePromise,\n        channelOptions: {\n            meta: {\n                readOnly: true\n            },\n            variables: {\n                readOnly: true\n            }\n        }\n    }, opts.defaults, opts.baseline);\n    var currentRunPromise = sm.current.getRun().then(()=> sm.current.run);\n\n    var runOptions = $.extend(true, {\n        serviceOptions: currentRunPromise,\n    }, opts.defaults, opts.current);\n\n    var baselineHandler = new RunRouteHandler(baselineOptions, withPrefix(notifier, 'baseline:'));\n    var currentRunHandler = new RunRouteHandler(runOptions, withPrefix(notifier, ['current:', '']));\n    var handlers = [\n        $.extend(baselineHandler, {\n            name: 'baseline',\n            match: matchPrefix('baseline:'),\n            options: baselineOptions.channelOptions,\n        }),\n        $.extend(currentRunHandler, { \n            isDefault: true, \n            name: 'current',\n            match: matchDefaultPrefix('current:'),\n            options: runOptions.channelOptions,\n        }),\n\n    ];\n    \n    var scenarioManagerRouter = router(handlers, notifier);\n    scenarioManagerRouter.expose = { scenarioManager: sm };\n    return scenarioManagerRouter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/scenario-route-handler/index.js","import runChannelFactory from '../run-router-factory';\nimport { withPrefix, stripSuffixDelimiter } from 'channels/channel-router/utils';\n\nexport default function RunidRouteHandler(options, notifier) {\n    if (!options) options = {};\n\n    var opts = {};\n    opts.serviceOptions = options.serviceOptions && options.serviceOptions.run ? options.serviceOptions.run : {};\n    opts.channelOptions = options.channelOptions;\n\n    return {\n        subscribeHandler: function (topics, options, prefix) {\n            var runid = stripSuffixDelimiter(prefix);\n            //FIXME: Should i merge options here?\n            var channel = runChannelFactory(runid, opts, withPrefix(notifier, prefix));\n            return channel.subscribeHandler(topics, options, prefix);\n        },\n        publishHandler: function (topics, options, prefix) {\n            var runid = stripSuffixDelimiter(prefix);\n            var channel = runChannelFactory(runid, opts, withPrefix(notifier, prefix));\n            return channel.publishHandler(topics);\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/runid-route-handler/index.js","import RunRouteHandler from './run-route-handler';\nvar knownRunIDServiceChannels = {};\n\nexport default function (runid, options, notifier) {\n    var runChannel = knownRunIDServiceChannels[runid];\n    if (!runChannel) {\n        var runOptions = $.extend(true, {}, options, { serviceOptions: { id: runid } });\n        runChannel = new RunRouteHandler(runOptions, notifier);\n        knownRunIDServiceChannels[runid] = runChannel;\n    }\n    return runChannel;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/run-router-factory.js","import WorldUsersRouteHandler from './world-users-route-handler';\nimport WorldCurrentUserRouteHandler from './world-current-user-route-handler';\nimport ConsensusRouteHandler from './consensus-route-handler';\n\nimport { withPrefix } from 'channels/channel-router/utils';\nimport { matchPrefix, matchDefaultPrefix } from 'channels/route-handlers/route-matchers';\n\nimport RunRouteHandler from '../run-route-handler';\nimport router from 'channels/channel-router';\n\nconst { F } = window;\n\nconst RUN_PREFIX = 'run:';\nconst MULTI_USER_PREFIX = 'users:';\nconst USER_PREFIX = 'user:';\nconst CONSENSUS_PREFIX = 'consensus:';\n\n//TODO: Add custom worldid channel as well\nexport default function WorldRoutesHandler(config, notifier) {\n    const defaults = {\n        serviceOptions: {},\n        channelOptions: {}\n    };\n    const opts = $.extend(true, {}, defaults, config);\n\n    const rmOptions = opts.serviceOptions;\n    const rm = new F.manager.RunManager(rmOptions);\n    \n    let runPromise = null;\n    function getRun() {\n        if (!runPromise) {\n            runPromise = rm.getRun().then((run)=> {\n                if (!run.world) {\n                    console.error('No world found in run. Make sure you\\'re using EpicenterJS version > 2.7');\n                    throw new Error('Could not find world');\n                }\n                return run;\n            }, (err)=> {\n                console.error('Run manager get run error', err);\n                throw err;\n            });\n        }\n        return runPromise;\n    }\n    const $runPromise = getRun().then((run)=> {\n        const alreadyStubbedRunChannel = rm.run.channel; //FIXME: Explicitly pass instead of stubbing on a channel\n        if (alreadyStubbedRunChannel) {\n            return rm.run;\n        }\n        const channelManager = new F.manager.ChannelManager();\n        const worldChannel = channelManager.getWorldChannel(run.world);\n\n        worldChannel.subscribe(worldChannel.TOPICS.RUN_RESET, (run)=> {\n            rm.run.updateConfig({ filter: run.id });//Run handler is also listening on the run and will take care of notifying\n        }, this, { includeMine: false });\n        rm.run.channel = worldChannel;\n        return rm.run;\n    });\n\n    const currentRunHandlerOpts = $.extend(true, { serviceOptions: $runPromise, channelOptions: opts.channelOptions }, opts.defaults, opts.current);\n    const currentRunHandler = new RunRouteHandler(currentRunHandlerOpts, withPrefix(notifier, [RUN_PREFIX, '']));\n\n    const handlers = [];\n\n    const runRouteHandler = $.extend(currentRunHandler, { \n        match: matchDefaultPrefix(RUN_PREFIX),\n        name: 'World Run',\n        isDefault: true,\n        options: currentRunHandlerOpts.channelOptions,\n    });\n    handlers.unshift(runRouteHandler);\n\n    let $worldProm = null;\n    function getWorld() {\n        if (!$worldProm) {\n            $worldProm = getRun().then((run)=> {\n                return run.world;\n            });\n        }\n        return $worldProm;\n    }\n\n    const worldChannelMap = {};\n    const channelManager = new F.manager.ChannelManager();\n    function getChannelForWorld(worldid) {\n        if (!worldChannelMap[worldid]) {\n            worldChannelMap[worldid] = channelManager.getWorldChannel(worldid);\n        }\n        return worldChannelMap[worldid];\n    }\n\n    const am = new F.manager.AuthManager();\n    const handlerOptions = {\n        serviceOptions: {\n            getRun: getRun,\n            getWorld: getWorld,\n            getSession: ()=> am.getCurrentUserSessionInfo(),\n            getChannel: getChannelForWorld,\n        },\n        channelOptions: opts.channelOptions\n    };\n    \n    const usersRouteHandler = new WorldUsersRouteHandler(handlerOptions, withPrefix(notifier, MULTI_USER_PREFIX));\n    const usersHandler = $.extend(usersRouteHandler, { \n        match: matchPrefix(MULTI_USER_PREFIX),\n        name: 'world users',\n    });\n    handlers.unshift(usersHandler);\n    \n    const currentUserRouteHandler = new WorldCurrentUserRouteHandler(handlerOptions, withPrefix(notifier, USER_PREFIX));\n    const currentUserHandler = $.extend(currentUserRouteHandler, {\n        match: matchPrefix(USER_PREFIX),\n        name: 'world current user',\n    });\n    handlers.unshift(currentUserHandler);\n\n    const ConsensusManager = window.F.manager.ConsensusManager;\n    if (ConsensusManager) { //epijs < 2.80 did not have this\n        const consensusRouteHandler = new ConsensusRouteHandler(handlerOptions, withPrefix(notifier, CONSENSUS_PREFIX));\n        const consensusHandler = $.extend(consensusRouteHandler, {\n            match: matchPrefix(CONSENSUS_PREFIX),\n            name: 'consensus',\n        });\n        handlers.unshift(consensusHandler);\n    }\n\n    const worldRouteHandler = router(handlers);\n    worldRouteHandler.expose = { runManager: rm };\n\n    return worldRouteHandler;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/index.js","const F = window.F;\n\nexport default function WorldUsersRouteHandler(config, notifier) {\n    const options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {},\n    }, config);\n\n    const { getWorld, getSession, getChannel } = options.serviceOptions;\n\n    const store = {\n        users: [],\n        mark: (userid, isOnline)=> {\n            store.users = store.users.map((u)=> {\n                if (u.userId === userid) {\n                    u.isOnline = isOnline;\n                }\n                return u;\n            });\n            return store.users;\n        }\n    };\n    \n    const parsedUsersPromise = getWorld().then((world)=> {\n        const session = getSession();\n        const parsed = world.users.map((u)=> {\n            u.name = u.lastName;\n            u.isMe = u.userId === session.userId;\n            u.isOnline = u.isMe; //Assume i'm the only online one by default\n            return u;\n        });\n        store.users = parsed;\n        return parsed;\n    });\n    \n    let presenceSubsId;\n    return { \n        unsubscribeHandler: function (knownTopics, remainingTopics) {\n            if (remainingTopics.length || !presenceSubsId) {\n                return;\n            }\n            getWorld().then((world)=> {\n                const worldChannel = getChannel(world.id);\n                worldChannel.unsubscribe(presenceSubsId);\n                presenceSubsId = null;\n            });\n\n        },\n        subscribeHandler: function (userids) {\n            if (!presenceSubsId) {\n                //TODO: Also listen to roles channel to update users\n                getWorld().then((world)=> {\n                    const worldChannel = getChannel(world.id);\n                    presenceSubsId = worldChannel.subscribe(worldChannel.TOPICS.PRESENCE, (user, meta)=> {\n                        const userid = user.id;\n                        store.mark(userid, user.isOnline);\n                        return notifier([{ name: '', value: store.users }]);\n                    }, { includeMine: false });\n                });\n            }\n            return parsedUsersPromise.then((users)=> {\n                return [{ name: '', value: users }];\n            });\n        },\n        publishHandler: function (topics, options) {\n            const ps = new F.service.Presence();\n            topics.forEach((topic)=> {\n                const split = topic.name.split(':');\n                if (split[1]) {\n                    if (split[1] === 'markOnline') {\n                        ps.markOnline(split[0]);\n                    } else if (split[1] === 'markOffline') {\n                        ps.markOffline(split[0]);\n                    }\n                }\n            });\n            return topics;\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/world-users-route-handler/index.js","export default function WorldCurrentUserRouteHandler(config, notifier) {\n    const options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {},\n    }, config);\n\n    const { getWorld, getSession, getChannel } = options.serviceOptions;\n\n    \n    let subsid;\n\n    const store = $.extend(true, {\n        isMe: true,\n        isOnline: true,\n    }, getSession());\n\n    return { \n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            const stillNeedRoles = remainingTopics.indexOf('role') !== -1;\n            if (!stillNeedRoles && subsid) {\n                getWorld().then((world)=> {\n                    const worldChannel = getChannel(world.id);\n                    worldChannel.unsubscribe(subsid);\n                });\n                subsid = null;\n            }\n        },\n        subscribeHandler: function (userFields) {\n            return getWorld().then((world)=> {\n                const session = getSession();\n                const myUser = world.users.find((user)=> {\n                    return user.userId === session.userId;\n                });\n                $.extend(store, myUser);\n                \n                const toNotify = userFields.reduce((accum, field)=> {\n                    if (field === '') { //the entire user object\n                        accum.push({ name: field, value: store });\n                    } else if (store[field] !== undefined) {\n                        accum.push({ name: field, value: store[field] });\n                    }\n                    return accum;\n                }, []);\n                \n                const isSubscribingToRole = userFields.indexOf('role') !== -1;\n                if (isSubscribingToRole && !subsid) {\n                    const worldChannel = getChannel(world.id);\n                    subsid = worldChannel.subscribe(worldChannel.TOPICS.ROLES, (users, meta)=> {\n                        const myUser = users.find((u)=> {\n                            return u.userId === session.userId;\n                        });\n                        if (myUser && myUser.role !== store.role) {\n                            store.role = myUser.role;\n                            notifier([{ name: 'role', value: myUser.role }]);\n                        }\n                    });\n                }\n                return toNotify;\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/world-current-user-route-handler/index.js","import OperationsHandler from './consensus-operations-handler';\nimport StatusHandler from './consensus-status-handler';\nimport router from 'channels/channel-router';\nimport { matchPrefix } from 'channels/route-handlers/route-matchers';\nimport { withPrefix } from 'channels/channel-router/utils';\n\nconst ConsensusManager = window.F.manager.ConsensusManager;\n\nconst OPERATIONS_PREFIX = 'operations:';\n\nexport default function ConsensusRouteHandler(config, notifier) {\n    const options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {},\n    }, config);\n\n    const { getWorld, getRun, getSession, getChannel } = options.serviceOptions;\n\n    const cm = new ConsensusManager();\n\n    let consensusProm = null;\n    function getConsensus(force) {\n        if (!consensusProm || force) {\n            consensusProm = getRun().then(()=> {\n                return cm.getCurrent(); //TODO: GetRun deletes the barrier if it overlaps with this call, so synchronize them\n            });\n        }\n        return consensusProm;\n    }\n\n    const handlerOptions = {\n        serviceOptions: {\n            getConsensus: getConsensus,\n            getSession: getSession\n        },\n        channelOptions: {}\n    };\n\n    const opnHandler = OperationsHandler(handlerOptions, withPrefix(notifier, OPERATIONS_PREFIX));\n    const statusHandler = StatusHandler(handlerOptions, notifier);\n\n    const handlers = [\n        $.extend({}, opnHandler, { \n            name: 'consensus operations',\n            match: matchPrefix(OPERATIONS_PREFIX),\n            options: handlerOptions.channelOptions.operations,\n        }),\n        $.extend({}, statusHandler, { \n            name: 'consensus status',\n            match: matchPrefix(''),\n            isDefault: true,\n            options: handlerOptions.channelOptions.status,\n        }),\n    ];\n\n    getWorld().then((world)=> {\n        const channel = getChannel(world.id);\n        channel.subscribe(channel.TOPICS.RUN_RESET, ()=> {\n            getConsensus(true).then((consensus)=> {\n                statusHandler.notify(consensus);\n            });\n        });\n        // FIXME: Filter by stage here\n        channel.subscribe(channel.TOPICS.CONSENSUS_UPDATE, (consensus)=> {\n            const isComplete = consensus.closed;\n            if (isComplete) {\n                getConsensus(true).then((consensus)=> {\n                    statusHandler.notify(consensus);\n                });\n            } else {\n                statusHandler.notify(consensus);\n            }\n        });\n    });\n\n    var consensusRouteHandler = router(handlers, notifier);\n    consensusRouteHandler.expose = { consensusManager: cm };\n    \n    return consensusRouteHandler;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/index.js","import { makeConsensusService } from './consensus-utils';\n\nexport default function ConsensusOperationsHandler(config, notifier) {\n    const options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {},\n    }, config);\n\n    const { getConsensus } = options.serviceOptions;\n\n    return {\n        subscribeHandler: function () {\n            return [];\n        },\n        publishHandler: function (topics, options) {\n            return getConsensus().then((consensus)=> {\n                const actions = topics.map(function (topic) {\n                    return { name: topic.name, arguments: topic.value };\n                });\n                const cs = makeConsensusService(consensus);\n                return cs.submitActions(actions).then(()=> {\n                    return topics;\n                });\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-operations-handler.js","import { makeConsensusService } from './consensus-utils';\nimport { objectToPublishable } from 'channels/channel-utils';\nimport { pick } from 'lodash';\n\nexport default function ConsensusStatusHandler(config, notifier) {\n    const options = $.extend(true, {\n        serviceOptions: {},\n        channelOptions: {},\n    }, config);\n\n    const { getConsensus, getSession } = options.serviceOptions;\n\n    function normalizePlayers(rolePlayerMap) {\n        const session = getSession();\n        const normalized = Object.keys(rolePlayerMap).reduce((accum, role)=> {\n            const playersForRole = rolePlayerMap[role];\n            const playersWithRole = playersForRole.map((p)=> {\n                const player = p.user || p; //submitted puts user under an extra object because of course\n                return Object.assign({}, player, {\n                    role: role,\n                    userName: player.userName.split('/')[0], //API adds user/project because of course\n                    name: player.lastName,\n                    isMe: player.userName === session.userName, // so you can do :submitted:users | reject('isMe')\n                });\n            });\n            accum = accum.concat(playersWithRole);\n            return accum;\n        }, []);\n        return normalized;\n    }\n    function normalizeConsensus(consensus) {\n        const session = getSession();\n        const submitted = normalizePlayers(consensus.submitted);\n        const amWaiting = submitted.find((u)=> u.userName === session.userName);\n        const normalized = $.extend(true, {}, consensus, {\n            amWaiting: !!amWaiting,\n            submitted: submitted,\n            pending: normalizePlayers(consensus.pending),\n        });\n        return normalized;\n    }\n\n    return {\n        notify: function (consensus) {\n            const normalizedConsensus = normalizeConsensus(consensus);\n            notifier(objectToPublishable(normalizedConsensus));\n        },\n        subscribeHandler: function (topics) {\n            return getConsensus().then((consensus)=> {\n                const normalized = normalizeConsensus(consensus);\n                const dataForTopics = pick(normalized, topics);\n                return objectToPublishable(dataForTopics);\n            });\n        },\n        publishHandler: function (topics) {\n            return getConsensus().then((consensus)=> {\n                if (topics.length > 1 || topics[0].name !== 'close') {\n                    throw new TypeError('Can only publish `close` on consensus:status');\n                }\n                const cs = makeConsensusService(consensus);\n                return cs.forceClose().then(()=> topics);\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/world-route-handler/consensus-route-handler/consensus-status-handler.js","import { debounceAndMerge } from 'utils/general';\nvar { F } = window;\n\nexport default function MultiRunRouteHandler(options, notifier, channelManagerContext) {\n    var runService = new F.service.Run(options.serviceOptions.run);\n\n    var topicParamMap = {};\n\n    function extractFiltersFromTopic(topicString) {\n        var filters = topicString.replace('(', '').replace(')', '');\n        var filterParam = filters.split(';').reduce((accum, filter)=> {\n            var [key, val] = filter.split('=');\n            if (val) {\n                val = true;\n            }\n            accum[key] = val;\n            return accum;\n        }, {});\n        return filterParam;\n    }\n\n    function fetch(topic, variables) {\n        var filters = extractFiltersFromTopic(topic);\n        return runService.query(filters, { include: variables }).then((runs)=> {\n            notifier([{ name: topic, value: runs }]);\n\n            // if (topicParamMap[topic]) {\n            //     Object.keys(topicParamMap[topic]).forEach((runid)=> {\n            //         channelManagerContext.unsubscribe(topicParamMap[topic][runid]);\n            //     });\n            // }\n\n            return runs;\n        });\n    }\n\n    return {\n        fetch: fetch,\n\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            // knownTopics = remainingTopics;\n        },\n        subscribeHandler: function (topics, options) {\n            var topic = ([].concat(topics))[0];\n\n            var filters = extractFiltersFromTopic(topic);\n            var variables = options && options.include;\n\n            var debounceInterval = 300;\n            var debouncedFetch = debounceAndMerge(fetch, debounceInterval, [(accum, newval)=> newval]);\n            return fetch(topic, variables).then(function (runs) {\n                var subsMap = {};\n                //TODO: Provide this meta information to runs-factory so it doesn't trigger a fetch to get meta for each run\n                runs.forEach((run)=> {\n                    var subscriptions = Object.keys(filters).map((filter)=> run.id + ':meta:' + filter);\n                    var subsid = channelManagerContext.subscribe(subscriptions, function () {\n                        debouncedFetch(topic, variables);\n                    }, { batch: false, autoFetch: false, cache: false });\n                    subsMap[run.id] = subsid;\n                });\n\n                topicParamMap[topic] = subsMap;\n                return runs;\n            });\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/epicenter-route-handlers/multi-run-route-handler/index.js","import { toImplicitType } from 'utils/parse-utils';\nimport _ from 'lodash';\n\nexport function match(topic) {\n    return (topic.indexOf('#') === 0) ? '' : false;\n} \n\n\nexport default function DOMRouteHandler(options, notifier) {\n    \n    const knownEls = new WeakMap();\n    const domOptions = $.extend(true, {\n        uiChangeEvents: {\n\n        },\n        debounceInterval: 200\n    }, options.defaults, options.dom);\n\n    function changeHandler($el, id, evt) {\n        const val = toImplicitType($el.val());\n        notifier([{ name: id, value: val }]);\n    }\n    const debouncedChangeHandler = _.debounce(changeHandler, domOptions.debounceInterval);\n    return {\n        match: match,\n        name: 'DOM Route',\n        subscribeHandler: function (topics) {\n            const parsed = topics.map((elID)=> {\n                const $el = $(elID);\n                if (!knownEls.has($el)) {\n                    knownEls.set($el, true);\n                    const overrides = domOptions.uiChangeEvents || {};\n                    const matchingEventOverride = Object.keys(overrides).find((selector)=> {\n                        return $el.is(selector);\n                    });\n                    const changeEvent = matchingEventOverride ? overrides[matchingEventOverride] : 'change';\n                    const handler = changeEvent.indexOf('key') !== -1 ? debouncedChangeHandler : changeHandler;\n                    $el.on(`${changeEvent}.dom-handler`, handler.bind(this, $el, elID));\n                }\n\n                const val = toImplicitType($el.val());\n                return {\n                    name: elID,\n                    value: val\n                };\n            });\n            return parsed;\n        },\n        unsubscribeHandler: function (unsubscribedTopics, remainingTopics) {\n            const toKill = unsubscribedTopics.filter((t)=> {\n                const isRemaining = remainingTopics.indexOf(t) !== -1;\n                return !isRemaining;\n            });\n            toKill.forEach((elID)=> {\n                const $el = $(elID);\n\n                $el.off('change.dom-handler');\n                knownEls.delete($el);\n            });\n        },\n        /**\n         * \n         * @param {Publishable[]} publishable \n         */\n        publishHandler: function (publishable) {\n            publishable.forEach((p)=> {\n                $(p.name).val(p.value);\n            });\n            return publishable;\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/route-handlers/dom-route-handler/index.js","import subscribeInterpolator from './subscribe-interpolator';\nimport publishInterpolator from './publish-interpolator';\n\n/**\n * Decorates passed channel manager with interpolation functionality\n * @param  {ChannelManager} ChannelManager\n * @returns {ChannelManager}                wrapped channel manager\n */\nexport default function interpolatable(ChannelManager) {\n    var subsidMap = {};\n\n    /**\n     * @implements {ChannelManager}\n     */\n    return class InterpolatedChannelManager extends ChannelManager {\n        constructor(options) {\n            super(options);\n            //FIXME: Add on-error (from routable) here?\n            this.subscribe = subscribeInterpolator(this.subscribe.bind(this), (dependencySubsId, newDependentId)=> {\n                var existing = subsidMap[dependencySubsId];\n                if (existing) {\n                    this.unsubscribe(existing);\n                }\n                subsidMap[dependencySubsId] = newDependentId;\n            });\n\n            this.publish = publishInterpolator(this.publish.bind(this), (variables, cb)=> {\n                super.subscribe(variables, (response, meta)=> {\n                    this.unsubscribe(meta.id);\n                    cb(response);\n                }, { autoFetch: true, batch: true, onError: (e)=> {\n                    throw e;\n                } });\n            });\n        }\n        unsubscribe(token) {\n            var existing = subsidMap[token];\n            if (existing) {\n                super.unsubscribe(existing);\n            }\n            super.unsubscribe(token);\n            delete subsidMap[token];\n        }\n        unsubscribeAll() {\n            subsidMap = {};\n            super.unsubscribeAll();\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager-enhancements/interpolatable/index.js","import { extractDependencies, interpolateWithValues } from './interpolatable-utils';\nimport { uniq, isEqual } from 'lodash';\n\n/**\n * @param {string[]} topics\n * @returns {string[]} interpolated\n */\nexport function getDependencies(topics) {\n    var deps = topics.reduce((accum, topic)=> {\n        var inner = extractDependencies(topic);\n        accum = accum.concat(inner);\n        return accum;\n    }, []);\n    return uniq(deps);\n}\n\n/**\n * @param {string[]} topics\n * @param {Object} data\n * @returns {string[]}\n */\nexport function interpolateWithDependencies(topics, data) {\n    return topics.map((topic)=> {\n        return interpolateWithValues(topic, data);\n    });\n}\n\n/**\n * @param  {string[]} originalTopics     \n * @param  {string[]} interpolatedTopics \n * @param  {Object} data               \n * @returns {Object}                    Interpolated\n */\nexport function mergeInterpolatedTopicsWithData(originalTopics, interpolatedTopics, data) {\n    return interpolatedTopics.reduce((accum, interpolatedTopic, index)=> {\n        var original = originalTopics[index];\n        var val = data[interpolatedTopic];\n        if (val !== undefined) {\n            accum[original] = data[interpolatedTopic];\n        }\n        return accum;\n    }, {});\n}\n\n/**\n * Takes a subscribe function and resolves any interpolated inputs\n * @param  {Function} subscribeFn        function to wrap\n * @param  {Function} onDependencyChange callback function when any dependencies change\n * @returns {Function}                    wrapped function\n */\nexport default function subscribeInterpolator(subscribeFn, onDependencyChange) {\n    return function interpolatedSubscribe(topics, cb, options) {\n        topics = [].concat(topics);\n        var dependencies = getDependencies(topics);\n        if (!dependencies.length) {\n            return subscribeFn(topics, cb, options);\n        }\n        var innerSubsId = subscribeFn(dependencies, function handleDependencyValueChange(data, dependenciesMeta) {\n            const isSameData = isEqual(data, dependenciesMeta.previousData);\n            if (isSameData) return;\n\n            var interpolatedTopics = interpolateWithDependencies(topics, data);\n            var outerSubsId = subscribeFn(interpolatedTopics, function handleInterpolatedValueChange(actualData, actualMeta) {\n                var toSendback = mergeInterpolatedTopicsWithData(topics, interpolatedTopics, actualData);\n\n                cb(toSendback, actualMeta);\n            }, options);\n\n            (onDependencyChange || $.noop)(dependenciesMeta.id, outerSubsId);\n            return outerSubsId;\n        }, $.extend(options, { autoFetch: true, batch: true }));\n\n        return innerSubsId;\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager-enhancements/interpolatable/subscribe-interpolator.js","import { extractDependencies, interpolateWithValues } from './interpolatable-utils';\nimport { normalizeParamOptions } from 'channels/channel-utils';\n\nimport { uniq } from 'lodash';\n\n/**\n * @param {Publishable[]} publishInputs\n * @returns {string[]} dependencies for inputs\n */\nexport function getDependencies(publishInputs) {\n    var deps = publishInputs.reduce((accum, input)=> {\n        var inner = extractDependencies(input.name);\n        accum = accum.concat(inner);\n        return accum;\n    }, []);\n    return uniq(deps);\n}\n\n/**\n * @param {Publishable[]} publishInputs\n * @param {{string: any}} valuesToInterpolate\n * @returns {Publishable[]} inputs with resolved dependencies\n */\nexport function interpolateWithDependencies(publishInputs, valuesToInterpolate) {\n    return publishInputs.map((ip)=> {\n        return {\n            name: interpolateWithValues(ip.name, valuesToInterpolate),\n            value: ip.value,\n        };\n    });\n}\n\n/**\n * Publish function to wrap\n * @param  {Function} publishFunction\n * @param  {function(string[], function({string: any}):void):void} fetchFn         function to get interpolated values from\n * @returns {Function}                 wrapped function\n */\nexport default function publishInterpolator(publishFunction, fetchFn) {\n    return function interpolatedPublishfunction(topic, value, options) {\n        var normalizedPublishInputs = normalizeParamOptions(topic, value, options);\n        var dependencies = getDependencies(normalizedPublishInputs.params);\n        if (!dependencies.length) {\n            return publishFunction(topic, value, options);\n        }\n        \n        var prom = $.Deferred();\n        fetchFn(dependencies, function handleDependencyChange(resolvedDependencies) {\n            var interpolated = interpolateWithDependencies(normalizedPublishInputs.params, resolvedDependencies);\n            var newPublishProm = publishFunction(interpolated, normalizedPublishInputs.options);\n            newPublishProm.then(prom.resolve, prom.reject);\n        });\n        return prom.promise();\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager-enhancements/interpolatable/publish-interpolator.js","import { normalizeParamOptions } from '../../channel-utils';\nimport { omit, difference, uniq } from 'lodash';\n\nfunction getTopicsFromSubsList(subcriptionList) {\n    const allTopics = subcriptionList.reduce(function (accum, subs) {\n        accum = accum.concat(subs.topics);\n        return accum;\n    }, []);\n    return uniq(allTopics);\n}\n\n/**\n * Decorates passed channel manager with middleware functionality\n * @param  {ChannelManager} BaseChannelManager\n * @param  {Object} router\n * @returns {ChannelManager} wrapped channel manager\n */\nexport default function withRouter(BaseChannelManager, router) {\n    /**\n     * @augments ChannelManager\n     */\n    return class ChannelWithRouter extends BaseChannelManager {\n        constructor(options) {\n            super(options);\n            const defaults = {\n                routes: []\n            };\n            const opts = $.extend(true, {}, defaults, options);\n            const optsToPassOn = omit(opts, Object.keys(defaults));\n\n            const rt = router(opts.routes, optsToPassOn, this.notify.bind(this));\n            Object.assign(this, rt.expose || {});\n            this.router = rt;\n        }\n\n        /**\n         * Allow intercepting and excluding topics from by subsequent middlewares\n         * @param  {string | string[]}   topics\n         * @param  {Function} cb\n         * @param  {Object}   options\n         * @returns {string}           subscription id\n         */\n        subscribe(topics, cb, options) {\n            const subsid = super.subscribe(topics, cb, options);\n            this.router.subscribeHandler([].concat(topics), options).then((topicsWithData)=> {\n                if (topicsWithData && topicsWithData.length) {\n                    this.notify([].concat(topicsWithData));\n                }\n            }, (err)=> {\n                this.unsubscribe(subsid);\n                if (options && options.onError) {\n                    options.onError(err);\n                }\n            });\n            return subsid;\n        }\n\n        /**\n         * Allow intercepting and handling/suppressing data to publish calls.\n         * @param {string | Publishable } topic\n         * @param {any} [value] item to publish\n         * @param {Object} [options]\n         * @returns {Promise}\n         */\n        publish(topic, value, options) {\n            const publishData = normalizeParamOptions(topic, value, options);\n            return this.router.publishHandler(publishData.params, publishData.options).then((published)=> {\n                return super.publish(published, publishData.options);\n            });\n        }\n        \n\n        /**\n         * Calls unsubscribe middleware *after* unsubscription with a list of recently unsubscribed topics\n         * @param  {string} token\n         * @returns {void}\n         */\n        unsubscribe(token) {\n            const originalTopics = getTopicsFromSubsList(this.subscriptions);\n            super.unsubscribe(token);\n            const remainingTopics = getTopicsFromSubsList(this.subscriptions);\n            const unsubscribedTopics = difference(originalTopics, remainingTopics);\n\n            this.router.unsubscribeHandler(unsubscribedTopics, remainingTopics);\n        }\n\n        /**\n         * Calls unsubscribe middleware after unsubscribeAll on the channel\n         * @returns {void}\n         */\n        unsubscribeAll() {\n            const originalTopics = getTopicsFromSubsList(this.subscriptions);\n            super.unsubscribeAll();\n\n            return this.router.unsubscribeHandler(originalTopics, []);\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/channels/channel-manager-enhancements/routable/index.js"],"sourceRoot":""}