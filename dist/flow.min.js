/*!
 * 
 * ++++++++   ++++++++   ++++++++         Flow.js
 * ++++++++   ,+++++++~   ++++++++        v0.11.0
 *  ++++++++   ++++++++   ++++++++
 *  ~+++++++~   ++++++++   ++++++++       Github: https://github.com/forio/flow.js
 *   ++++++++   ++++++++   ++++++++:
 *    :++++++++   ++++++++   ++++++++
 *      ++++++++   =+++++++   ,+++++++=
 *       ++++++++   ++++++++   ++++++++
 *       =+++++++    +++++++=   ++++++++
 *        ++++++++   ++++++++   ++++++++
 *        ,+++++++:   +++++++~   ++++++++
 *         +++++++=   +++++++=   ++++++++
 *        ++++++++   ++++++++   ++++++++
 *        ++++++++   ++++++++   ++++++++
 *        ++++++++   =+++++++   :+++++++,
 *         ++++++++   ++++++++   ++++++++
 *         ++++++++   ~+++++++    +++++++=
 *          ++++++++   ++++++++   ++++++++
 * 
 */
var Flow=function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=11)}([function(module,exports,__webpack_require__){"use strict";module.exports={prefix:"f",defaultAttr:"bind",binderAttr:"f-bind",events:{trigger:"update.f.ui",channelDataReceived:"update.f.model",convert:"f.convert",operate:"f.ui.operate"},attrs:{bindingsList:"f-attr-bindings",subscriptionId:"f-subscription-id",classesAdded:"f-added-classes",repeat:{template:"repeat-template",templateId:"repeat-template-id"},foreachTemplate:"f-foreach-template",keyAs:"f-foreach-key-as",valueAs:"f-foreach-value-as",bindTemplate:"f-bind-template"}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function findBestHandler(topic,handlers){for(var i=0;i<handlers.length;i++){var thishandler=handlers[i];var match=thishandler.match(topic);if(!1!==match)return $.extend(!0,{},thishandler,{matched:match})}}function objectToArray(obj){return Object.keys(obj||{}).map(function(t){return{name:t,value:obj[t]}})}function arrayToObject(arr){return(arr||[]).reduce(function(accum,topic){return accum[topic.name]=topic.value,accum},{})}function normalizeParamOptions(topic,publishValue,options){return topic?$.isPlainObject(topic)?{params:objectToArray(topic),options:publishValue}:$.isArray(topic)?{params:topic,options:publishValue}:{params:[{name:topic,value:publishValue}],options:options}:{params:[],options:{}}}function groupByHandlers(topics,handlers){handlers=handlers.map(function(h,index){return h.key=index,h});var topicMapping=[].concat(topics).reduce(function(accum,topic){var bestHandler=findBestHandler(topic,handlers);if(bestHandler){var key=bestHandler.key+bestHandler.matched;accum[key]||(bestHandler.data=[],accum[key]=bestHandler),accum[key].data.push(topic)}return accum},{});return _.values(topicMapping)}function groupSequentiallyByHandlers(data,handlers){return handlers=handlers.map(function(h,index){return h.key=index,h}),data.reduce(function(accum,dataPt){var lastHandler=accum[accum.length-1];var bestHandler=findBestHandler(dataPt.name,handlers);return bestHandler?lastHandler&&bestHandler.key===lastHandler.key?lastHandler.data.push(dataPt):accum.push($.extend({},bestHandler,{data:[dataPt]})):accum.push({data:[dataPt],matched:!1}),accum},[])}__webpack_exports__.e=objectToArray,__webpack_exports__.a=arrayToObject,__webpack_exports__.d=normalizeParamOptions,__webpack_exports__.b=groupByHandlers,__webpack_exports__.c=groupSequentiallyByHandlers},function(module,__webpack_exports__,__webpack_require__){"use strict";function stripSuffixDelimiter(text){return text&&text.indexOf(CHANNEL_DELIMITER)===text.length-1&&(text=text.replace(CHANNEL_DELIMITER,"")),text}function prefix(prefix){return function(topic){return 0===topic.indexOf(prefix)&&prefix}}function defaultPrefix(prefix){return function(topic){return prefix}}function regex(regex){var toMatch=new RegExp("^"+regex+CHANNEL_DELIMITER);return function(topic){var match=topic.match(toMatch);return!(!match||!match.length)&&match[0]}}function mapWithPrefix(dataArray,prefix){return prefix?(dataArray||[]).map(function(datapt){return $.extend(!0,{},datapt,{name:prefix+datapt.name})}):dataArray}function withPrefix(callback,prefixList){return prefixList=[].concat(prefixList),function(data){prefixList.forEach(function(prefix){var mapped=mapWithPrefix(data,prefix);callback(mapped)})}}function unprefix(list,prefix){return prefix?list.map(function(item){return item.name?$.extend(!0,{},item,{name:item.name.replace(prefix,"")}):item.replace(prefix,"")}):list}__webpack_exports__.g=stripSuffixDelimiter,__webpack_exports__.d=prefix,__webpack_exports__.a=defaultPrefix,__webpack_exports__.e=regex,__webpack_exports__.c=mapWithPrefix,__webpack_exports__.i=withPrefix,__webpack_exports__.h=unprefix;var __WEBPACK_IMPORTED_MODULE_0__silencable__=__webpack_require__(42);__webpack_require__.d(__webpack_exports__,"f",function(){return __WEBPACK_IMPORTED_MODULE_0__silencable__.a});var __WEBPACK_IMPORTED_MODULE_1__exclude_read_only__=__webpack_require__(43);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_1__exclude_read_only__.a});var CHANNEL_DELIMITER=":"},function(module,__webpack_exports__,__webpack_require__){"use strict";function toImplicitType(data){var objRegex=/^(?:\{.*\})$/;var arrRegex=/^(?:\[.*])$/;var converted=data;if("string"==typeof data)if("true"===(converted=data.trim()))converted=!0;else if("false"===converted)converted=!1;else if("null"===converted)converted=null;else if("undefined"===converted)converted="";else if("'"===converted.charAt(0)||'"'===converted.charAt(0))converted=converted.substring(1,converted.length-1);else if($.isNumeric(converted))converted=+converted;else{if(arrRegex.test(converted)){var bracketReplaced=converted.replace(/[[\]]/g,"");if(!bracketReplaced)return[];var parsed=bracketReplaced.split(/,(?![^[]*])/).map(function(val){return toImplicitType(val)});return parsed}if(objRegex.test(converted))try{converted=JSON.parse(converted)}catch(e){console.error("toImplicitType: couldn't convert",converted)}}return converted}function toOperationFormat(value){return(value||"").split("|").map(function(value){value=value.trim();var fnName=value.split("(")[0];var params=value.substring(value.indexOf("(")+1,value.indexOf(")"));return{name:fnName,value:""!==params.trim()?params.split(","):[]}})}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_require__.d(__webpack_exports__,"toImplicitType",function(){return toImplicitType}),__webpack_require__.d(__webpack_exports__,"toOperationFormat",function(){return toOperationFormat})},function(module,__webpack_exports__,__webpack_require__){"use strict";function notifySubscribeHandlers(handlers,topics,options){return Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.b)(topics,handlers).forEach(function(handler){if(handler.subscribeHandler){var mergedOptions=$.extend(!0,{},handler.options,options);var unprefixed=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.h)(handler.data,handler.matched);handler.subscribeHandler(unprefixed,mergedOptions,handler.matched)}}),topics}function notifyUnsubscribeHandlers(handlers,recentlyUnsubscribedTopics,remainingTopics){handlers=handlers.map(function(h,index){return h.unsubsKey=index,h});var unsubsGrouped=Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.b)(recentlyUnsubscribedTopics,handlers);var remainingGrouped=Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.b)(remainingTopics,handlers);unsubsGrouped.forEach(function(handler){if(handler.unsubscribeHandler){var unprefixedUnsubs=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.h)(handler.data,handler.matched);var matchingRemainingHandler=_.find(remainingGrouped,function(remainingHandler){return remainingHandler.unsubsKey===handler.unsubsKey});var matchingTopicsRemaining=matchingRemainingHandler?matchingRemainingHandler.data:[];var unprefixedRemaining=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.h)(matchingTopicsRemaining||[],handler.matched);handler.unsubscribeHandler(unprefixedUnsubs,unprefixedRemaining)}})}function passthroughPublishInterceptors(handlers,publishData,options){var grouped=Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.c)(publishData,handlers);var $initialProm=$.Deferred().resolve([]).promise();return grouped.forEach(function(handler){$initialProm=$initialProm.then(function(dataSoFar){var mergedOptions=$.extend(!0,{},handler.options,options);var unprefixed=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.h)(handler.data,handler.matched);var publishableData=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.b)(unprefixed,mergedOptions.readOnly);if(!publishableData.length)return dataSoFar;var result=handler.publishHandler?handler.publishHandler(publishableData,mergedOptions,handler.matched):publishableData;return $.Deferred().resolve(result).promise().then(function(published){return Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.f)(published,mergedOptions.silent)}).then(function(published){var mapped=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.c)(published,handler.matched);return handler.isDefault&&handler.matched&&(mapped=mapped.concat(published)),mapped}).then(function(mapped){return[].concat(dataSoFar,mapped)})})}),$initialProm}function Router(handlers){return $.extend(this,{subscribeHandler:function(topics,options){return notifySubscribeHandlers(handlers,topics,options)},unsubscribeHandler:function(recentlyUnsubscribedTopics,remainingTopics){return notifyUnsubscribeHandlers(handlers,recentlyUnsubscribedTopics,remainingTopics)},publishHandler:function(data,options){return passthroughPublishInterceptors(handlers,data,options)}})}__webpack_exports__.a=Router;var __WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__=__webpack_require__(2)},function(module,exports,__webpack_require__){"use strict";module.exports={random:function(prefix,min,max){min||(min=parseInt(_.uniqueId(),10)),max||(max=1e5);var number=_.random(min,max,!1)+"";return prefix&&(number=prefix+number),number},debounceAndMerge:function(fn,debounceInterval,argumentsReducers){var timer=null;var argsToPass=[];if(!argumentsReducers){argumentsReducers=[function(accum,newVal){return accum||(accum=[]),accum.concat(newVal)}]}return function(){var $def=$.Deferred();var newArgs=_.toArray(arguments);return argsToPass=newArgs.map(function(arg,index){var reducer=argumentsReducers[index];return reducer?reducer(argsToPass[index],arg):arg}),timer&&clearTimeout(timer),timer=setTimeout(function(){timer=null;var res=fn.apply(fn,argsToPass);if(res&&res.then)return res.then(function(arg){argsToPass=[],$def.resolve(arg)});argsToPass=[],$def.resolve(res)},debounceInterval),$def.promise()}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";function RunRouter(config,notifier){var defaults={serviceOptions:{},channelOptions:{variables:{autoFetch:!0,debounce:200,silent:!1,readOnly:!1},operations:{readOnly:!1,silent:!1},meta:{silent:!1,autoFetch:!0,readOnly:["id","created","account","project","model","lastModified"]}}};var opts=$.extend(!0,{},defaults,config);var serviceOptions=_.result(opts,"serviceOptions");var $initialProm=null;if(serviceOptions instanceof window.F.service.Run)$initialProm=$.Deferred().resolve(serviceOptions).promise();else if(serviceOptions.then)$initialProm=serviceOptions;else{var rs=new window.F.service.Run(serviceOptions);$initialProm=$.Deferred().resolve(rs).promise()}var metaChannel=new __WEBPACK_IMPORTED_MODULE_0__run_meta_channel__.a($initialProm,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,"meta:"));var operationsChannel=new __WEBPACK_IMPORTED_MODULE_2__run_operations_channel__.a($initialProm,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,"operations:"));var variableschannel=new __WEBPACK_IMPORTED_MODULE_1__run_variables_channel__.a($initialProm,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,["variables:",""]));var handlers=[$.extend({},metaChannel,{name:"meta",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.d)("meta:"),options:opts.channelOptions.meta}),$.extend({},operationsChannel,{name:"operations",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.d)("operations:"),options:opts.channelOptions.operations}),$.extend({},variableschannel,{isDefault:!0,name:"variables",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.a)("variables:"),options:opts.channelOptions.variables})];var router=new __WEBPACK_IMPORTED_MODULE_3_channels_channel_router__.a(handlers,notifier);var oldhandler=router.publishHandler;return router.publishHandler=function(){return oldhandler.apply(router,arguments).then(function(result){return _.find(result,function(r){return 0===r.name.indexOf("operations:")||0===r.name.indexOf("variables:")})&&variableschannel.fetch(),result})},router}__webpack_exports__.a=RunRouter;var __WEBPACK_IMPORTED_MODULE_0__run_meta_channel__=__webpack_require__(39);var __WEBPACK_IMPORTED_MODULE_1__run_variables_channel__=__webpack_require__(40);var __WEBPACK_IMPORTED_MODULE_2__run_operations_channel__=__webpack_require__(41);var __WEBPACK_IMPORTED_MODULE_3_channels_channel_router__=__webpack_require__(4);var __WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__=__webpack_require__(2)},function(module,exports,__webpack_require__){"use strict";var config=__webpack_require__(0);var BaseView=__webpack_require__(8);module.exports=BaseView.extend({propertyHandlers:[],uiChangeEvent:"change",getUIValue:function(){return this.$el.val()},removeEvents:function(){this.$el.off(this.uiChangeEvent)},initialize:function(){var me=this;var propName=this.$el.data(config.binderAttr);propName&&this.$el.off(this.uiChangeEvent).on(this.uiChangeEvent,function(){var val=me.getUIValue();var params={};params[propName]=val,me.$el.trigger(config.events.trigger,params)}),BaseView.prototype.initialize.apply(this,arguments)}},{selector:"input, select"})},function(module,exports,__webpack_require__){"use strict";var BaseView=__webpack_require__(9);module.exports=BaseView.extend({propertyHandlers:[],initialize:function(){}},{selector:"*"})},function(module,exports,__webpack_require__){"use strict";var extend=function(protoProps,staticProps){var me=this;var child;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return me.apply(this,arguments)},_.extend(child,me,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=me.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=me.prototype,child};var View=function(options){this.$el=options.$el||$(options.el),this.el=options.el,this.initialize.apply(this,arguments)};_.extend(View.prototype,{initialize:function(){}}),View.extend=extend,module.exports=View},function(module,__webpack_exports__,__webpack_require__){"use strict";function extractDependencies(topic){return(topic.match(interpolationRegex)||[]).map(function(val){return val.substring(1,val.length-1)})}function interpolateWithValues(topic,data){return topic.replace(interpolationRegex,function(match,dependency){var val=data[dependency];return isArray(val)?val[val.length-1]:val})}__webpack_exports__.a=extractDependencies,__webpack_exports__.b=interpolateWithValues;var _ref=_,isArray=_ref.isArray;var interpolationRegex=/<(.*?)>/g},function(module,exports,__webpack_require__){"use strict";var domManager=__webpack_require__(12);var BaseView=__webpack_require__(9);var ChannelManager=__webpack_require__(35).default;var Flow={dom:domManager,utils:{BaseView:BaseView},initialize:function(config){var model=$("body").data("f-model");var defaults={channel:{defaults:{run:{model:model}}},dom:{root:"body",autoBind:!0}};var options=$.extend(!0,{},defaults,config);config&&config.channel&&config.channel instanceof ChannelManager?this.channel=config.channel:this.channel=new ChannelManager(options.channel);var prom=domManager.initialize($.extend(!0,{channel:this.channel},options.dom));return this.channel.subscribe("operations:reset",function(){domManager.unbindAll(),domManager.bindAll()}),prom}};Flow.ChannelManager=ChannelManager,Flow.version="0.11.0",module.exports=Flow},function(module,exports,__webpack_require__){"use strict";module.exports=function(){var config=__webpack_require__(0);var parseUtils=__webpack_require__(3);var domUtils=__webpack_require__(13);var converterManager=__webpack_require__(14);var nodeManager=__webpack_require__(20);var attrManager=__webpack_require__(22);var autoUpdatePlugin=__webpack_require__(34);$.expr.pseudos[config.prefix]=function(el){if(!el||!el.attributes)return!1;for(var i=0;i<el.attributes.length;i++){if(0===el.attributes[i].nodeName.indexOf("data-"+config.prefix))return!0}return!1},$.expr.pseudos.webcomponent=function(obj){return-1!==obj.nodeName.indexOf("-")};var getMatchingElements=function(root){var $root=$(root);var matchedElements=$root.find(":"+config.prefix);return $root.is(":"+config.prefix)&&(matchedElements=matchedElements.add($root)),matchedElements};var getElementOrError=function(element,context){if(element instanceof $&&(element=element.get(0)),!element||!element.nodeName)throw console.error(context,"Expected to get DOM Element, got ",element),new Error(context+": Expected to get DOM Element, got"+typeof element);return element};var publicAPI={nodes:nodeManager,attributes:attrManager,converters:converterManager,private:{matchedElements:[]},unbindElement:function(element,channel){channel||(channel=this.options.channel),element=getElementOrError(element);var $el=$(element);if(!$el.is(":"+config.prefix))return!1;this.private.matchedElements=_.without(this.private.matchedElements,element);var Handler=nodeManager.getHandler($el);var h=new Handler.handle({el:element});h.removeEvents&&h.removeEvents(),$(element.attributes).each(function(index,nodeMap){var attr=nodeMap.nodeName;if(0===attr.indexOf("data-f-")){attr=attr.replace("data-f-","");var handler=attrManager.getHandler(attr,$el);handler.unbind&&handler.unbind.call($el,attr)}});var subsid=$el.data(config.attrs.subscriptionId)||[];return _.each([].concat(subsid),function(subs){channel.unsubscribe(subs)}),_.each($el.data(),function(val,key){(0===key.indexOf("f-")||key.match(/^f[A-Z]/))&&$el.removeData(key)}),this},bindElement:function(element,channel){channel||(channel=this.options.channel),element=getElementOrError(element);var $el=$(element);if(!$el.is(":"+config.prefix))return!1;_.includes(this.private.matchedElements,element)||this.private.matchedElements.push(element),new(nodeManager.getHandler($el).handle)({el:element});var subscribe=function(subsChannel,varsToBind,$bindEl,options){if(!varsToBind||!varsToBind.length)return!1;var subsid=subsChannel.subscribe(varsToBind,function(params){$bindEl.trigger(config.events.channelDataReceived,params)},options);var newsubs=($el.data(config.attrs.subscriptionId)||[]).concat(subsid);$el.data(config.attrs.subscriptionId,newsubs)};var attrBindings=[];var nonBatchableVariables=[];var channelConfig=domUtils.getChannelConfig(element);$(element.attributes).each(function(index,nodeMap){var attr=nodeMap.nodeName;var attrVal=nodeMap.value;var channelPrefix=domUtils.getChannel($el,attr);if(0===attr.indexOf("data-f-")){attr=attr.replace("data-f-","");var handler=attrManager.getHandler(attr,$el);var isBindableAttr=!0;if(handler&&handler.init&&(isBindableAttr=handler.init.call($el,attr,attrVal)),isBindableAttr){var withConv=attrVal.split("|").map(function(v){return v.trim()});withConv.length>1&&(attrVal=withConv.shift(),$el.data("f-convert-"+attr,withConv));var binding={attr:attr};var commaRegex=/,(?![^[]*])/;if(handler&&handler.parse&&(attrVal=handler.parse.call($el,attrVal)),-1!==attrVal.indexOf("<%"));else if(attrVal.split(commaRegex).length>1){var varsToBind=attrVal.split(commaRegex).map(function(v){return v.trim()});channelPrefix&&(varsToBind=varsToBind.map(function(v){return channelPrefix+":"+v})),subscribe(channel,varsToBind,$el,$.extend({batch:!0},channelConfig)),binding.topics=varsToBind}else channelPrefix&&(attrVal=channelPrefix+":"+attrVal),binding.topics=[attrVal],nonBatchableVariables.push(attrVal);attrBindings.push(binding)}}}),$el.data(config.attrs.bindingsList,attrBindings),nonBatchableVariables.length&&subscribe(channel,nonBatchableVariables,$el,$.extend({batch:!1},channelConfig))},bindAll:function(elementsToBind){elementsToBind?_.isArray(elementsToBind)||(elementsToBind=getMatchingElements(elementsToBind)):elementsToBind=getMatchingElements(this.options.root);var me=this;$.each(elementsToBind,function(index,element){me.bindElement(element,me.options.channel)})},unbindAll:function(elementsToUnbind){var me=this;elementsToUnbind?_.isArray(elementsToUnbind)||(elementsToUnbind=getMatchingElements(elementsToUnbind)):elementsToUnbind=this.private.matchedElements,$.each(elementsToUnbind,function(index,element){me.unbindElement(element,me.options.channel)})},initialize:function(options){var defaults={root:"body",channel:null,autoBind:!0};$.extend(defaults,options);var channel=defaults.channel;this.options=defaults;var me=this;var $root=$(defaults.root);var attachChannelListener=function($root){$root.off(config.events.channelDataReceived).on(config.events.channelDataReceived,function(evt,data){var $el=$(evt.target);var bindings=$el.data(config.attrs.bindingsList);var toconvert={};$.each(data,function(variableName,value){_.each(bindings,function(binding){var channelPrefix=domUtils.getChannel($el,binding.attr);var interestedTopics=binding.topics;if(_.includes(interestedTopics,variableName)){if(binding.topics.length>1){var matching=_.pick(data,interestedTopics);value=channelPrefix?Object.keys(matching).reduce(function(accum,key){return accum[key.replace(channelPrefix+":","")]=matching[key],accum},{}):matching}toconvert[binding.attr]=value}})}),$el.trigger(config.events.convert,toconvert)})};var attachUIVariablesListener=function($root){$root.off(config.events.trigger).on(config.events.trigger,function(evt,data){var parsedData={};var $el=$(evt.target);var attrConverters=domUtils.getConvertersList($el,"bind");_.each(data,function(val,key){key=key.split("|")[0].trim(),val=converterManager.parse(val,attrConverters),parsedData[key]=parseUtils.toImplicitType(val),$el.trigger(config.events.convert,{bind:val})}),channel.publish(parsedData)})};var attachUIOperationsListener=function($root){$root.off(config.events.operate).on(config.events.operate,function(evt,data){var filtered=[].concat(data.operations||[]).reduce(function(accum,operation){var val=operation.value?[].concat(operation.value):[];return operation.value=val.map(function(val){return parseUtils.toImplicitType($.trim(val))}),converterManager.getConverter(operation.name)?accum.converters.push(operation):(-1===operation.name.indexOf(":")&&(operation.name="operations:"+operation.name),accum.operations.push(operation)),accum},{operations:[],converters:[]});(filtered.operations.length?channel.publish(filtered.operations,data.options):$.Deferred().resolve().promise()).then(function(args){_.each(filtered.converters,function(con){converterManager.convert(con.value,[con.name])})})})};var attachConversionListner=function($root){$root.off(config.events.convert).on(config.events.convert,function(evt,data){var $el=$(evt.target);var convert=function(val,prop){prop=prop.toLowerCase();var attrConverters=domUtils.getConvertersList($el,prop);var handler=attrManager.getHandler(prop,$el);var convertedValue=converterManager.convert(val,attrConverters);handler.handle.call($el,convertedValue,prop)};$.isPlainObject(data)?_.each(data,convert):convert(data,"bind")})};var promise=$.Deferred();return $(function(){me.bindAll(),attachChannelListener($root),attachUIVariablesListener($root),attachUIOperationsListener($root),attachConversionListner($root),me.options.autoBind&&autoUpdatePlugin($root.get(0),me),promise.resolve($root),$root.trigger("f.domready")}),promise}};return $.extend(this,publicAPI)}()},function(module,exports,__webpack_require__){"use strict";module.exports={match:function(matchExpr,matchValue,context){return _.isString(matchExpr)?"*"===matchExpr||matchExpr.toLowerCase()===matchValue.toLowerCase():_.isFunction(matchExpr)?matchExpr(matchValue,context):_.isRegExp(matchExpr)?matchValue.match(matchExpr):void 0},getChannel:function($el,property){property=property.replace("data-f-","");var channel=$el.data("f-channel-"+property);if(void 0===channel&&void 0===(channel=$el.attr("data-f-channel"))){var $parentEl=$el.closest("[data-f-channel]");$parentEl&&(channel=$parentEl.attr("data-f-channel"))}return channel},getChannelConfig:function(el){var attrs=el.attributes;var config={};for(var i=0;i<attrs.length;i++){var attrib=el.attributes[i];if(attrib.specified&&0===attrib.name.indexOf("data-f-channel-")){config[attrib.name.replace("data-f-channel-","")]=attrib.value}}return config},getConvertersList:function($el,property){var attrConverters=$el.data("f-convert-"+property);if(!attrConverters&&("bind"===property||"foreach"===property||"repeat"===property)){if(!(attrConverters=$el.attr("data-f-convert"))){var $parentEl=$el.closest("[data-f-convert]");$parentEl&&(attrConverters=$parentEl.attr("data-f-convert"))}attrConverters&&(attrConverters=attrConverters.split("|").map(function(v){return v.trim()}))}return attrConverters}}},function(module,exports,__webpack_require__){"use strict";var normalize=function(alias,converter,acceptList){var ret=[];return _.isFunction(converter)?ret.push({alias:alias,convert:converter,acceptList:acceptList}):$.isPlainObject(converter)&&converter.convert?(converter.alias=alias,converter.acceptList=acceptList,ret.push(converter)):$.isPlainObject(alias)&&(alias.convert?ret.push(alias):$.each(alias,function(key,val){ret.push({alias:key,convert:val,acceptList:acceptList})})),ret};var matchConverter=function(alias,converter){return _.isString(converter.alias)?alias===converter.alias:_.isFunction(converter.alias)?converter.alias(alias):!!_.isRegex(converter.alias)&&converter.alias.match(alias)};var converterManager={private:{matchConverter:matchConverter},list:[],register:function(alias,converter,acceptList){var normalized=normalize(alias,converter,acceptList);this.list=normalized.concat(this.list)},replace:function(alias,converter){var index;_.each(this.list,function(currentConverter,i){if(matchConverter(alias,currentConverter))return index=i,!1}),this.list.splice(index,1,normalize(alias,converter)[0])},getConverter:function(alias){return _.find(this.list,function(converter){return matchConverter(alias,converter)})},convert:function(value,list){if(!list||!list.length)return value;list=[].concat(list).map(function(v){return v.trim()});var currentValue=value;var me=this;var convertArray=function(converter,val,converterName){return _.map(val,function(v){return converter.convert(v,converterName)})};var convert=function(converter,value,converterName){return _.isArray(value)&&!0!==converter.acceptList?convertArray(converter,value,converterName):converter.convert(value,converterName)};var convertObject=function(converter,value,converterName){return _.mapValues(value,function(val){return convert(converter,val,converterName)})};return _.each(list,function(converterName){var converter=me.getConverter(converterName);if(!converter)throw new Error("Could not find converter for "+converterName);currentValue=$.isPlainObject(currentValue)&&!0!==converter.acceptList?convertObject(converter,currentValue,converterName):convert(converter,currentValue,converterName)}),currentValue},parse:function(value,list){if(!list||!list.length)return value;list=[].concat(list).reverse().map(function(v){return v.trim()});var currentValue=value;var me=this;return _.each(list,function(converterName){var converter=me.getConverter(converterName);converter.parse&&(currentValue=converter.parse(currentValue,converterName))}),currentValue}};var defaultconverters=[__webpack_require__(15),__webpack_require__(16),__webpack_require__(17),__webpack_require__(18),__webpack_require__(19)];$.each(defaultconverters.reverse(),function(index,converter){_.isArray(converter)?_.each(converter,function(c){converterManager.register(c)}):converterManager.register(converter)}),module.exports=converterManager},function(module,exports,__webpack_require__){"use strict";module.exports={alias:"i",convert:function(value){return parseFloat(value,10)}}},function(module,exports,__webpack_require__){"use strict";module.exports={s:function(val){return val+""},upperCase:function(val){return(val+"").toUpperCase()},lowerCase:function(val){return(val+"").toLowerCase()},titleCase:function(val){return val+="",val.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}}},function(module,exports,__webpack_require__){"use strict";var list=[{alias:"list",acceptList:!0,convert:function(val){return[].concat(val)}},{alias:"last",acceptList:!0,convert:function(val){return val=[].concat(val),val[val.length-1]}},{alias:"reverse",acceptList:!0,convert:function(val){return val=[].concat(val),val.reverse()}},{alias:"first",acceptList:!0,convert:function(val){return val=[].concat(val),val[0]}},{alias:"previous",acceptList:!0,convert:function(val){return val=[].concat(val),val.length<=1?val[0]:val[val.length-2]}}];_.each(list,function(item){var oldfn=item.convert;var newfn=function(val){return $.isPlainObject(val)?_.mapValues(val,oldfn):oldfn(val)};item.convert=newfn}),module.exports=list},function(module,exports,__webpack_require__){"use strict";var list=[];var supported=["values","keys","compact","difference","union","uniq","without","xor","zip"];_.each(supported,function(fn){var item={alias:fn,acceptList:!0,convert:function(val){return $.isPlainObject(val)?_.mapValues(val,_[fn]):_[fn](val)}};list.push(item)}),module.exports=list},function(module,exports,__webpack_require__){"use strict";module.exports={alias:function(name){return-1!==name.indexOf("#")||-1!==name.indexOf("0")},parse:function(val){val+="";var isNegative="-"===val.charAt(0);val=val.replace(/,/g,"");var floatMatcher=/([-+]?[0-9]*\.?[0-9]+)(K?M?B?%?)/i;var results=floatMatcher.exec(val);var number;var suffix="";switch(results&&results[1]&&(number=results[1]),results&&results[2]&&(suffix=results[2].toLowerCase()),suffix){case"%":number/=100;break;case"k":number*=1e3;break;case"m":number*=1e6;break;case"b":number*=1e9}return number=parseFloat(number),isNegative&&number>0&&(number*=-1),number},convert:function(value){function roundTo(value,digits){return Math.round(value*Math.pow(10,digits))/Math.pow(10,digits)}function getDigits(value,digits){value=0===value?0:roundTo(value,Math.max(0,digits-Math.ceil(Math.log(value)/Math.LN10)));var TXT="";var numberTXT=value.toString();var decimalSet=!1;for(var iTXT=0;iTXT<numberTXT.length;iTXT++)if(TXT+=numberTXT.charAt(iTXT),"."===numberTXT.charAt(iTXT)?decimalSet=!0:digits--,digits<=0)return TXT;for(decimalSet||(TXT+=".");digits>0;)TXT+="0",digits--;return TXT}function addDecimals(value,decimals,minDecimals,hasCommas){hasCommas=!!hasCommas;var numberTXT=value.toString();var hasDecimals=numberTXT.split(".").length>1;var iDec=0;if(hasCommas)for(var iChar=numberTXT.length-1;iChar>0;iChar--)hasDecimals?hasDecimals="."!==numberTXT.charAt(iChar):0===(iDec=(iDec+1)%3)&&(numberTXT=numberTXT.substr(0,iChar)+","+numberTXT.substr(iChar));if(decimals>0){var toADD;for(numberTXT.split(".").length<=1?(toADD=minDecimals)>0&&(numberTXT+="."):toADD=minDecimals-numberTXT.split(".")[1].length;toADD>0;)numberTXT+="0",toADD--}return numberTXT}function getSuffix(formatTXT){formatTXT=formatTXT.replace(".","");var fixesTXT=formatTXT.split(new RegExp("[0|,|#]+","g"));return fixesTXT.length>1?fixesTXT[1].toString():""}function isCurrency(string){var s=$.trim(string);return"$"===s||"â‚¬"===s||"Â¥"===s||"Â£"===s||"â‚¡"===s||"â‚±"===s||"KÄ?"===s||"kr"===s||"Â¢"===s||"â‚ª"===s||"Æ’"===s||"â‚©"===s||"â‚«"===s}function format(number,formatTXT){if(_.isArray(number)&&(number=number[number.length-1]),!_.isString(number)&&!_.isNumber(number))return number;if(!formatTXT||"default"===formatTXT.toLowerCase())return number.toString();if(isNaN(number))return"?";formatTXT=formatTXT.replace("&euro;","â‚¬");var formats=formatTXT.split(";");if(formats.length>1)return format(Math.abs(number),formats[number>=0?0:1]);var sign=number>=0?"":"-";number=Math.abs(number);var leftOfDecimal=formatTXT;var d=leftOfDecimal.indexOf(".");d>-1&&(leftOfDecimal=leftOfDecimal.substring(0,d));var normalized=leftOfDecimal.toLowerCase();var index=normalized.lastIndexOf("s");var isShortFormat=index>-1;if(isShortFormat){" "===leftOfDecimal.charAt(index+1)&&(isShortFormat=!1)}var leadingText=isShortFormat?formatTXT.substring(0,index):"";var rightOfPrefix=isShortFormat?formatTXT.substr(index+1):formatTXT.substr(index);if(isShortFormat){var shortFormatTest=/[0-9#*]/;var shortFormatTestResult=rightOfPrefix.match(shortFormatTest);shortFormatTestResult&&0!==shortFormatTestResult.length||(isShortFormat=!1,leadingText="")}if(isShortFormat){var valScale=0===number?0:Math.floor(Math.log(Math.abs(number))/(3*Math.LN10));if(valScale=number/Math.pow(10,3*valScale)<1e3?valScale:valScale+1,valScale=Math.max(valScale,0),valScale=Math.min(valScale,4),number/=Math.pow(10,3*valScale),isNaN(Number(rightOfPrefix))||-1!==rightOfPrefix.indexOf(".")){formatTXT=formatTXT.substr(index+1);var SUFFIX=getSuffix(formatTXT);formatTXT=formatTXT.substr(0,formatTXT.length-SUFFIX.length);var valWithoutLeading=format((""===sign?1:-1)*number,formatTXT)+scales[valScale]+SUFFIX;return isCurrency(leadingText)&&""!==sign?(valWithoutLeading=valWithoutLeading.substr(sign.length),sign+leadingText+valWithoutLeading):leadingText+valWithoutLeading}var limitDigits=Number(rightOfPrefix);return number<Math.pow(10,limitDigits)?isCurrency(leadingText)?sign+leadingText+getDigits(number,Number(rightOfPrefix))+scales[valScale]:leadingText+sign+getDigits(number,Number(rightOfPrefix))+scales[valScale]:isCurrency(leadingText)?sign+leadingText+Math.round(number)+scales[valScale]:leadingText+sign+Math.round(number)+scales[valScale]}var subFormats=formatTXT.split(".");var decimals;var minDecimals;subFormats.length>1?(decimals=subFormats[1].length-subFormats[1].replace(new RegExp("[0|#]+","g"),"").length,minDecimals=subFormats[1].length-subFormats[1].replace(new RegExp("0+","g"),"").length,formatTXT=subFormats[0]+subFormats[1].replace(new RegExp("[0|#]+","g"),"")):decimals=0;var fixesTXT=formatTXT.split(new RegExp("[0|,|#]+","g"));var preffix=fixesTXT[0].toString();var suffix=fixesTXT.length>1?fixesTXT[1].toString():"";return number*=formatTXT.split("%").length>1?100:1,number=roundTo(number,decimals),(sign=0===number?"":sign)+preffix+addDecimals(number,decimals,minDecimals,","===formatTXT.substr(formatTXT.length-4-suffix.length,1))+suffix}var scales=["","K","M","B","T"];return format}()}},function(module,exports,__webpack_require__){"use strict";var normalize=function(selector,handler){return _.isFunction(handler)&&(handler={handle:handler}),selector||(selector="*"),handler.selector=selector,handler};var match=function(toMatch,node){return _.isString(toMatch)?toMatch===node.selector:$(toMatch).is(node.selector)};var nodeManager={list:[],register:function(selector,handler){this.list.unshift(normalize(selector,handler))},getHandler:function(selector){return _.find(this.list,function(node){return match(selector,node)})},replace:function(selector,handler){var index;_.each(this.list,function(currentHandler,i){if(selector===currentHandler.selector)return index=i,!1}),this.list.splice(index,1,normalize(selector,handler))}};var defaultHandlers=[__webpack_require__(21),__webpack_require__(7),__webpack_require__(8)];_.each(defaultHandlers.reverse(),function(handler){nodeManager.register(handler.selector,handler)}),module.exports=nodeManager},function(module,exports,__webpack_require__){"use strict";var BaseView=__webpack_require__(7);module.exports=BaseView.extend({propertyHandlers:[],getUIValue:function(){var $el=this.$el;var offVal=void 0!==$el.data("f-off")&&$el.data("f-off");var onVal=void 0===$el.attr("value")||$el.prop("value");return $el.is(":checked")?onVal:offVal},initialize:function(){BaseView.prototype.initialize.apply(this,arguments)}},{selector:":checkbox,:radio"})},function(module,exports,__webpack_require__){"use strict";var defaultHandlers=[__webpack_require__(23),__webpack_require__(24),__webpack_require__(25),__webpack_require__(26),__webpack_require__(27),__webpack_require__(28),__webpack_require__(29),__webpack_require__(30),__webpack_require__(31),__webpack_require__(32),__webpack_require__(33)];var handlersList=[];var normalize=function(attributeMatcher,nodeMatcher,handler){return nodeMatcher||(nodeMatcher="*"),_.isFunction(handler)&&(handler={handle:handler}),$.extend(handler,{test:attributeMatcher,target:nodeMatcher})};$.each(defaultHandlers,function(index,handler){handlersList.push(normalize(handler.test,handler.target,handler))});var matchAttr=function(matchExpr,attr,$el){var attrMatch;return _.isString(matchExpr)?attrMatch="*"===matchExpr||matchExpr.toLowerCase()===attr.toLowerCase():_.isFunction(matchExpr)?attrMatch=matchExpr(attr,$el):_.isRegExp(matchExpr)&&(attrMatch=attr.match(matchExpr)),attrMatch};var matchNode=function(target,nodeFilter){return _.isString(nodeFilter)?nodeFilter===target:nodeFilter.is(target)};module.exports={list:handlersList,register:function(attributeMatcher,nodeMatcher,handler){handlersList.unshift(normalize.apply(null,arguments))},filter:function(attrFilter,nodeFilter){var filtered=_.filter(handlersList,function(handler){return matchAttr(handler.test,attrFilter)});return nodeFilter&&(filtered=_.filter(filtered,function(handler){return matchNode(handler.target,nodeFilter)})),filtered},replace:function(attrFilter,nodeFilter,handler){var index;_.each(handlersList,function(currentHandler,i){if(matchAttr(currentHandler.test,attrFilter)&&matchNode(currentHandler.target,nodeFilter))return index=i,!1}),handlersList.splice(index,1,normalize(attrFilter,nodeFilter,handler))},getHandler:function(property,$el){return this.filter(property,$el)[0]}}},function(module,exports,__webpack_require__){"use strict";module.exports={target:"*",test:/^(?:model|convert|channel)/i,handle:$.noop,init:function(){return!1}}},function(module,exports,__webpack_require__){"use strict";var config=__webpack_require__(0);var toOperationFormat=__webpack_require__(3).toOperationFormat;module.exports={target:"*",test:function(attr,$node){return 0===attr.indexOf("on-")},unbind:function(attr){attr=attr.replace("on-",""),this.off(attr)},init:function(attr,value){attr=attr.replace("on-","");var me=this;return this.off(attr).on(attr,function(){var listOfOperations=toOperationFormat(value);me.trigger(config.events.operate,{operations:listOfOperations})}),!1}}},function(module,exports,__webpack_require__){"use strict";function refToMarkup(refKey){return"\x3c!--"+refKey+"--\x3e"}var parseUtils=__webpack_require__(3);var config=__webpack_require__(0);module.exports={test:"foreach",target:"*",unbind:function(attr){var template=this.data(config.attrs.foreachTemplate);template&&(this.html(template),this.removeData(config.attrs.foreachTemplate),this.removeData(config.attrs.keyAs),this.removeData(config.attrs.valueAs))},parse:function(attrVal){var inMatch=attrVal.match(/(.*) (?:in|of) (.*)/);if(inMatch){var itMatch=inMatch[1].match(/\((.*),(.*)\)/);itMatch?(this.data(config.attrs.keyAs,itMatch[1].trim()),this.data(config.attrs.valueAs,itMatch[2].trim())):this.data(config.attrs.valueAs,inMatch[1].trim()),attrVal=inMatch[2]}return attrVal},handle:function(value,prop){value=$.isPlainObject(value)?value:[].concat(value);var loopTemplate=this.data(config.attrs.foreachTemplate);loopTemplate||(loopTemplate=this.html(),this.data(config.attrs.foreachTemplate,loopTemplate));var $me=this.empty();var cloop=loopTemplate.replace(/&lt;/g,"<").replace(/&gt;/g,">");var defaultKey=$.isPlainObject(value)?"key":"index";var keyAttr=$me.data(config.attrs.keyAs)||defaultKey;var valueAttr=$me.data(config.attrs.valueAs)||"value";var keyRegex=new RegExp("\\b"+keyAttr+"\\b");var valueRegex=new RegExp("\\b"+valueAttr+"\\b");var closestKnownDataEl=this.closest("[data-current-index]");var knownData={};closestKnownDataEl.length&&(knownData=closestKnownDataEl.data("current-index"));var closestParentWithMissing=this.closest("[data-missing-references]");if(closestParentWithMissing.length){var missing=closestParentWithMissing.data("missing-references");_.each(missing,function(replacement,template){(keyRegex.test(template)||valueRegex.test(template))&&(cloop=cloop.replace(refToMarkup(replacement),template))})}else{var missingReferences={};var templateTagsUsed=cloop.match(/<%[=-]?([\s\S]+?)%>/g);templateTagsUsed&&templateTagsUsed.forEach(function(tag){if(tag.match(/\w+/)&&!keyRegex.test(tag)&&!valueRegex.test(tag)){var refKey=missingReferences[tag];refKey||(refKey=_.uniqueId("no-ref"),missingReferences[tag]=refKey);var r=new RegExp(tag,"g");cloop=cloop.replace(r,refToMarkup(refKey))}}),_.size(missingReferences)&&this.attr("data-missing-references",JSON.stringify(missingReferences))}var templateFn=_.template(cloop);_.each(value,function(dataval,datakey){dataval||(dataval+="");var templateData={};templateData[keyAttr]=datakey,templateData[valueAttr]=dataval,$.extend(templateData,knownData);var nodes;var isTemplated;try{var templatedLoop=templateFn(templateData);isTemplated=templatedLoop!==cloop,nodes=$(templatedLoop)}catch(e){nodes=$(cloop),isTemplated=!0,$(nodes).attr("data-current-index",JSON.stringify(templateData))}nodes.each(function(i,newNode){newNode=$(newNode),_.each(newNode.data(),function(val,key){newNode.data(key,parseUtils.toImplicitType(val))}),isTemplated||newNode.html().trim()||newNode.html(dataval)}),$me.append(nodes)})}}},function(module,exports,__webpack_require__){"use strict";module.exports={target:":checkbox,:radio",test:"bind",handle:function(value){_.isArray(value)&&(value=value[value.length-1]);var settableValue=this.attr("value");var isChecked=void 0!==settableValue?settableValue==value:!!value;this.prop("checked",isChecked)}}},function(module,exports,__webpack_require__){"use strict";module.exports={target:"input, select",test:"bind",handle:function(value){_.isArray(value)&&(value=value[value.length-1]),this.val(value)}}},function(module,exports,__webpack_require__){"use strict";var config=__webpack_require__(0);module.exports={test:"class",target:"*",handle:function(value,prop){_.isArray(value)&&(value=value[value.length-1]);var addedClasses=this.data(config.classesAdded);addedClasses||(addedClasses={}),addedClasses[prop]&&this.removeClass(addedClasses[prop]),_.isNumber(value)&&(value="value-"+value),addedClasses[prop]=value,this.addClass(value),this.data(config.classesAdded,addedClasses)}}},function(module,exports,__webpack_require__){"use strict";var parseUtils=__webpack_require__(3);var gutils=__webpack_require__(5);var config=__webpack_require__(0).attrs;module.exports={test:"repeat",target:"*",unbind:function(attr){var id=this.data(config.repeat.templateId);id&&this.nextUntil(":not([data-"+id+"])").remove();var loopTemplate=this.data(config.repeat.template);loopTemplate&&(this.removeData(config.repeat.template),this.replaceWith(loopTemplate))},handle:function(value,prop){value=$.isPlainObject(value)?value:[].concat(value);var loopTemplate=this.data(config.repeat.template);var id=this.data(config.repeat.templateId);loopTemplate||(loopTemplate=this.get(0).outerHTML,this.data(config.repeat.template,loopTemplate)),id?this.nextUntil(":not([data-"+id+"])").remove():(id=gutils.random("repeat-"),this.attr("data-"+config.repeat.templateId,id));var last;var me=this;_.each(value,function(dataval,datakey){var cloop=loopTemplate.replace(/&lt;/g,"<").replace(/&gt;/g,">");var templatedLoop=_.template(cloop)({value:dataval,key:datakey,index:datakey});var isTemplated=templatedLoop!==cloop;var nodes=$(templatedLoop);var hasData=null!==dataval&&void 0!==dataval;nodes.each(function(i,newNode){newNode=$(newNode).removeAttr("data-f-repeat").removeAttr("data-"+config.repeat.templateId),_.each(newNode.data(),function(val,key){last?newNode.data(key,parseUtils.toImplicitType(val)):me.data(key,parseUtils.toImplicitType(val))}),newNode.attr("data-"+id,!0),isTemplated||newNode.children().length||!hasData||newNode.html(dataval+"")}),last=last?nodes.insertAfter(last):me.html(nodes.html())})}}},function(module,exports,__webpack_require__){"use strict";module.exports={target:"*",test:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|ismap|loop|multiple|open|required|scoped)$/i,handle:function(value,prop){_.isArray(value)&&(value=value[value.length-1]);var val=this.attr("value")?value==this.prop("value"):!!value;this.prop(prop,val)}}},function(module,exports,__webpack_require__){"use strict";module.exports={target:"*",test:/^(?:disabled|hidden|readonly)$/i,handle:function(value,prop){_.isArray(value)&&(value=value[value.length-1]),this.prop(prop,!value)}}},function(module,exports,__webpack_require__){"use strict";var config=__webpack_require__(0);module.exports={target:"*",test:"bind",unbind:function(attr){var template=this.data(config.attrs.bindTemplate);template&&this.html(template)},handle:function(value){var templated;var valueToTemplate=$.extend({},value);if($.isPlainObject(value))valueToTemplate.value=value;else{var variableName=this.data("f-bind");valueToTemplate={value:value},valueToTemplate[variableName]=value}var bindTemplate=this.data(config.attrs.bindTemplate);if(bindTemplate)templated=_.template(bindTemplate)(valueToTemplate),this.html(templated);else{var oldHTML=this.html();var cleanedHTML=oldHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">");templated=_.template(cleanedHTML)(valueToTemplate),cleanedHTML===templated?(_.isArray(value)&&(value=value[value.length-1]),value=$.isPlainObject(value)?JSON.stringify(value):value+"",this.html(value)):(this.data(config.attrs.bindTemplate,cleanedHTML),this.html(templated))}}}},function(module,exports,__webpack_require__){"use strict";module.exports={test:"*",target:"*",handle:function(value,prop){this.prop(prop,value)}}},function(module,exports,__webpack_require__){"use strict";module.exports=function(target,domManager){if(!window.MutationObserver)return!1;var observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){var added=$(mutation.addedNodes).find(":f");added=added.add($(mutation.addedNodes).filter(":f"));var removed=$(mutation.removedNodes).find(":f");removed=removed.add($(mutation.removedNodes).filter(":f")),added&&added.length&&domManager.bindAll(added),removed&&removed.length&&domManager.unbindAll(removed),"data-f-channel"===mutation.attributeName&&(domManager.unbindAll(mutation.target),domManager.bindAll(mutation.target))})});var mutconfig={attributes:!0,attributeFilter:["data-f-channel"],childList:!0,subtree:!0,characterData:!1};observer.observe(target,mutconfig)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function ChannelManager(opts){return new InterpolatableChannelManagerWithMiddleware($.extend(!0,{},{middlewares:[__WEBPACK_IMPORTED_MODULE_0__middleware_json_parse_middleware__.a,__WEBPACK_IMPORTED_MODULE_1__middleware_epicenter_middleware__.a]},opts))}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default=ChannelManager;var __WEBPACK_IMPORTED_MODULE_0__middleware_json_parse_middleware__=__webpack_require__(36);var __WEBPACK_IMPORTED_MODULE_1__middleware_epicenter_middleware__=__webpack_require__(37);var __WEBPACK_IMPORTED_MODULE_2__channel_manager__=__webpack_require__(48);var __WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__=__webpack_require__(49);var InterpolatableChannelManagerWithMiddleware=Object(__WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__.a)(Object(__WEBPACK_IMPORTED_MODULE_3__channel_manager_enhancements__.b)(__WEBPACK_IMPORTED_MODULE_2__channel_manager__.a))},function(module,__webpack_exports__,__webpack_require__){"use strict";function JSONMiddleware(config,notifier){return{subscribeHandler:function(topics){var sorted=[].concat(topics).reduce(function(acc,topic){var parsed=Object(__WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__.toImplicitType)(topic);return"string"==typeof parsed?acc.rest.push(topic):acc.claimed.push({name:topic,value:parsed}),acc},{claimed:[],rest:[]});return sorted.claimed.length&&notifier(sorted.claimed),sorted.rest}}}__webpack_exports__.a=JSONMiddleware;var __WEBPACK_IMPORTED_MODULE_0_utils_parse_utils__=__webpack_require__(3)},function(module,__webpack_exports__,__webpack_require__){"use strict";function getOptions(opts,key){var serviceOptions=$.extend(!0,{},opts.defaults,opts[key]);var channelOptions=$.extend(!0,{},serviceOptions.channelOptions);return delete serviceOptions.channelOptions,{serviceOptions:serviceOptions,channelOptions:channelOptions}}var __WEBPACK_IMPORTED_MODULE_0__run_manager_router__=__webpack_require__(38);var __WEBPACK_IMPORTED_MODULE_1__scenario_manager_router__=__webpack_require__(44);var __WEBPACK_IMPORTED_MODULE_2__custom_run_router__=__webpack_require__(45);var __WEBPACK_IMPORTED_MODULE_3__runs_router__=__webpack_require__(47);var __WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_5_channels_channel_router__=__webpack_require__(4);var sampleRunidLength="000001593dd81950d4ee4f3df14841769a0b".length;var runidRegex="(?:.{"+sampleRunidLength+"})";__webpack_exports__.a=function(config,notifier,channelManagerContext){var opts=$.extend(!0,{},config);var customRunChannelOpts=getOptions(opts,"runid");var customRunChannel=new __WEBPACK_IMPORTED_MODULE_2__custom_run_router__.a(customRunChannelOpts,notifier);var runsChannel=new __WEBPACK_IMPORTED_MODULE_3__runs_router__.a(customRunChannelOpts,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,"runs"),channelManagerContext);var handlers=[$.extend({},customRunChannel,{name:"customRun",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.e)(runidRegex),options:customRunChannelOpts.channelOptions}),$.extend({},runsChannel,{name:"archiveRuns",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.d)("runs"),options:customRunChannelOpts.channelOptions})];var exposable={};var runManagerOpts=getOptions(opts,"runManager");if(opts.runManager||!opts.scenarioManager&&runManagerOpts.serviceOptions.run){var rm;opts.scenarioManager?(rm=new __WEBPACK_IMPORTED_MODULE_0__run_manager_router__.a(runManagerOpts,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,"rm:")),handlers.push($.extend({},rm,{name:"run",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.d)("rm:"),options:runManagerOpts.channelOptions}))):(rm=new __WEBPACK_IMPORTED_MODULE_0__run_manager_router__.a(runManagerOpts,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,["rm:",""])),handlers.push($.extend({},rm,{name:"run",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.a)("rm:"),isDefault:!0,options:runManagerOpts.channelOptions}))),$.extend(exposable,rm.expose)}if(opts.scenarioManager){var scenarioManagerOpts=getOptions(opts,"scenarioManager");var sm=new __WEBPACK_IMPORTED_MODULE_1__scenario_manager_router__.a(scenarioManagerOpts,Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.i)(notifier,["sm:",""]));handlers.push($.extend({},sm,{name:"scenario",match:Object(__WEBPACK_IMPORTED_MODULE_4_channels_middleware_utils__.a)("sm:"),options:scenarioManagerOpts.channelOptions,isDefault:!0})),$.extend(exposable,sm.expose)}var router=new __WEBPACK_IMPORTED_MODULE_5_channels_channel_router__.a(handlers,notifier);return router.expose=exposable,router}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__run_router__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__=__webpack_require__(4);__webpack_exports__.a=function(config,notifier){var defaults={serviceOptions:{},channelOptions:{}};var opts=$.extend(!0,{},defaults,config);var rm=new window.F.manager.RunManager(opts.serviceOptions);var $creationPromise=rm.getRun().then(function(){return rm.run});var currentChannelOpts=$.extend(!0,{serviceOptions:$creationPromise},opts.defaults,opts.current);var currentRunChannel=new __WEBPACK_IMPORTED_MODULE_0__run_router__.a(currentChannelOpts,Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.i)(notifier,["current:",""]));var handlers=[$.extend(currentRunChannel,{match:Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.a)("current:"),isDefault:!0,options:currentChannelOpts.channelOptions})];var router=new __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__.a(handlers,notifier);return router.expose={runManager:rm},router}},function(module,__webpack_exports__,__webpack_require__){"use strict";function RunMetaChannel($runServicePromise,notifier){function mergeAndSend(runMeta,requestedTopics){var toSend=[].concat(requestedTopics).reduce(function(accum,meta){return void 0!==runMeta[meta]&&accum.push({name:meta,value:runMeta[meta]}),accum},[]);return notifier(toSend)}return{subscribeHandler:function(topics,options){return topics=[].concat(topics),$runServicePromise.then(function(runService){var cachedValues=intersection(Object.keys(runService.runMeta||{}),topics);return!1===options.autoFetch?$.Deferred().resolve({}).promise():cachedValues.length===topics.length?$.Deferred().resolve(mergeAndSend(runService.runMeta,topics)).promise():(runService.loadPromise||(runService.loadPromise=runService.load().then(function(data){return runService.runMeta=data,data})),runService.loadPromise.then(function(data){mergeAndSend(data,topics)}))})},publishHandler:function(topics,options){return $runServicePromise.then(function(runService){var toSave=Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.a)(topics);return runService.save(toSave).then(function(res){return runService.runMeta=$.extend({},!0,runService.runMeta,res),Object(__WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__.e)(res)})})}}}__webpack_exports__.a=RunMetaChannel;var __WEBPACK_IMPORTED_MODULE_0_channels_channel_utils__=__webpack_require__(1);var _ref=_,intersection=_ref.intersection},function(module,__webpack_exports__,__webpack_require__){"use strict";function RunVariablesChannel($runServicePromise,notifier){var id=_.uniqueId("variable-channel");var fetchFn=function(runService,debounceInterval){return runService.debouncedFetchers||(runService.debouncedFetchers={}),runService.debouncedFetchers[id]||(runService.debouncedFetchers[id]=Object(__WEBPACK_IMPORTED_MODULE_0_utils_general__.debounceAndMerge)(function(variables){return variables&&variables.length?runService.variables().query(variables).then(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__.e):$.Deferred().resolve([]).promise()},debounceInterval,[function(accum,newval){return accum||(accum=[]),_.uniq(accum.concat(newval)).filter(function(v){return!(!v||!v.trim())})}])),runService.debouncedFetchers[id]};var knownTopics=[];return{fetch:function(){return $runServicePromise.then(function(runService){return fetchFn(runService,0)(knownTopics).then(notifier)})},unsubscribeHandler:function(unsubscribedTopics,remainingTopics){knownTopics=remainingTopics},subscribeHandler:function(topics,options){var isAutoFetchEnabled=options.autoFetch;var debounceInterval=options.debounce;return $runServicePromise.then(function(runService){return knownTopics=_.uniq(knownTopics.concat(topics)),knownTopics.length?isAutoFetchEnabled?fetchFn(runService,debounceInterval)(topics).then(notifier):$.Deferred().resolve(topics).promise():$.Deferred().resolve([]).promise()})},publishHandler:function(topics,options){return $runServicePromise.then(function(runService){var toSave=Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__.a)(topics);return runService.variables().save(toSave).then(function(response){return Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__.e)(response)})})}}}__webpack_exports__.a=RunVariablesChannel;var __WEBPACK_IMPORTED_MODULE_0_utils_general__=__webpack_require__(5);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_utils_general__);var __WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__=__webpack_require__(1)},function(module,__webpack_exports__,__webpack_require__){"use strict";function RunOperationsChannel($runServicePromise){return{publishHandler:function(topics,options){return $runServicePromise.then(function(runService){var toSave=topics.map(function(topic){return{name:topic.name,params:topic.value}});return runService.serial(toSave).then(function(result){return result.map(function(response,index){return{name:topics[index].name,value:response}})})})}}}__webpack_exports__.a=RunOperationsChannel},function(module,__webpack_exports__,__webpack_require__){"use strict";function silencable(published,silentOptions){return!0!==silentOptions&&published?isArray(silentOptions)?published.filter(function(data){return!includes(silentOptions,data.name)}):silentOptions&&silentOptions.except?published.filter(function(data){return includes(silentOptions.except||[],data.name)}):published:[]}__webpack_exports__.a=silencable;var _ref=_,isArray=_ref.isArray,includes=_ref.includes},function(module,__webpack_exports__,__webpack_require__){"use strict";function excludeReadOnly(publishable,readOnlyOptions){if(isFunction(readOnlyOptions)&&(readOnlyOptions=readOnlyOptions()),!0===readOnlyOptions)return console.error("Tried to publish to a readonly channel",publishable),[];if(isArray(readOnlyOptions)){var split=publishable.reduce(function(accum,data){return includes(readOnlyOptions,data.name)?accum.readOnly.push(data):accum.remaining.push(data),accum},{readOnly:[],remaining:[]});return split.readOnly.length&&console.error("Ignoring readonly publishes",split.readOnly),split.remaining}return publishable}__webpack_exports__.a=excludeReadOnly;var _ref=_,isArray=_ref.isArray,includes=_ref.includes,isFunction=_ref.isFunction},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__run_router__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__=__webpack_require__(4);__webpack_exports__.a=function(config,notifier){var defaults={serviceOptions:{},channelOptions:{}};var opts=$.extend(!0,{},defaults,config);var sm=new window.F.manager.ScenarioManager(opts.serviceOptions);var baselinePromise=sm.baseline.getRun().then(function(){return sm.baseline.run});var baselineOptions=$.extend(!0,{serviceOptions:baselinePromise,channelOptions:{meta:{readOnly:!0},variables:{readOnly:!0}}},opts.defaults,opts.baseline);var currentRunPromise=sm.current.getRun().then(function(){return sm.current.run});var runOptions=$.extend(!0,{serviceOptions:currentRunPromise},opts.defaults,opts.current);var baselineChannel=new __WEBPACK_IMPORTED_MODULE_0__run_router__.a(baselineOptions,Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.i)(notifier,"baseline:"));var currentRunChannel=new __WEBPACK_IMPORTED_MODULE_0__run_router__.a(runOptions,Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.i)(notifier,["current:",""]));var handlers=[$.extend(baselineChannel,{name:"baseline",match:Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.d)("baseline:"),options:baselineOptions.channelOptions}),$.extend(currentRunChannel,{isDefault:!0,name:"current",match:Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.a)("current:"),options:runOptions.channelOptions})];var router=new __WEBPACK_IMPORTED_MODULE_2_channels_channel_router__.a(handlers,notifier);return router.expose={scenarioManager:sm},router}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__run_router_factory__=__webpack_require__(46);var __WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__=__webpack_require__(2);__webpack_exports__.a=function(options,notifier){options||(options={});var opts={};return opts.serviceOptions=options.serviceOptions&&options.serviceOptions.run?options.serviceOptions.run:{},opts.channelOptions=options.channelOptions,{subscribeHandler:function(topics,options,prefix){var runid=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.g)(prefix);return Object(__WEBPACK_IMPORTED_MODULE_0__run_router_factory__.a)(runid,opts,Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.i)(notifier,prefix)).subscribeHandler(topics,options,prefix)},publishHandler:function(topics,options,prefix){var runid=Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.g)(prefix);return Object(__WEBPACK_IMPORTED_MODULE_0__run_router_factory__.a)(runid,opts,Object(__WEBPACK_IMPORTED_MODULE_1_channels_middleware_utils__.i)(notifier,prefix)).publishHandler(topics)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__run_router__=__webpack_require__(6);var knownRunIDServiceChannels={};__webpack_exports__.a=function(runid,options,notifier){var runChannel=knownRunIDServiceChannels[runid];if(!runChannel){var runOptions=$.extend(!0,{},options,{serviceOptions:{id:runid}});runChannel=new __WEBPACK_IMPORTED_MODULE_0__run_router__.a(runOptions,notifier),knownRunIDServiceChannels[runid]=runChannel}return runChannel}},function(module,__webpack_exports__,__webpack_require__){"use strict";function RunsRouter(options,notifier,channelManagerContext){function extractFiltersFromTopic(topicString){return topicString.replace("(","").replace(")","").split(";").reduce(function(accum,filter){var _filter$split=filter.split("="),_filter$split2=_slicedToArray(_filter$split,2),key=_filter$split2[0],val=_filter$split2[1];return val&&(val=!0),accum[key]=val,accum},{})}function fetch(topic,variables){var filters=extractFiltersFromTopic(topic);return runService.query(filters,{include:variables}).then(function(runs){return notifier([{name:topic,value:runs}]),runs})}var runService=new F.service.Run(options.serviceOptions.run);var topicParamMap={};return{fetch:fetch,unsubscribeHandler:function(unsubscribedTopics,remainingTopics){console.log("unsubs")},subscribeHandler:function(topics,options){var topic=[].concat(topics)[0];var filters=extractFiltersFromTopic(topic);var variables=options&&options.include;var debouncedFetch=Object(__WEBPACK_IMPORTED_MODULE_0_utils_general__.debounceAndMerge)(fetch,300,function(accum,newval){return newval});return fetch(topic,variables).then(function(runs){var subsMap={};return runs.forEach(function(run){var subscriptions=Object.keys(filters).map(function(filter){return run.id+":meta:"+filter});var subsid=channelManagerContext.subscribe(subscriptions,function(){debouncedFetch(topic,variables)},{batch:!1,autoFetch:!1,cache:!1});subsMap[run.id]=subsid}),topicParamMap[topic]=subsMap,runs})}}}__webpack_exports__.a=RunsRouter;var __WEBPACK_IMPORTED_MODULE_0_utils_general__=__webpack_require__(5);__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_utils_general__);var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=!0;var _d=!1;var _e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var _window=window,F=_window.F},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function makeSubs(topics,callback,options){var id=uniqueId("subs-");var defaults={batch:!1,cache:!0};var opts=$.extend({},defaults,options);if(!callback||!isFunction(callback))throw new Error("subscribe callback should be a function");return $.extend(!0,{id:id,topics:[].concat(topics),callback:callback},opts)}function callbackIfChanged(subscription,data){var id=subscription.id;_.isEqual(sentDataBySubsId[id],data)||(sentDataBySubsId[id]=data,subscription.callback(data,{id:id}))}function checkAndNotifyBatch(topics,subscription){var cached=cacheBySubsId[subscription.id]||{};var merged=topics.reduce(function(accum,topic){return accum[topic.name]=topic.value,accum},$.extend({},!0,cached));var matchingTopics=intersection(Object.keys(merged),subscription.topics);if(matchingTopics.length>0){var toSend=subscription.topics.reduce(function(accum,topic){return accum[topic]=merged[topic],accum},{});subscription.cache&&(cacheBySubsId[subscription.id]=toSend),matchingTopics.length===subscription.topics.length&&callbackIfChanged(subscription,toSend)}}function checkAndNotify(topics,subscription){topics.forEach(function(topic){if(includes(subscription.topics,topic.name)||includes(subscription.topics,"*")){var toSend={};toSend[topic.name]=topic.value,callbackIfChanged(subscription,toSend)}})}function getTopicsFromSubsList(subcriptionList){return subcriptionList.reduce(function(accum,subs){return accum=accum.concat(subs.topics)},[])}var __WEBPACK_IMPORTED_MODULE_0__channel_utils__=__webpack_require__(1);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _ref=_,uniqueId=_ref.uniqueId,isFunction=_ref.isFunction,intersection=_ref.intersection,includes=_ref.includes,uniq=_ref.uniq;var cacheBySubsId={};var sentDataBySubsId={};var ChannelManager=function(){function ChannelManager(options){_classCallCheck(this,ChannelManager),this.subscriptions=[]}return _createClass(ChannelManager,[{key:"publish",value:function(topic,value,options){var normalized=Object(__WEBPACK_IMPORTED_MODULE_0__channel_utils__.d)(topic,value,options);var prom=$.Deferred().resolve(normalized.params).promise();return prom=prom.then(this.notify.bind(this))}},{key:"notify",value:function(topic,value,options){var normalized=Object(__WEBPACK_IMPORTED_MODULE_0__channel_utils__.d)(topic,value,options);return this.subscriptions.forEach(function(subs){(subs.batch?checkAndNotifyBatch:checkAndNotify)(normalized.params,subs)})}},{key:"subscribe",value:function(topics,cb,options){var subs=makeSubs(topics,cb,options);return this.subscriptions=this.subscriptions.concat(subs),subs.id}},{key:"unsubscribe",value:function(token){var olderLength=this.subscriptions.length;if(!olderLength)throw new Error("No subscriptions found to unsubscribe from");var remaining=this.subscriptions.filter(function(subs){return subs.id!==token});if(!remaining.length===olderLength)throw new Error("No subscription found for token "+token);delete cacheBySubsId[token],delete sentDataBySubsId[token],this.subscriptions=remaining}},{key:"unsubscribeAll",value:function(){this.subscriptions=[]}},{key:"getSubscribedTopics",value:function(){return uniq(getTopicsFromSubsList(this.subscriptions))}},{key:"getSubscribers",value:function(topic){return topic?this.subscriptions.filter(function(subs){return includes(subs.topics,topic)}):this.subscriptions}}]),ChannelManager}();__webpack_exports__.a=ChannelManager},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__interpolatable__=__webpack_require__(50);__webpack_require__.d(__webpack_exports__,"a",function(){return __WEBPACK_IMPORTED_MODULE_0__interpolatable__.a});var __WEBPACK_IMPORTED_MODULE_1__with_middleware__=__webpack_require__(53);__webpack_require__.d(__webpack_exports__,"b",function(){return __WEBPACK_IMPORTED_MODULE_1__with_middleware__.a})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function interpolatable(ChannelManager){var subsidMap={};return function(_ChannelManager){function InterpolatedChannelManager(options){_classCallCheck(this,InterpolatedChannelManager);var _this=_possibleConstructorReturn(this,(InterpolatedChannelManager.__proto__||Object.getPrototypeOf(InterpolatedChannelManager)).call(this,options));return _this.subscribe=Object(__WEBPACK_IMPORTED_MODULE_0__subscribe_interpolator__.a)(_this.subscribe.bind(_this),function(dependencySubsId,newDependentId){var existing=subsidMap[dependencySubsId];existing&&_this.unsubscribe(existing),subsidMap[dependencySubsId]=newDependentId}),_this.publish=Object(__WEBPACK_IMPORTED_MODULE_1__publish_interpolator__.a)(_this.publish.bind(_this),function(variables,cb){_get(InterpolatedChannelManager.prototype.__proto__||Object.getPrototypeOf(InterpolatedChannelManager.prototype),"subscribe",_this).call(_this,variables,function(response,meta){_this.unsubscribe(meta.id),cb(response)},{autoFetch:!0,batch:!0})}),_this}return _inherits(InterpolatedChannelManager,_ChannelManager),_createClass(InterpolatedChannelManager,[{key:"unsubscribe",value:function(token){var existing=subsidMap[token];existing&&_get(InterpolatedChannelManager.prototype.__proto__||Object.getPrototypeOf(InterpolatedChannelManager.prototype),"unsubscribe",this).call(this,existing),_get(InterpolatedChannelManager.prototype.__proto__||Object.getPrototypeOf(InterpolatedChannelManager.prototype),"unsubscribe",this).call(this,token),delete subsidMap[token]}},{key:"unsubscribeAll",value:function(){subsidMap={},_get(InterpolatedChannelManager.prototype.__proto__||Object.getPrototypeOf(InterpolatedChannelManager.prototype),"unsubscribeAll",this).call(this)}}]),InterpolatedChannelManager}(ChannelManager)}__webpack_exports__.a=interpolatable;var __WEBPACK_IMPORTED_MODULE_0__subscribe_interpolator__=__webpack_require__(51);var __WEBPACK_IMPORTED_MODULE_1__publish_interpolator__=__webpack_require__(52);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function getDependencies(topics){var deps=topics.reduce(function(accum,topic){var inner=Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__.a)(topic);return accum=accum.concat(inner)},[]);return uniq(deps)}function interpolateWithDependencies(topics,data){return topics.map(function(topic){return Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__.b)(topic,data)})}function mergeInterpolatedTopicsWithData(originalTopics,interpolatedTopics,data){return interpolatedTopics.reduce(function(accum,interpolatedTopic,index){var original=originalTopics[index];return void 0!==data[interpolatedTopic]&&(accum[original]=data[interpolatedTopic]),accum},{})}function subscribeInterpolator(subscribeFn,onDependencyChange){return function(topics,cb,options){topics=[].concat(topics);var dependencies=getDependencies(topics);return dependencies.length?subscribeFn(dependencies,function(data,dependenciesMeta){var interpolatedTopics=interpolateWithDependencies(topics,data);var outerSubsId=subscribeFn(interpolatedTopics,function(actualData,actualMeta){var toSendback=mergeInterpolatedTopicsWithData(topics,interpolatedTopics,actualData);cb(toSendback,actualMeta)},options);return(onDependencyChange||$.noop)(dependenciesMeta.id,outerSubsId),outerSubsId},{autoFetch:!0,batch:!0}):subscribeFn(topics,cb,options)}}__webpack_exports__.a=subscribeInterpolator;var __WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__=__webpack_require__(10);var _ref=_,uniq=_ref.uniq},function(module,__webpack_exports__,__webpack_require__){"use strict";function getDependencies(publishInputs){var deps=publishInputs.reduce(function(accum,input){var inner=Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__.a)(input.name);return accum=accum.concat(inner)},[]);return uniq(deps)}function interpolateWithDependencies(publishInputs,valuesToInterpolate){return publishInputs.map(function(ip){return{name:Object(__WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__.b)(ip.name,valuesToInterpolate),value:ip.value}})}function publishInterpolator(publishFunction,fetchFn){return function(topic,value,options){var normalizedPublishInputs=Object(__WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__.d)(topic,value,options);var dependencies=getDependencies(normalizedPublishInputs.params);if(!dependencies.length)return publishFunction(topic,value,options);var prom=$.Deferred();return fetchFn(dependencies,function(resolvedDependencies){var interpolated=interpolateWithDependencies(normalizedPublishInputs.params,resolvedDependencies);var newPublishProm=publishFunction(interpolated,normalizedPublishInputs.options);prom.resolve(newPublishProm)}),prom.promise()}}__webpack_exports__.a=publishInterpolator;var __WEBPACK_IMPORTED_MODULE_0__interpolatable_utils__=__webpack_require__(10);var __WEBPACK_IMPORTED_MODULE_1_channels_channel_utils__=__webpack_require__(1);var _ref=_,uniq=_ref.uniq},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function getTopicsFromSubsList(subcriptionList){return subcriptionList.reduce(function(accum,subs){return accum=accum.concat(subs.topics)},[])}function withMiddleware(ChannelManager){return function(_ChannelManager){function ChannelWithMiddleware(options){_classCallCheck(this,ChannelWithMiddleware);var _this=_possibleConstructorReturn(this,(ChannelWithMiddleware.__proto__||Object.getPrototypeOf(ChannelWithMiddleware)).call(this,options));var defaults={middlewares:[]};var opts=$.extend(!0,{},defaults,options);return _this.middlewares=new __WEBPACK_IMPORTED_MODULE_0__middleware_manager__.a(opts,_this.notify.bind(_this),_this),_this}return _inherits(ChannelWithMiddleware,_ChannelManager),_createClass(ChannelWithMiddleware,[{key:"publish",value:function(topic,value,options){var _this2=this;var normalized=Object(__WEBPACK_IMPORTED_MODULE_1__channel_utils__.d)(topic,value,options);var prom=$.Deferred().resolve(normalized.params).promise();var lastAvailableData=normalized.params;return this.middlewares.filter("publish").forEach(function(middleware){prom=prom.then(function(publishResponse){return middleware(publishResponse,normalized.options)}).then(function(response){return lastAvailableData=response||lastAvailableData})}),prom=prom.then(function(published){return _get(ChannelWithMiddleware.prototype.__proto__||Object.getPrototypeOf(ChannelWithMiddleware.prototype),"publish",_this2).call(_this2,published,normalized.options)})}},{key:"subscribe",value:function(topics,cb,options){var subscribeMiddlewares=this.middlewares.filter("subscribe");var newTopics=[].concat(topics);return subscribeMiddlewares.forEach(function(middleware){newTopics=middleware(newTopics,options)||newTopics}),_get(ChannelWithMiddleware.prototype.__proto__||Object.getPrototypeOf(ChannelWithMiddleware.prototype),"subscribe",this).call(this,newTopics,cb,options)}},{key:"unsubscribe",value:function(token){var currentTopics=getTopicsFromSubsList(this.subscriptions);_get(ChannelWithMiddleware.prototype.__proto__||Object.getPrototypeOf(ChannelWithMiddleware.prototype),"unsubscribe",this).call(this,token);var remainingTopics=getTopicsFromSubsList(this.subscriptions);var unsubscribedTopics=_.difference(currentTopics,remainingTopics);this.middlewares.filter("unsubscribe").forEach(function(middleware){return middleware(unsubscribedTopics,remainingTopics)})}},{key:"unsubscribeAll",value:function(){var currentlySubscribed=this.getSubscribedTopics();_get(ChannelWithMiddleware.prototype.__proto__||Object.getPrototypeOf(ChannelWithMiddleware.prototype),"unsubscribeAll",this).call(this),this.middlewares.filter("unsubscribe").forEach(function(middleware){return middleware(currentlySubscribed,[])})}}]),ChannelWithMiddleware}(ChannelManager)}__webpack_exports__.a=withMiddleware;var __WEBPACK_IMPORTED_MODULE_0__middleware_manager__=__webpack_require__(54);var __WEBPACK_IMPORTED_MODULE_1__channel_utils__=__webpack_require__(1);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var _get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;if(void 0!==getter)return getter.call(receiver)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function MiddlewareManager(options,notifier,channelManagerContext){var defaults={middlewares:[]};var opts=$.extend(!0,{},defaults,options);var optsToPassOn=_.omit(opts,Object.keys(defaults));var list=[];var publicAPI={list:list,add:function(middleware,index){_.isFunction(middleware)&&(middleware=new middleware(optsToPassOn,notifier,channelManagerContext)),$.extend(channelManagerContext,middleware.expose),list.push(middleware)},filter:function(type){return type+="Handler",list.reduce(function(accum,m){return m[type]&&accum.push(m[type]),accum},[])}};$.extend(this,publicAPI),opts.middlewares.forEach(this.add)}__webpack_exports__.a=MiddlewareManager}]);
//# sourceMappingURL=flow.min.js.map